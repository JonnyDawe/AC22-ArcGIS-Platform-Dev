"use strict";(self.webpackChunkreveal_js_testing=self.webpackChunkreveal_js_testing||[]).push([[890],{7928:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "KC": () => (/* binding */ l),\n/* harmony export */   "QI": () => (/* binding */ c),\n/* harmony export */   "Yx": () => (/* binding */ o),\n/* harmony export */   "BH": () => (/* binding */ p)\n/* harmony export */ });\n/* unused harmony export isValidPixelBlock */\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(61681);\n/* harmony import */ var _PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(34780);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst i=180/Math.PI,n=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0},r=new Map;function o(e,t){return r.get(e)/r.get(t)||1}function a(e){return(450-e)%360}function h(e,t="geographic"){const[n,r]=e,o=Math.sqrt(n*n+r*r);let h=Math.atan2(r,n)*i;return h=(360+h)%360,"geographic"===t&&(h=a(h)),[o,h]}function s(e,t="geographic"){let n=e[1];"geographic"===t&&(n=a(n)),n%=360;const r=e[0];return[r*Math.cos(n/i),r*Math.sin(n/i)]}function l(e,i,r="geographic",o=1){if(!n(e))return e;const{pixels:a,width:l,height:c}=e,p=l*c,u=a[0],x=a[1],m=_PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].createEmptyBand */ .Z.createEmptyBand(e.pixelType,p),f=_PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].createEmptyBand */ .Z.createEmptyBand(e.pixelType,p);let d=0;for(let t=0;t<c;t++)for(let e=0;e<l;e++)"vector-uv"===i?([m[d],f[d]]=h([u[d],x[d]],r),m[d]*=o):([m[d],f[d]]=s([u[d],x[d]],r),m[d]*=o,f[d]*=o),d++;const g=new _PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[m,f]});return g.updateStatistics(),g}function c(e,t,i=1){if(1===i||!n(e))return e;const r=e.clone(),{pixels:o,width:a,height:h}=r,s=o[0],l=o[1];let c=0;for(let n=0;n<h;n++)for(let e=0;e<a;e++)"vector-uv"===t?(s[c]*=i,l[c]*=i):s[c]*=i,c++;return r.updateStatistics(),r}function p(t,i,n,r,o){if(!(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__/* .isSome */ .pC)(o)||!o.spatialReference.equals(t.spatialReference))return{extent:t,width:i,height:n,resolution:t.width/i};const a=o.xmin,h=o.ymax;r=Math.max(r||0,30);const s=Math.ceil(i*(1/r)),l=Math.ceil(n*(1/r)),c=((t.xmax-t.xmin)/s+(t.ymax-t.ymin)/l)/2;return t.xmin=a+Math.floor((t.xmin-a)/c)*c,t.xmax=a+Math.ceil((t.xmax-a)/c)*c,t.ymin=h+Math.floor((t.ymin-h)/c)*c,t.ymax=h+Math.ceil((t.ymax-h)/c)*c,{extent:t,width:Math.round(t.width/c),height:Math.round(t.height/c),resolution:c}}r.set("meter-per-second",1),r.set("kilometer-per-hour",.277778),r.set("knots",.514444),r.set("feet-per-second",.3048),r.set("mile-per-hour",.44704);\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/layers/support/rasterFunctions/vectorFieldUtils.js?')},86602:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "e": () => (/* binding */ g)\n/* harmony export */ });\n/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1662);\n/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(19710);\n/* harmony import */ var _chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(55542);\n/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(27518);\n/* harmony import */ var _webgl_FramebufferObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(18567);\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39994);\n/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(91907);\n/* harmony import */ var _webgl_RenderingContext_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(13974);\n/* harmony import */ var _chunks_builtins_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(88338);\n/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(43487);\n/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(29620);\n/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(51118);\n/* harmony import */ var _ImageryBitmapSource_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(7349);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction d(t){return t&&"render"in t}function c(t){return t&&!("render"in t)}function l(t){const e=document.createElement("canvas");return e.width=t.width,e.height=t.height,t.render(e.getContext("2d")),e}function x(t,e,i){const s={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return e&&i&&(s.width=e,s.height=i),new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(t,s)}class g extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_11__/* .DisplayObject */ .s{constructor(t=null,e,i=!0){super(),this.requestRenderOnSourceChangedEnabled=i,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.transforms={dvs:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_1__.c)()},this.blendFunction=e,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){this._source=t,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t.context)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}setTransform(h){const o=(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.b)(this.transforms.dvs),[u,a]=h.toScreenNoRotation([0,0],this.x,this.y),d=this.resolution/this.pixelRatio/h.resolution,c=d*this.width,l=d*this.height,x=Math.PI*this.rotation/180;(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.c)(o,o,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_2__.f)(u,a)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.c)(o,o,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_2__.f)(c/2,l/2)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.r)(o,o,-x),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.c)(o,o,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_2__.f)(-c/2,-l/2)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.k)(o,o,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_2__.f)(c,l)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.m)(this.transforms.dvs,h.displayViewMat3,o)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind(t,e){this._texture&&t.bindTexture(this._texture,e)}updateTexture(t){var e;if(!this.stage)return null==(e=this._texture)||e.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=x(t,this.sourceWidth,this.sourceHeight):this._texture=x(t));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),d(i))if(i instanceof _ImageryBitmapSource_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z){const t=i.getRenderedRasterPixels();this._texture.setData(t.renderedRasterPixels)}else this._texture.setData(l(i));else c(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/2d/engine/Bitmap.js?')},12688:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "c": () => (/* binding */ t)\n/* harmony export */ });\n/* harmony import */ var _brushes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(14351);\n/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(38716);\n/* harmony import */ var _webgl_WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(10994);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nclass t extends _webgl_WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z{get requiresDedicatedFBO(){return this.children.some((e=>"additive"===e.blendFunction))}prepareRenderPasses(s){const t=s.registerRenderPass({name:"bitmap",brushes:[_brushes_js__WEBPACK_IMPORTED_MODULE_0__/* .brushes.bitmap */ .U.bitmap],target:()=>this.children,drawPhase:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase.MAP */ .jx.MAP});return[...super.prepareRenderPasses(s),t]}}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js?')},7349:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nclass e{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return this.pixelBlock?this.pixelBlock.width:0}get height(){return this.pixelBlock?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(!t)return;const i=this.filter({pixelBlock:t}),l=i.pixelBlock.getAsRGBA(),h=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);h.data.set(l),e.putImageData(h,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (e);\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js?')},90890:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "default": () => (/* binding */ ImageryLayerView2D)\n});\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/tslib.es6.js\nvar tslib_es6 = __webpack_require__(36663);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/watchUtils.js\nvar watchUtils = __webpack_require__(15071);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\nvar property = __webpack_require__(81977);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(39994);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\nvar ensureType = __webpack_require__(7283);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(13802);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js + 1 modules\nvar subclass = __webpack_require__(12571);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js + 4 modules\nvar LayerView2D = __webpack_require__(80347);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/Graphic.js\nvar Graphic = __webpack_require__(80085);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/request.js\nvar request = __webpack_require__(66341);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Accessor.js + 5 modules\nvar Accessor = __webpack_require__(23657);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/maybe.js\nvar maybe = __webpack_require__(61681);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/promiseUtils.js\nvar promiseUtils = __webpack_require__(78668);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/screenUtils.js\nvar screenUtils = __webpack_require__(95550);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js\nvar enumeration = __webpack_require__(79438);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/Extent.js\nvar Extent = __webpack_require__(91772);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/rasterFunctions/rasterProjectionHelper.js\nvar rasterProjectionHelper = __webpack_require__(18486);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/rasterFunctions/vectorFieldUtils.js\nvar vectorFieldUtils = __webpack_require__(7928);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/support/GraphicsCollection.js\nvar GraphicsCollection = __webpack_require__(94449);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/Container.js\nvar Container = __webpack_require__(10530);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js\nvar GraphicContainer = __webpack_require__(68114);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js + 21 modules\nvar GraphicsView2D = __webpack_require__(57971);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/imagery/ImageryGraphicsView2D.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst v=Logger/* default.getLogger */.Z.getLogger("esri.views.2d.layers.imagery.ImageryGraphicsView2D");let _=class extends Accessor/* default */.Z{constructor(){super(...arguments),this.attached=!1,this.container=new Container/* Container */.W,this.updateRequested=!1,this._graphicsView=null,this._projectFullExtentPromise=null,this._previousExtents=[],this._previousSymbolTileResolution=0,this._previousRendererSignature="",this.type="Graphics",this._graphics=new GraphicsCollection/* default */.ZP,this._updateGraphics=(0,promiseUtils/* debounce */.Ds)((async(e,t)=>{if(!e.stationary)return;const i=e.state,r=new Extent/* default */.Z({xmin:i.extent.xmin,ymin:i.extent.ymin,xmax:i.extent.xmax,ymax:i.extent.ymax,spatialReference:i.spatialReference}),[s,o]=e.state.size,n={};n.timeExtent=this.timeExtent,n.requestAsImageElement=!1,n.signal=t,null==this._projectFullExtentPromise&&(this._projectFullExtentPromise=this._getProjectedFullExtent(r.spatialReference));const p="vector-field"===this.layer.renderer.type?this.layer.renderer.symbolTileSize:50,h=await this._projectFullExtentPromise,{extent:c,resolution:l,width:m,height:y}=(0,vectorFieldUtils/* snapImageToSymbolTile */.BH)(r,s,o,p,h),g=await this.layer.fetchImage(c,m,y,n),x=this.layer.renderer;if("vector-field"===x.type){const t=g.pixelData.pixelBlock,i=x.sizeVariables[0];i.minDataValue&&i.maxDataValue||(i.minDataValue=t.statistics[0].minValue,i.maxDataValue=t.statistics[0].maxValue),this._pixelData={extent:c,pixelBlock:g.pixelData.pixelBlock};const r=JSON.stringify(this.layer.renderer),s=this._previousRendererSignature===r,o=Math.abs(this._previousSymbolTileResolution-l)/l<.01,n=c.clone().normalize(),p=this._previousExtents.some((e=>n.some((t=>e.intersects(t))))),h=s&&o&&p?this._previousExtents:[],u=await x.getGraphicsFromPixelData(g.pixelData,"vector-uv"===this.layer.rasterInfo.dataType,h);if(h.length){const e=this._graphics.items.filter((e=>(0,maybe/* isSome */.pC)(e.geometry)&&h.some((t=>t.intersects(e.geometry)))&&!n.some((t=>t.intersects(e.geometry)))));this._graphics.removeMany(e),this._graphics.addMany(u)}else this._graphics.set("items",u);this._graphicsView.update(e),this._previousExtents=n,this._previousRendererSignature=r,this._previousSymbolTileResolution=l}}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(e){this._updateGraphics(e).catch((e=>{(0,promiseUtils/* isAbortError */.D_)(e)||v.error(e)}))}hitTest(e,i){const r=this.view.toMap((0,screenUtils/* createScreenPoint */.vW)(e,i));return Promise.resolve(new Graphic/* default */.Z({attributes:{},geometry:r,layer:this.layer}))}attach(){this._graphicsView=new GraphicsView2D/* default */.Z({view:this.view,graphics:this._graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new GraphicContainer/* default */.Z(this.view.featuresTilingScheme)}),this.attached=!0}detach(){this._graphics.destroy(),this._graphicsView.destroy(),this.container.removeChild(this._graphicsView.container),this._graphicsView=null}moveStart(){}viewChange(){}moveEnd(){}install(e){this.container.addChild(this._graphicsView.container),e.addChild(this.container)}uninstall(e){this.container.removeChild(this._graphicsView.container),e.removeChild(this.container)}isUpdating(){return this._graphicsView.updating||this.updateRequested}getPixelData(){return this.updating?null:this._pixelData}redraw(){}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}async _getProjectedFullExtent(e){try{return await (0,rasterProjectionHelper/* projectExtent */.tB)(this.layer.fullExtent,e)}catch(t){try{const t=(await (0,request["default"])(this.layer.url,{query:{option:"footprints",outSR:e.wkid||JSON.stringify(e.toJSON()),f:"json"}})).data.featureCollection.layers[0].layerDefinition.extent;return t?Extent/* default.fromJSON */.Z.fromJSON(t):null}catch{return null}}}};(0,tslib_es6._)([(0,property/* property */.Cb)()],_.prototype,"attached",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],_.prototype,"container",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],_.prototype,"layer",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],_.prototype,"timeExtent",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],_.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],_.prototype,"updateRequested",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],_.prototype,"updating",null),(0,tslib_es6._)([(0,enumeration/* enumeration */.J)({graphics:"Graphics"})],_.prototype,"type",void 0),_=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.2d.layers.imagery.ImageryGraphicsView2D")],_);var w=_;/* harmony default export */ const ImageryGraphicsView2D = (w);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/rasterFunctions/pixelUtils.js\nvar pixelUtils = __webpack_require__(31329);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js\nvar BitmapContainer = __webpack_require__(12688);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js\nvar ImageryBitmapSource = __webpack_require__(7349);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/support/ExportStrategy.js + 1 modules\nvar ExportStrategy = __webpack_require__(23134);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/imagery/ImageryView2D.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst u=Logger/* default.getLogger */.Z.getLogger("esri.views.2d.layers.imagery.ImageryView2D");let g=class extends Accessor/* default */.Z{constructor(){super(...arguments),this.attached=!1,this.container=new Container/* Container */.W,this.updateRequested=!1,this.type="Imagery",this._bitmapView=null}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(e){this.strategy.update(e).catch((e=>{(0,promiseUtils/* isAbortError */.D_)(e)||u.error(e)}))}detach(){this.strategy.destroy(),this._bitmapView.removeAllChildren(),this.container.removeAllChildren()}hitTest(e,r){const i=this.view.toMap((0,screenUtils/* createScreenPoint */.vW)(e,r));return Promise.resolve(new Graphic/* default */.Z({attributes:{},geometry:i,layer:this.layer}))}attach(){const e=this.layer.version>=10,t=this.layer.version>=10.1?this.layer.imageMaxHeight:2048,r=this.layer.version>=10.1?this.layer.imageMaxWidth:2048;this._bitmapView=new BitmapContainer/* BitmapContainer */.c,this.strategy=new ExportStrategy/* default */.Z({container:this._bitmapView,imageNormalizationSupported:e,imageMaxHeight:t,imageMaxWidth:r,fetchSource:this._fetchImage.bind(this),requestUpdate:()=>this.requestUpdate()}),this.attached=!0}moveStart(){}viewChange(){}moveEnd(){}install(e){this.container.addChild(this._bitmapView),e.addChild(this.container)}uninstall(e){this.container.removeChild(this._bitmapView),e.removeChild(this.container)}redraw(){this.strategy.updateExports((e=>{e.source instanceof HTMLImageElement?e.requestRender():this.layer.applyRenderer({pixelBlock:e.source.pixelBlock}).then((t=>{const r=e.source;r.pixelBlock=t.pixelBlock,r.filter=e=>this.layer.applyFilter(e),this.container.requestRender()}))}))}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}isUpdating(){return this.strategy.updating||this.updateRequested}getPixelData(){if(this.updating)return null;const e=this.strategy.bitmaps;if(1===e.length&&e[0].source)return{extent:e[0].source.extent,pixelBlock:e[0].source.originalPixelBlock};if(e.length>1){const t=this.view.extent,r=e.map((e=>e.source)).filter((e=>e.extent&&e.extent.intersects(t))).map((e=>({extent:e.extent,pixelBlock:e.originalPixelBlock}))),i=(0,pixelUtils/* mosaicPixelData */.Kh)(r,t);return i?{extent:i.extent,pixelBlock:i.pixelBlock}:null}return null}_fetchImage(e,t,r,i){return(i=i||{}).timeExtent=this.timeExtent,i.requestAsImageElement=!0,this.layer.fetchImage(e,t,r,i).then((e=>e.imageElement?e.imageElement:this.layer.applyRenderer(e.pixelData,{signal:i.signal}).then((t=>{const r=new ImageryBitmapSource/* default */.Z(t.pixelBlock,t.extent.clone(),e.pixelData.pixelBlock);return r.filter=e=>this.layer.applyFilter(e),r}))))}};(0,tslib_es6._)([(0,property/* property */.Cb)()],g.prototype,"attached",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],g.prototype,"container",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],g.prototype,"layer",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],g.prototype,"strategy",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],g.prototype,"timeExtent",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],g.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],g.prototype,"updateRequested",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],g.prototype,"updating",null),(0,tslib_es6._)([(0,enumeration/* enumeration */.J)({imagery:"Imagery"})],g.prototype,"type",void 0),g=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.2d.layers.imagery.ImageryView2D")],g);var y=g;/* harmony default export */ const ImageryView2D = (y);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Error.js\nvar Error = __webpack_require__(70375);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/Point.js + 2 modules\nvar Point = __webpack_require__(53446);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/commonProperties.js\nvar commonProperties = __webpack_require__(23072);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/rest/support/Query.js\nvar Query = __webpack_require__(14136);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/layers/support/popupUtils.js\nvar popupUtils = __webpack_require__(59439);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/layers/ImageryLayerView.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst ImageryLayerView_u=u=>{let m=class extends u{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(e,o){const{layer:s}=this;if(!e)throw new Error/* default */.Z("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:s});const{popupEnabled:i}=s,u=(0,popupUtils/* getFetchPopupTemplate */.V)(s,o);if(!i||!(0,maybe/* isSome */.pC)(u))throw new Error/* default */.Z("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:i,popupTemplate:u});const m=await u.getRequiredFields(),c=new Query/* default */.Z;c.timeExtent=this.timeExtent,c.geometry=e,c.outFields=m,c.outSpatialReference=e.spatialReference;const l=this.view.resolution,y="2d"===this.view.type?new Point/* default */.Z(l,l,this.view.spatialReference):new Point/* default */.Z(.5*l,.5*l,this.view.spatialReference),{returnTopmostRaster:h,showNoDataRecords:w}=u.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},d={returnDomainValues:!0,returnTopmostRaster:h,pixelSize:y,showNoDataRecords:w,signal:(0,maybe/* isSome */.pC)(o)?o.signal:null};return s.queryVisibleRasters(c,d).then((e=>e))}canResume(){var e;return!!super.canResume()&&(null==(e=this.timeExtent)||!e.isEmpty)}};return (0,tslib_es6._)([(0,property/* property */.Cb)()],m.prototype,"layer",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],m.prototype,"suspended",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)(commonProperties/* combinedViewLayerTimeExtentProperty */.qG)],m.prototype,"timeExtent",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],m.prototype,"view",void 0),m=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.layers.ImageryLayerView")],m),m};/* harmony default export */ const ImageryLayerView = ((/* unused pure expression or super */ null && (ImageryLayerView_u)));\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/layers/LayerView.js\nvar LayerView = __webpack_require__(26216);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js\nvar RefreshableLayerView = __webpack_require__(55068);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/ImageryLayerView2D.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nlet p=class extends(ImageryLayerView_u((0,RefreshableLayerView/* RefreshableLayerView */.yc)((0,LayerView2D/* LayerView2DMixin */.y)(LayerView/* default */.Z)))){constructor(){super(...arguments),this._exportImageVersion=-1}initialize(){this.handles.add((0,watchUtils/* init */.S1)(this,["layer.blendMode"],(e=>{this.subview&&(this.subview.container.blendMode=e)}),!0))}get pixelData(){return this.updating?null:this.subview.getPixelData()}get updating(){return!(this.subview&&!this.subview.updating)}hitTest(e,t){return this.suspended||!this.subview?Promise.resolve(null):this.subview.hitTest(e,t)}update(e){var t;null==(t=this.subview)||t.update(e)}attach(){this.layer.increaseRasterJobHandlerUsage(),this._setSubView(),this.handles.add([(0,watchUtils/* init */.S1)(this,"layer.exportImageServiceParameters.version",(e=>{this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())})),this.watch("timeExtent",(()=>{this.subview.timeExtent=this.timeExtent,this.requestUpdate()})),this.layer.on("redraw",(()=>this.subview.redraw())),(0,watchUtils/* watch */.YP)(this.layer,"renderer",(()=>this._setSubView()))],"imagerylayerview-update")}detach(){this.layer.decreaseRasterJobHandlerUsage(),this.subview.destroy(),this.handles.remove("imagerylayerview-update"),this._exportImageVersion=-1}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}async doRefresh(){this.requestUpdate()}isUpdating(){return!this.subview||!this.suspended&&this.subview.isUpdating()}_setSubView(){var e;let t="Imagery";var s,i;("vector-field"===(null==(e=this.layer.renderer)?void 0:e.type)&&"lerc"===this.layer.format&&(t="Graphics"),this.subview&&this.subview.type===t)||(null==(s=this.subview)||s.uninstall(this.container),null==(i=this.subview)||i.destroy(),this.subview="Imagery"===t?new ImageryView2D({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):new ImageryGraphicsView2D({layer:this.layer,view:this.view,timeExtent:this.timeExtent}),this.subview.attach(),this.subview.install(this.container),this.subview.container.blendMode=this.layer.blendMode);this.requestUpdate()}};(0,tslib_es6._)([(0,property/* property */.Cb)()],p.prototype,"pixelData",null),(0,tslib_es6._)([(0,property/* property */.Cb)({readOnly:!0})],p.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.Cb)()],p.prototype,"subview",void 0),p=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.2d.layers.ImageryLayerView2D")],p);var d=p;/* harmony default export */ const ImageryLayerView2D = (d);\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/2d/layers/ImageryLayerView2D.js_+_3_modules?')},68114:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(38716);\n/* harmony import */ var _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(28715);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nclass i extends _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z{renderChildren(r){this.attributeView.bindTextures(r.context),this.children.some((e=>e.hasData))&&(super.renderChildren(r),r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase.MAP */ .jx.MAP&&this._renderChildren(r),r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase.HIGHLIGHT */ .jx.HIGHLIGHT&&this._renderHighlight(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (i);\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js?')},23134:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "Z": () => (/* binding */ ExportStrategy)\n});\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/tslib.es6.js\nvar tslib_es6 = __webpack_require__(36663);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Accessor.js + 5 modules\nvar Accessor = __webpack_require__(23657);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/promiseUtils.js\nvar promiseUtils = __webpack_require__(78668);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\nvar property = __webpack_require__(81977);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(39994);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\nvar ensureType = __webpack_require__(7283);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(13802);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js + 1 modules\nvar subclass = __webpack_require__(12571);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/Extent.js\nvar Extent = __webpack_require__(91772);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js\nvar aaBoundingRect = __webpack_require__(24568);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js\nvar spatialReferenceUtils = __webpack_require__(35925);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/TileInfo.js\nvar TileInfo = __webpack_require__(81590);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/viewStateUtils.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst t=Math.PI/180;function n(n){return n*t}function o(t,n,o){const{resolution:r,size:u}=o;return t[0]=r*(Math.round(n[0]/r)+u[0]%2*.5),t[1]=r*(Math.round(n[1]/r)+u[1]%2*.5),t}function viewStateUtils_r(t,o){const r=n(o.rotation),u=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),[s,c]=o.size;return t[0]=Math.round(c*a+s*u),t[1]=Math.round(c*u+s*a),t}function u(t,n,o,r){const[u,a]=n,[s,c]=r,i=.5*o;return t[0]=u-i*s,t[1]=a-i*c,t[2]=u+i*s,t[3]=a+i*c,t}function a(t,n){const[o,r,u,a]=t,[s,c,i,e]=n;return!(o>i||u<s||r>e||a<c)}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/Bitmap.js\nvar Bitmap = __webpack_require__(86602);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js + 2 modules\nvar TileInfoView = __webpack_require__(64970);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/tiling/TileKey.js\nvar TileKey = __webpack_require__(87241);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/support/ExportStrategy.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst ExportStrategy_u=(0,aaBoundingRect/* create */.Ue)(),g=[0,0],f=new TileKey/* default */.Z(0,0,0,0),x={container:null,fetchSource:null,requestUpdate:null,imageMaxWidth:2048,imageMaxHeight:2048,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1};let y=class extends Accessor/* default */.Z{constructor(t){super(t),this._imagePromise=null,this.bitmaps=[],this.hidpi=x.hidpi,this.imageMaxWidth=x.imageMaxWidth,this.imageMaxHeight=x.imageMaxHeight,this.imageRotationSupported=x.imageRotationSupported,this.imageNormalizationSupported=x.imageNormalizationSupported,this.update=(0,promiseUtils/* debounce */.Ds)((async(t,e)=>{if(!t.stationary||this.destroyed)return null;const i=t.state,o=(0,spatialReferenceUtils/* getInfo */.C5)(i.spatialReference),r=this.hidpi?t.pixelRatio:1,s=this.imageNormalizationSupported&&i.worldScreenWidth&&i.worldScreenWidth<i.size[0];s?(g[0]=i.worldScreenWidth,g[1]=i.size[1]):this.imageRotationSupported?(g[0]=i.size[0],g[1]=i.size[1]):viewStateUtils_r(g,i);const a=Math.floor(g[0]*r)>this.imageMaxWidth||Math.floor(g[1]*r)>this.imageMaxHeight,n=o&&(i.extent.xmin<o.valid[0]||i.extent.xmax>o.valid[1]),l=!this.imageNormalizationSupported&&n,d=!a&&!l,h=this.imageRotationSupported?i.rotation:0;if(d){const t=s?i.paddedViewState.center:i.center;this._imagePromise=this._singleExport(i,g,t,i.resolution,h,r,e)}else{let t=Math.min(this.imageMaxWidth,this.imageMaxHeight);l&&(t=Math.min(i.worldScreenWidth,t)),this._imagePromise=this._tiledExport(i,t,h,r,e)}return this._imagePromise.then((async t=>{if(this._imagePromise=null,!this.destroyed){this.bitmaps=null!=t?t:[];for(const e of this.container.children)t.includes(e)||e.fadeOut().then((()=>{e.remove()}));for(const e of t)this.container.addChild(e),e.fadeIn()}})).catch((t=>{throw this._imagePromise=null,t}))}),5e3)}destroy(){this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}updateExports(t){for(const e of this.container.children){if(!e.visible||!e.stage)return;t(e),e.invalidateTexture(),e.requestRender()}}async _export(t,e,i,o,r,s){const a=await this.fetchSource(t,Math.floor(e*r),Math.floor(i*r),{rotation:o,pixelRatio:r,signal:s}),p=new Bitmap/* Bitmap */.e(a,"additive");return p.x=t.xmin,p.y=t.ymax,p.resolution=t.width/e,p.rotation=o,p.pixelRatio=r,p}async _singleExport(t,e,i,o,r,a,p){u(ExportStrategy_u,i,o,e);const n=new Extent/* default */.Z(ExportStrategy_u[0],ExportStrategy_u[1],ExportStrategy_u[2],ExportStrategy_u[3],t.spatialReference);return[await this._export(n,e[0],e[1],r,a,p)]}_tiledExport(t,e,i,o,r){const a=TileInfo/* default.create */.Z.create({size:e,spatialReference:t.spatialReference,scales:[t.scale]}),p=new TileInfoView/* default */.Z(a),m=p.getTileCoverage(t);if(!m)return null;const l=[];return m.forEach(((a,n,m,d)=>{f.set(a,n,m,d),p.getTileBounds(ExportStrategy_u,f);const h=new Extent/* default */.Z(ExportStrategy_u[0],ExportStrategy_u[1],ExportStrategy_u[2],ExportStrategy_u[3],t.spatialReference);l.push(this._export(h,e,e,i,o,r))})),Promise.all(l)}};(0,tslib_es6._)([(0,property/* property */.Cb)()],y.prototype,"_imagePromise",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],y.prototype,"bitmaps",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],y.prototype,"container",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],y.prototype,"fetchSource",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],y.prototype,"hidpi",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],y.prototype,"imageMaxWidth",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],y.prototype,"imageMaxHeight",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],y.prototype,"imageRotationSupported",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],y.prototype,"imageNormalizationSupported",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],y.prototype,"requestUpdate",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],y.prototype,"updating",null),y=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.2d.layers.support.ExportStrategy")],y);var S=y;/* harmony default export */ const ExportStrategy = (S);\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/2d/layers/support/ExportStrategy.js_+_1_modules?')}}]);