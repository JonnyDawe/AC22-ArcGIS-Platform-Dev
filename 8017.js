"use strict";(self.webpackChunkreveal_js_testing=self.webpackChunkreveal_js_testing||[]).push([[8017],{12348:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": () => (/* binding */ s)\n/* harmony export */ });\n/* harmony import */ var _maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(61681);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass s{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const s=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,s}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}find(s){if(0===this.size)return null;for(const e of this._buffer)if((0,_maybe_js__WEBPACK_IMPORTED_MODULE_0__/* .isSome */ .pC)(e)&&s(e))return e;return null}clear(s){let e=this.dequeue();for(;(0,_maybe_js__WEBPACK_IMPORTED_MODULE_0__/* .isSome */ .pC)(e);)s&&s(e),e=this.dequeue()}}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/core/CircularArray.js?')},88464:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "AM": () => (/* binding */ h)\n/* harmony export */ });\n/* unused harmony exports canInterpolateEffectStops, convertEffectToStops, normalizeEffectStops */\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(36663);\n/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(53443);\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39994);\n/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(67134);\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13802);\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(81977);\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(7283);\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(40266);\n/* harmony import */ var _parser_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(13045);\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(60278);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst a=-1;let h=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z{constructor(t){super(t),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)("mapview-transitions-duration"),this.effects=[]}set effect(t){if(this._get("effect")!==(t=t||"")){this._set("effect",t);try{this._transitionTo(u(t))}catch(e){this._transitionTo([]),_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getLogger */ .Z.getLogger(this.declaredClass).warn("Invalid Effect",{effect:t,error:e})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(t){this._updateForScale(t)}get transitioning(){return null!==this._to}canTransitionTo(t){try{return this.scale>0&&_(this._current,u(t),this.scale)}catch{return!1}}transitionStep(t,e){this._applyTimeTransition(t),this._updateForScale(e)}end(){this._applyTimeTransition(this.duration)}_transitionTo(t){this.scale>0&&_(this._current,t,this.scale)?(this._final=t,this._to=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .d9)(t),p(this._current,this._to,this.scale),this._from=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .d9)(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._set("effects",this._current[0]?(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .d9)(this._current[0].effects):[])}_applyTimeTransition(t){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=t;const e=Math.min(1,this._time/this.duration);for(let s=0;s<this._current.length;s++){const t=this._current[s],r=this._from[s],i=this._to[s];t.scale=m(r.scale,i.scale,e);for(let s=0;s<t.effects.length;s++){const n=t.effects[s],c=r.effects[s],o=i.effects[s];n.interpolate(c,o,e)}}1===e&&(this._current=this._final,this._set("effects",this._current[0]?(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .d9)(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(t){if(this._set("scale",t),0===this._current.length)return;const e=this._current,s=this._current.length-1;let r,i,n=1;if(1===e.length||t>=e[0].scale)i=r=e[0].effects;else if(t<=e[s].scale)i=r=e[s].effects;else for(let c=0;c<s;c++){const s=e[c],o=e[c+1];if(s.scale>=t&&o.scale<=t){n=(t-s.scale)/(o.scale-s.scale),r=s.effects,i=o.effects;break}}for(let c=0;c<this.effects.length;c++){this.effects[c].interpolate(r[c],i[c],n)}}};function u(t){const e=(0,_parser_js__WEBPACK_IMPORTED_MODULE_7__/* .parse */ .Q)(t)||[];return g(e)?[{scale:a,effects:e}]:e}function _(t,e,s){var r,i,n,c;if(null==(r=t[0])||!r.effects||null==(i=e[0])||!i.effects)return!0;return!(((null==(n=t[0])?void 0:n.scale)===a||(null==(c=e[0])?void 0:c.scale)===a)&&(t.length>1||e.length>1)&&s<=0)&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_8__/* .canInterpolateEffects */ .AS)(t[0].effects,e[0].effects)}function p(t,e,s){var r,i;const n=t.length>e.length?t:e,c=t.length>e.length?e:t,o=c[c.length-1],l=null!=(r=null==o?void 0:o.scale)?r:s,h=null!=(i=null==o?void 0:o.effects)?i:[];for(let f=c.length;f<n.length;f++)c.push({scale:l,effects:[...h]});for(let u=0;u<n.length;u++)c[u].scale=c[u].scale===a?s:c[u].scale,n[u].scale=n[u].scale===a?s:n[u].scale,(0,_utils_js__WEBPACK_IMPORTED_MODULE_8__/* .normalizeEffects */ .uF)(c[u].effects,n[u].effects)}function m(t,e,s){return t+(e-t)*s}function g(t){const e=t[0];return!!e&&"type"in e}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .Cb)()],h.prototype,"_to",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .Cb)()],h.prototype,"duration",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .Cb)({value:""})],h.prototype,"effect",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .Cb)({readOnly:!0})],h.prototype,"effects",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .Cb)({readOnly:!0})],h.prototype,"hasEffects",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .Cb)({value:0})],h.prototype,"scale",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .Cb)({readOnly:!0})],h.prototype,"transitioning",null),h=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .j)("esri.layers.effects.EffectView")],h);\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/layers/effects/EffectView.js?')},44883:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "t": () => (/* binding */ t)\n/* harmony export */ });\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66341);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nasync function t(t,r){const{data:a}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(t,{responseType:"image",...r});return a}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/support/requestImageUtils.js?')},556:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": () => (/* binding */ m)\n/* harmony export */ });\n/* harmony import */ var _CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(95215);\n/* harmony import */ var _Rect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(10927);\n/* harmony import */ var _SDFHelper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(89626);\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(60789);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst o=512;class m{constructor(e){this._resourceManager=e}dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(s,o,m){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===s.type||"esriSFS"===s.type){const[t,r,a]=_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__/* .SymbolHelper.rasterizeSimpleFill */ .fN.rasterizeSimpleFill(this._rasterizationCanvas,s.style,o);return{size:[r,a],image:new Uint32Array(t.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===s.type||"esriSLS"===s.type||"line"===s.type&&s.dashTemplate){let r,a;if("simple-line"===s.type||"esriSLS"===s.type)switch(r=(0,_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__/* .slsDashToTemplateArray */ .U1)(s.style,s.cap),s.cap){case"butt":a="Butt";break;case"square":a="Square";break;default:a="Round"}else r=s.dashTemplate,a=s.cim.capStyle;const[i,n,o]=_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__/* .SymbolHelper.rasterizeSimpleLine */ .fN.rasterizeSimpleLine(r,a);return{size:[n,o],image:new Uint32Array(i.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let l,c,f;if("simple-marker"===s.type||"esriSMS"===s.type||"line-marker"===s.type?(l=_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__/* .CIMSymbolHelper.fromSimpleMarker */ .B$.fromSimpleMarker(s),f=(0,_SDFHelper_js__WEBPACK_IMPORTED_MODULE_1__/* .getSDFInfo */ .Fp)(l)):s.cim&&"CIMHatchFill"===s.cim.type?(l=_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__/* .CIMSymbolHelper.fromCIMHatchFill */ .B$.fromCIMHatchFill(s.cim),c=new _Rect_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(l.frame.xmin,-l.frame.ymax,l.frame.xmax-l.frame.xmin,l.frame.ymax-l.frame.ymin)):s.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===s.cim.markerPlacement.type?(l=_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__/* .CIMSymbolHelper.fromCIMInsidePolygon */ .B$.fromCIMInsidePolygon(s.cim),c=new _Rect_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(l.frame.xmin,-l.frame.ymax,l.frame.xmax-l.frame.xmin,l.frame.ymax-l.frame.ymin)):(l=s.cim,f=(0,_SDFHelper_js__WEBPACK_IMPORTED_MODULE_1__/* .getSDFInfo */ .Fp)(l)),f&&!m){const[e,t,r]=(0,_SDFHelper_js__WEBPACK_IMPORTED_MODULE_1__/* .buildSDF */ .RL)(f);return e?{size:[t,r],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[p,h,u,y,d]=_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__/* .CIMSymbolHelper.rasterize */ .B$.rasterize(this._rasterizationCanvas,l,c,this._resourceManager,!m);return p?{size:[h,u],image:new Uint32Array(p.buffer),sdf:!1,simplePattern:!1,anchorX:y,anchorY:d}:null}rasterizeImageResource(e,t,r,a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;const i=this._rasterizationCanvas.getContext("2d");r instanceof ImageData?i.putImageData(r,0,0):(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`),i.drawImage(r,0,0,e,t));const n=i.getImageData(0,0,e,t),m=new Uint8Array(n.data);if(a)for(const s of a)if(s&&s.oldColor&&4===s.oldColor.length&&s.newColor&&4===s.newColor.length){const[e,t,r,a]=s.oldColor,[i,n,o,l]=s.newColor;if(e===i&&t===n&&r===o&&a===l)continue;for(let s=0;s<m.length;s+=4)e===m[s]&&t===m[s+1]&&r===m[s+2]&&a===m[s+3]&&(m[s]=i,m[s+1]=n,m[s+2]=o,m[s+3]=l)}let l;for(let s=0;s<m.length;s+=4)l=m[s+3]/255,m[s]=m[s]*l,m[s+1]=m[s+1]*l,m[s+2]=m[s+2]*l;let c=m,f=e,p=t;const h=o;if(f>=h||p>=h){const r=f/p;r>1?(f=h,p=Math.round(h/r)):(p=h,f=Math.round(h*r)),c=new Uint8Array(4*f*p);const a=new Uint8ClampedArray(c.buffer);(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .resampleHermite */ .TT)(m,e,t,a,f,p,!1)}return{size:[f,p],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/symbols/cim/Rasterizer.js?')},10530:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "W": () => (/* binding */ s)\n/* harmony export */ });\n/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19710);\n/* harmony import */ var _layers_effects_EffectView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(88464);\n/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(51118);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass s extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_2__/* .DisplayObject */ .s{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach((t=>t.clips=e))}get computedEffects(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effects)?e:null}get effect(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effect)?e:""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new _layers_effects_EffectView_js__WEBPACK_IMPORTED_MODULE_1__/* .EffectView */ .AM),this._effectView.effect=e,this.requestRender())}updateTransitionProperties(e,t){super.updateTransitionProperties(e,t),this._effectView&&(this._effectView.transitionStep(e,t),this._effectView.transitioning&&this.requestRender())}doRender(e){const t=this.createRenderParams(e);this.renderChildren(t)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,t=this.children.length){if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),e}contains(e){return this._childrenSet.has(e)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,t}sortChildren(e){this._needsSort&&(this.children.sort(e),this._needsSort=!1)}_createTransforms(){return{dvs:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.c)()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.beforeRender(e);for(const t of this.children)t.processRender(e);for(const t of this.children)t.afterRender(e)}createRenderParams(e){return{...e,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}}}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/2d/engine/Container.js?')},51118:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "s": () => (/* binding */ a)\n/* harmony export */ });\n/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(31355);\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39994);\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(61681);\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(78668);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst r=1/(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)("mapview-transitions-duration");class a extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(e){this._clips=e,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(e){this._opacity!==e&&(this._opacity=Math.min(1,Math.max(e,0)),this.requestRender())}get stage(){return this._stage}set stage(e){if(this._stage===e)return;const t=this._stage;this._stage=e,e?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):t.trashDisplayObject(this)}get transforms(){return this._getTransforms()}_getTransforms(){return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__/* .isNone */ .Wi)(this._transforms)&&(this._transforms=this._createTransforms()),this._transforms}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .createResolver */ .hh)(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .createResolver */ .hh)(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(e){this.updateTransitionProperties(e.deltaTime,e.state.scale)}afterRender(e){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){var e;null==(e=this.parent)||e.removeChild(this)}setTransform(e){}processRender(e){this.stage&&this.computedVisible&&this.doRender(e)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.onDetach(),this.emit("detach")}updateTransitionProperties(e,t){if(this.fadeTransitionEnabled){const t=this._fadeOutResolver||!this.visible?0:this.opacity,s=this.computedOpacity;if(s===t)this.computedVisible=this.visible;else{const i=e*r;this.computedOpacity=s>t?Math.max(t,s-i):Math.min(t,s+i),this.computedVisible=this.computedOpacity>0;const a=t===this.computedOpacity;this.inFadeTransition=!a,a||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(e){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js?')},43405:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Fr": () => (/* binding */ L),\n/* harmony export */   "_K": () => (/* binding */ T),\n/* harmony export */   "al": () => (/* binding */ I)\n/* harmony export */ });\n/* unused harmony exports DrawPhase, MemoryBufferType */\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nvar E,I,N,T,L;!function(E){E[E.UNKNOWN=0]="UNKNOWN",E[E.FILL_VERTEX=1]="FILL_VERTEX",E[E.FILL_DD_VERTEX=2]="FILL_DD_VERTEX",E[E.FILL_INDEX=3]="FILL_INDEX",E[E.OUTLINE_VERTEX=4]="OUTLINE_VERTEX",E[E.OUTLINE_DD_VERTEX=5]="OUTLINE_DD_VERTEX",E[E.OUTLINE_INDEX=6]="OUTLINE_INDEX",E[E.LINE_VERTEX=7]="LINE_VERTEX",E[E.LINE_DD_VERTEX=8]="LINE_DD_VERTEX",E[E.LINE_INDEX=9]="LINE_INDEX",E[E.ICON_VERTEX=10]="ICON_VERTEX",E[E.ICON_DD_VERTEX=11]="ICON_DD_VERTEX",E[E.ICON_INDEX=12]="ICON_INDEX",E[E.TEXT_VERTEX=13]="TEXT_VERTEX",E[E.TEXT_DD_VERTEX=14]="TEXT_DD_VERTEX",E[E.TEXT_INDEX=15]="TEXT_INDEX",E[E.CIRCLE_VERTEX=16]="CIRCLE_VERTEX",E[E.CIRCLE_INDEX=17]="CIRCLE_INDEX"}(E||(E={})),function(E){E[E.FILL=1]="FILL",E[E.LINE=2]="LINE",E[E.SYMBOL=3]="SYMBOL",E[E.CIRCLE=4]="CIRCLE"}(I||(I={})),function(E){E[E.BACKGROUND=0]="BACKGROUND",E[E.OPAQUE=1]="OPAQUE",E[E.TRANSLUCENT=2]="TRANSLUCENT",E[E.SYMBOLS=3]="SYMBOLS",E[E.HITTEST=4]="HITTEST"}(N||(N={})),function(E){E[E.BACKGROUND=0]="BACKGROUND",E[E.FILL=1]="FILL",E[E.OUTLINE=2]="OUTLINE",E[E.LINE=3]="LINE",E[E.ICON=4]="ICON",E[E.CIRCLE=5]="CIRCLE",E[E.TEXT=6]="TEXT",E[E.TILEINFO=7]="TILEINFO"}(T||(T={})),function(E){E[E.PAINTER_CHANGED=0]="PAINTER_CHANGED",E[E.LAYOUT_CHANGED=1]="LAYOUT_CHANGED",E[E.LAYER_CHANGED=2]="LAYER_CHANGED",E[E.LAYER_REMOVED=3]="LAYER_REMOVED",E[E.SPRITES_CHANGED=4]="SPRITES_CHANGED"}(L||(L={}));\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/2d/engine/vectorTiles/enums.js?')},31090:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Hd": () => (/* binding */ s),\n/* harmony export */   "M7": () => (/* binding */ e),\n/* harmony export */   "NS": () => (/* binding */ i),\n/* harmony export */   "TR": () => (/* binding */ t),\n/* harmony export */   "b7": () => (/* binding */ n),\n/* harmony export */   "g": () => (/* binding */ c),\n/* harmony export */   "kH": () => (/* binding */ r),\n/* harmony export */   "qv": () => (/* binding */ a),\n/* harmony export */   "tf": () => (/* binding */ o)\n/* harmony export */ });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nvar e,t;function r(t){switch(t){case"left":return e.Left;case"right":return e.Right;case"center":case"justify":return e.Center}}function n(e){switch(e){case"top":return t.Top;case"middle":return t.Center;case"baseline":return t.Baseline;case"bottom":return t.Bottom}}function a(r){switch(r){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[e.Right,t.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[e.Center,t.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[e.Left,t.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[e.Right,t.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[e.Center,t.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[e.Left,t.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[e.Right,t.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[e.Center,t.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[e.Left,t.Top];default:return console.debug(`Found invalid placement type ${r}`),[e.Center,t.Center]}}function c(t){switch(t){case e.Right:return-1;case e.Center:return 0;case e.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${t}`),0}}function o(e){switch(e){case t.Top:return 1;case t.Center:return 0;case t.Bottom:case t.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}function s(t){switch(t){case"left":return e.Left;case"right":return e.Right;case"center":case"justify":return e.Center}}function i(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}!function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(e||(e={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(t||(t={}));\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/2d/engine/webgl/alignmentUtils.js?')},89106:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Gq": () => (/* binding */ b),\n/* harmony export */   "a": () => (/* binding */ B),\n/* harmony export */   "dk": () => (/* binding */ x),\n/* harmony export */   "jj": () => (/* binding */ L),\n/* harmony export */   "m2": () => (/* binding */ _),\n/* harmony export */   "mE": () => (/* binding */ U),\n/* harmony export */   "qr": () => (/* binding */ R)\n/* harmony export */ });\n/* unused harmony exports getSizeFlagsMask, hydrateMaterialKey */\n/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(70375);\n/* harmony import */ var _alignmentUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(31090);\n/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(38716);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction r(t,e){const a=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag.SIZE_FIELD_STOPS */ .X.SIZE_FIELD_STOPS|_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag.SIZE_MINMAX_VALUE */ .X.SIZE_MINMAX_VALUE|_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag.SIZE_SCALE_STOPS */ .X.SIZE_SCALE_STOPS|_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag.SIZE_UNIT_VALUE */ .X.SIZE_UNIT_VALUE,r=(t&(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVTarget.FIELD_TARGETS_OUTLINE */ .mf.FIELD_TARGETS_OUTLINE|_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVTarget.MINMAX_TARGETS_OUTLINE */ .mf.MINMAX_TARGETS_OUTLINE|_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVTarget.SCALE_TARGETS_OUTLINE */ .mf.SCALE_TARGETS_OUTLINE|_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVTarget.UNIT_TARGETS_OUTLINE */ .mf.UNIT_TARGETS_OUTLINE))>>>4;return e.isOutline||e.isOutlinedFill?a&r:a&~r}const n=0,v=8,o=7,l=8,h=11,S=11,u=12,d=13,V=14,c=15,p=15,g=16,z=17,y=18,m=19,E=20,T=21,M=22;function L(t,e){switch(t){case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.FILL */ .LW.FILL:return x.from(e);case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.LINE */ .LW.LINE:return B.from(e);case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.MARKER */ .LW.MARKER:return U.from(e);case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.TEXT */ .LW.TEXT:return R.from(e);case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.LABEL */ .LW.LABEL:return b.from(e);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${t}`)}}function F(t){switch(_.load(t).geometryType){case a.MARKER:return new U(t);case a.FILL:return new x(t);case a.LINE:return new B(t);case a.TEXT:return new R(t);case a.LABEL:return new b(t)}}class _{constructor(t){this._data=0,this._data=t}static load(t){const e=this.shared;return e.data=t,e}set data(t){this._data=t}get data(){return this._data}get geometryType(){return this.bits(l,h)}set geometryType(t){this.setBits(t,l,h)}get mapAligned(){return!!this.bit(E)}set mapAligned(t){this.setBit(E,t)}get sdf(){return!!this.bit(S)}set sdf(t){this.setBit(S,t)}get pattern(){return!!this.bit(u)}set pattern(t){this.setBit(u,t)}get textureBinding(){return this.bits(n,v)}set textureBinding(t){this.setBits(t,n,v)}get geometryTypeString(){switch(this.geometryType){case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.FILL */ .LW.FILL:return"fill";case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.MARKER */ .LW.MARKER:return"marker";case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.LINE */ .LW.LINE:return"line";case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.TEXT */ .LW.TEXT:return"text";case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.LABEL */ .LW.LABEL:return"label";default:throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(t,e){const i=1<<t;e?this._data|=i:this._data&=~i}bit(t){return(this._data&1<<t)>>t}setBits(t,e,i){for(let s=e,a=0;s<i;s++,a++)this.setBit(s,0!=(t&1<<a))}bits(t,e){let i=0;for(let s=t,a=0;s<e;s++,a++)i|=this.bit(s)<<a;return i}hasVV(){return!1}setVV(t,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(o&this.textureBinding)}}_.shared=new _(0);const I=t=>class extends t{get vvSizeMinMaxValue(){return 0!==this.bit(g)}set vvSizeMinMaxValue(t){this.setBit(g,t)}get vvSizeScaleStops(){return 0!==this.bit(z)}set vvSizeScaleStops(t){this.setBit(z,t)}get vvSizeFieldStops(){return 0!==this.bit(y)}set vvSizeFieldStops(t){this.setBit(y,t)}get vvSizeUnitValue(){return 0!==this.bit(m)}set vvSizeUnitValue(t){this.setBit(m,t)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(t,e){super.setVV(t,e);const s=r(t,e)&t;this.vvSizeMinMaxValue=!!(s&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag.SIZE_MINMAX_VALUE */ .X.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(s&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag.SIZE_FIELD_STOPS */ .X.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(s&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag.SIZE_UNIT_VALUE */ .X.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(s&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag.SIZE_SCALE_STOPS */ .X.SIZE_SCALE_STOPS)}},O=t=>class extends t{get vvRotation(){return 0!==this.bit(c)}set vvRotation(t){this.setBit(c,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,e){super.setVV(t,e),this.vvRotation=!e.isOutline&&!!(t&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag.ROTATION */ .X.ROTATION)}},A=t=>class extends t{get vvColor(){return 0!==this.bit(d)}set vvColor(t){this.setBit(d,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,e){super.setVV(t,e),this.vvColor=!e.isOutline&&!!(t&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag.COLOR */ .X.COLOR)}},f=t=>class extends t{get vvOpacity(){return 0!==this.bit(V)}set vvOpacity(t){this.setBit(V,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,e){super.setVV(t,e),this.vvOpacity=!e.isOutline&&!!(t&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag.OPACITY */ .X.OPACITY)}};class x extends(A(f(I(_)))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.FILL */ .LW.FILL,e.dotDensity="dot-density"===t.stride.fill,e.simple="simple"===t.stride.fill,e.outlinedFill=t.isOutlinedFill,e.dotDensity||e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,outlinedFill:this.outlinedFill,simple:this.simple,vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}get dotDensity(){return!!this.bit(p)}set dotDensity(t){this.setBit(p,t)}get simple(){return!!this.bit(M)}set simple(t){this.setBit(M,t)}get outlinedFill(){return!!this.bit(T)}set outlinedFill(t){this.setBit(T,t)}}x.shared=new x(0);class U extends(A(f(O(I(_))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.MARKER */ .LW.MARKER,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}U.shared=new U(0);class B extends(A(f(I(_)))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.LINE */ .LW.LINE,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}B.shared=new B(0);class R extends(A(f(O(I(_))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.TEXT */ .LW.TEXT,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}R.shared=new R(0);class b extends(I(_)){static load(t){const e=this.shared;return e.data=t,e}static from(t){const i=this.load(0);return i.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType.LABEL */ .LW.LABEL,i.setVV(t.vvFlags,t),i.mapAligned=(0,_alignmentUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .isMapAligned */ .NS)(t.placement),i.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}b.shared=new b(0);\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js?')},68114:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": () => (/* binding */ i)\n/* harmony export */ });\n/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(38716);\n/* harmony import */ var _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(26204);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass i extends _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z{renderChildren(r){this.attributeView.bindTextures(r.context,!1),this.children.some((e=>e.hasData))&&(super.renderChildren(r),r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase.MAP */ .jx.MAP&&this._renderChildren(r),this.hasHighlight()&&r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase.HIGHLIGHT */ .jx.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js?')},89575:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "GraphicContainer": () => (/* reexport */ GraphicContainer/* default */.Z),\n  "GraphicsView2D": () => (/* reexport */ GraphicsView2D/* default */.Z),\n  "LabelManager": () => (/* reexport */ LabelManager_c),\n  "MagnifierView2D": () => (/* reexport */ MagnifierView2D_E),\n  "MapViewNavigation": () => (/* reexport */ MapViewNavigation_T),\n  "Stage": () => (/* reexport */ Stage_W)\n});\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Error.js\nvar core_Error = __webpack_require__(70375);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/events.js\nvar events = __webpack_require__(49546);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(39994);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/maybe.js\nvar maybe = __webpack_require__(61681);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/scheduling.js\nvar scheduling = __webpack_require__(17262);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/watchUtils.js\nvar watchUtils = __webpack_require__(15071);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/common.js\nvar common = __webpack_require__(93011);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/mat2d.js\nvar mat2d = __webpack_require__(40278);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/mat2df64.js\nvar mat2df64 = __webpack_require__(69114);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/mat3f32.js\nvar mat3f32 = __webpack_require__(19710);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/vec2.js\nvar vec2 = __webpack_require__(55709);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/vec2f64.js\nvar vec2f64 = __webpack_require__(69666);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/symbols/cim/CIMResourceManager.js\nvar CIMResourceManager = __webpack_require__(19849);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/Container.js\nvar Container = __webpack_require__(10530);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js\nvar enums = __webpack_require__(38716);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/brushes.js + 14 modules\nvar brushes = __webpack_require__(56208);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/enums.js\nvar vectorTiles_enums = __webpack_require__(43405);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/sources/shaderRepository.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst shaderRepository_e={background:{"background.frag":"#ifdef PATTERN\\nuniform lowp float u_opacity;\\nuniform lowp sampler2D u_texture;\\nvarying mediump vec4 v_tlbr;\\nvarying mediump vec2 v_tileTextureCoord;\\n#else\\nuniform lowp vec4 u_color;\\n#endif\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main() {\\n#ifdef PATTERN\\nmediump vec2 normalizedTextureCoord = mod(v_tileTextureCoord, 1.0);\\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\\nlowp vec4 color = texture2D(u_texture, samplePos);\\ngl_FragColor = u_opacity * color;\\n#else\\ngl_FragColor = u_color;\\n#endif\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}","background.vert":"precision mediump float;\\nattribute vec2 a_pos;\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform mediump float u_coord_range;\\nuniform mediump float u_depth;\\n#ifdef PATTERN\\nuniform mediump mat3 u_pattern_matrix;\\nvarying mediump vec2 v_tileTextureCoord;\\nuniform mediump vec4 u_tlbr;\\nuniform mediump vec2 u_mosaicSize;\\nvarying mediump vec4 v_tlbr;\\n#endif\\nvoid main() {\\ngl_Position = vec4((u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0)).xy, u_depth, 1.0);\\n#ifdef PATTERN\\nv_tileTextureCoord = (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\\nv_tlbr             = u_tlbr / u_mosaicSize.xyxy;\\n#endif\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\n}"},circle:{"circle.frag":"precision lowp float;\\nvarying lowp vec4 v_color;\\nvarying lowp vec4 v_stroke_color;\\nvarying mediump float v_blur;\\nvarying mediump float v_stroke_width;\\nvarying mediump float v_radius;\\nvarying mediump vec2 v_offset;\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main()\\n{\\nmediump float dist = length(v_offset);\\nmediump float alpha = smoothstep(0.0, -v_blur, dist - 1.0);\\nlowp float color_mix_ratio = v_stroke_width < 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\\ngl_FragColor = alpha * mix(v_color, v_stroke_color, color_mix_ratio);\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}","circle.vert":"precision mediump float;\\nattribute vec2 a_pos;\\n#pragma header\\nvarying lowp vec4 v_color;\\nvarying lowp vec4 v_stroke_color;\\nvarying mediump float v_blur;\\nvarying mediump float v_stroke_width;\\nvarying mediump float v_radius;\\nvarying mediump vec2 v_offset;\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform mediump vec2 u_circleTranslation;\\nuniform mediump float u_depth;\\nuniform mediump float u_antialiasingWidth;\\nvoid main()\\n{\\n#pragma main\\nv_color = color * opacity;\\nv_stroke_color = stroke_color * stroke_opacity;\\nv_stroke_width = stroke_width;\\nv_radius = radius;\\nv_blur = max(blur, u_antialiasingWidth / (radius + stroke_width));\\nmediump vec2 offset = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\\nv_offset = offset;\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos * 0.5, 1.0) + u_displayMat3 * vec3((v_radius + v_stroke_width) * offset + u_circleTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth, 1.0);\\n}"},fill:{"fill.frag":"precision lowp float;\\n#ifdef PATTERN\\nuniform lowp sampler2D u_texture;\\nvarying mediump vec2 v_tileTextureCoord;\\nvarying mediump vec4 v_tlbr;\\n#endif\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvarying lowp vec4 v_color;\\nvec4 mixColors(vec4 color1, vec4 color2) {\\nfloat compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\\nvec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\\nreturn vec4(compositeColor, compositeAlpha);\\n}\\nvoid main()\\n{\\n#ifdef PATTERN\\nmediump vec2 normalizedTextureCoord = fract(v_tileTextureCoord);\\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\\nlowp vec4 color = texture2D(u_texture, samplePos);\\ngl_FragColor = v_color[3] * color;\\n#else\\ngl_FragColor = v_color;\\n#endif\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}","fill.vert":"precision mediump float;\\nattribute vec2 a_pos;\\n#pragma header\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform mediump float u_depth;\\nuniform mediump vec2 u_fillTranslation;\\n#ifdef PATTERN\\n#include <util/util.glsl>\\nuniform mediump vec2 u_mosaicSize;\\nuniform mediump float u_patternFactor;\\nvarying mediump vec2 v_tileTextureCoord;\\nvarying mediump vec4 v_tlbr;\\n#endif\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nvarying lowp vec4 v_color;\\nvoid main()\\n{\\n#pragma main\\nv_color = color * opacity;\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\n#ifdef PATTERN\\nfloat patternWidth = nextPOT(tlbr.z - tlbr.x);\\nfloat patternHeight = nextPOT(tlbr.w - tlbr.y);\\nfloat scaleX = 1.0 / (patternWidth * u_patternFactor);\\nfloat scaleY = 1.0 / (patternHeight * u_patternFactor);\\nmat3 patterMat = mat3(scaleX, 0.0,    0.0,\\n0.0,    -scaleY, 0.0,\\n0.0,    0.0,    1.0);\\nv_tileTextureCoord = (patterMat * vec3(a_pos, 1.0)).xy;\\nv_tlbr             = tlbr / u_mosaicSize.xyxy;\\n#endif\\nvec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(u_fillTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth, 1.0);\\n}"},icon:{"icon.frag":"precision mediump float;\\nuniform lowp sampler2D u_texture;\\n#ifdef SDF\\nuniform lowp vec4 u_color;\\nuniform lowp vec4 u_outlineColor;\\n#endif\\nvarying mediump vec2 v_tex;\\nvarying lowp float v_opacity;\\nvarying mediump vec2 v_size;\\nvarying lowp vec4 v_color;\\n#ifdef SDF\\nvarying mediump flaot v_halo_width;\\n#endif\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\n#include <util/encoding.glsl>\\nvec4 mixColors(vec4 color1, vec4 color2) {\\nfloat compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\\nvec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\\nreturn vec4(compositeColor, compositeAlpha);\\n}\\nvoid main()\\n{\\n#ifdef SDF\\nlowp vec4 fillPixelColor = v_color;\\nfloat d = rgba2float(texture2D(u_texture, v_tex)) - 0.5;\\nconst float softEdgeRatio = 0.248062016;\\nfloat size = max(v_size.x, v_size.y);\\nfloat dist = d * softEdgeRatio * size;\\nfillPixelColor *= clamp(0.5 - dist, 0.0, 1.0);\\nif (v_halo_width > 0.25) {\\nlowp vec4 outlinePixelColor = u_outlineColor;\\nconst float outlineLimitRatio = (16.0 / 86.0);\\nfloat clampedOutlineSize = softEdgeRatio * min(v_halo_width, outlineLimitRatio * max(v_size.x, v_size.y));\\noutlinePixelColor *= clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\\ngl_FragColor = v_opacity * mixColors(fillPixelColor, outlinePixelColor);\\n}\\nelse {\\ngl_FragColor = v_opacity * fillPixelColor;\\n}\\n#else\\nlowp vec4 texColor = texture2D(u_texture, v_tex);\\ngl_FragColor = v_opacity * texColor;\\n#endif\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}","icon.vert":"attribute vec2 a_pos;\\nattribute vec2 a_vertexOffset;\\nattribute vec4 a_texAngleRange;\\nattribute vec4 a_levelInfo;\\nattribute float a_opacityInfo;\\n#pragma header\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nvarying lowp vec4 v_color;\\n#ifdef SDF\\nvarying mediump float v_halo_width;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform highp mat3 u_displayViewMat3;\\nuniform mediump vec2 u_iconTranslation;\\nuniform vec2 u_mosaicSize;\\nuniform mediump float u_depth;\\nuniform mediump float u_mapRotation;\\nuniform mediump float u_level;\\nuniform lowp float u_keepUpright;\\nuniform mediump float u_fadeDuration;\\nvarying mediump vec2 v_tex;\\nvarying lowp float v_opacity;\\nvarying mediump vec2 v_size;\\nconst float C_OFFSET_PRECISION = 1.0 / 8.0;\\nconst float C_256_TO_RAD = 3.14159265359 / 128.0;\\nconst float C_DEG_TO_RAD = 3.14159265359 / 180.0;\\nconst float tileCoordRatio = 1.0 / 8.0;\\nuniform highp float u_time;\\nvoid main()\\n{\\n#pragma main\\nv_color = color;\\nv_opacity = opacity;\\n#ifdef SDF\\nv_halo_width = halo_width;\\n#endif\\nfloat modded = mod(a_opacityInfo, 128.0);\\nfloat targetOpacity = (a_opacityInfo - modded) / 128.0;\\nfloat startOpacity = modded / 127.0;\\nfloat interpolatedOpacity = clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\\nv_opacity *= interpolatedOpacity;\\nmediump float a_angle         = a_levelInfo[1];\\nmediump float a_minLevel      = a_levelInfo[2];\\nmediump float a_maxLevel      = a_levelInfo[3];\\nmediump vec2 a_tex            = a_texAngleRange.xy;\\nmediump float delta_z = 0.0;\\nmediump float rotated = mod(a_angle + u_mapRotation, 256.0);\\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated));\\ndelta_z += 1.0 - step(a_minLevel, u_level);\\ndelta_z += step(a_maxLevel, u_level);\\ndelta_z += step(v_opacity, 0.0);\\nvec2 offset = C_OFFSET_PRECISION * a_vertexOffset;\\nv_size = abs(offset);\\n#ifdef SDF\\noffset = (120.0 / 86.0) * offset;\\n#endif\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayViewMat3 * vec3(size * offset, 0.0) + u_displayMat3 * vec3(u_iconTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth + delta_z, 1.0);\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\nv_tex = a_tex.xy / u_mosaicSize;\\n}"},line:{"line.frag":"precision lowp float;\\nvarying mediump vec2 v_normal;\\nvarying highp float v_accumulatedDistance;\\nvarying mediump float v_lineHalfWidth;\\nvarying lowp vec4 v_color;\\nvarying mediump float v_blur;\\n#if defined (PATTERN) || defined(SDF)\\nvarying mediump vec4 v_tlbr;\\nvarying mediump vec2 v_patternSize;\\nvarying mediump float v_widthRatio;\\nuniform sampler2D u_texture;\\nuniform mediump float u_antialiasing;\\n#endif\\n#ifdef SDF\\n#include <util/encoding.glsl>\\n#endif\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main()\\n{\\nmediump float fragDist = length(v_normal) * v_lineHalfWidth;\\nlowp float alpha = clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\\n#ifdef PATTERN\\nmediump float relativeTexX = fract(v_accumulatedDistance / (v_patternSize.x * v_widthRatio));\\nmediump float relativeTexY = 0.5 + v_normal.y * v_lineHalfWidth / (v_patternSize.y * v_widthRatio);\\nmediump vec2 texCoord = mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\\nlowp vec4 color = texture2D(u_texture, texCoord);\\ngl_FragColor = alpha * v_color[3] * color;\\n#elif defined(SDF)\\nmediump float relativeTexX = fract((v_accumulatedDistance * 0.5) / (v_patternSize.x * v_widthRatio));\\nmediump float relativeTexY =  0.5 + 0.25 * v_normal.y;\\nmediump vec2 texCoord = mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\\nmediump float d = rgba2float(texture2D(u_texture, texCoord)) - 0.5;\\nfloat dist = d * (v_lineHalfWidth + u_antialiasing / 2.0);\\ngl_FragColor = alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\\n#else\\ngl_FragColor = alpha * v_color;\\n#endif\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}","line.vert":"precision mediump float;\\nattribute vec2 a_pos;\\nattribute vec4 a_extrude_offset;\\nattribute vec4 a_dir_normal;\\nattribute vec2 a_accumulatedDistance;\\n#pragma header\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform highp mat3 u_displayViewMat3;\\nuniform mediump float u_zoomFactor;\\nuniform mediump vec2 u_lineTranslation;\\nuniform mediump float u_antialiasing;\\nuniform mediump float u_depth;\\nvarying mediump vec2 v_normal;\\nvarying highp float v_accumulatedDistance;\\nconst float scale = 1.0 / 31.0;\\nconst mediump float tileCoordRatio = 8.0;\\n#if defined (SDF)\\nconst mediump float sdfPatternHalfWidth = 15.5;\\n#endif\\n#if defined (PATTERN) || defined(SDF)\\nuniform mediump vec2 u_mosaicSize;\\nvarying mediump vec4 v_tlbr;\\nvarying mediump vec2 v_patternSize;\\nvarying mediump float v_widthRatio;\\n#endif\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nvarying lowp vec4 v_color;\\nvarying mediump float v_lineHalfWidth;\\nvarying mediump float v_blur;\\nvoid main()\\n{\\n#pragma main\\nv_color = color * opacity;\\nv_blur = blur + u_antialiasing;\\nv_normal = a_dir_normal.zw * scale;\\n#if defined (PATTERN) || defined(SDF)\\nv_tlbr          = tlbr / u_mosaicSize.xyxy;\\nv_patternSize   = vec2(tlbr.z - tlbr.x, tlbr.y - tlbr.w);\\n#if defined (PATTERN)\\nv_widthRatio = width / v_patternSize.y;\\n#else\\nv_widthRatio = width / sdfPatternHalfWidth / 2.0;\\n#endif\\n#endif\\nv_lineHalfWidth = (width + u_antialiasing) * 0.5;\\nmediump vec2 dir = a_dir_normal.xy * scale;\\nmediump vec2 offset_ = a_extrude_offset.zw * scale * offset;\\nmediump vec2 dist = v_lineHalfWidth * scale * a_extrude_offset.xy;\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos + offset_ * tileCoordRatio / u_zoomFactor, 1.0) + u_displayViewMat3 * vec3(dist, 0.0) + u_displayMat3 * vec3(u_lineTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth, 1.0);\\n#if defined (PATTERN) || defined(SDF)\\nv_accumulatedDistance = a_accumulatedDistance.x * u_zoomFactor / tileCoordRatio + dot(dir, dist + offset_);\\n#endif\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\n}"},outline:{"outline.frag":"varying lowp vec4 v_color;\\nvarying mediump vec2 v_normal;\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main()\\n{\\nlowp float dist = abs(v_normal.y);\\nlowp float alpha = smoothstep(1.0, 0.0, dist);\\ngl_FragColor = alpha * v_color;\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}","outline.vert":"attribute vec2 a_pos;\\nattribute vec2 a_offset;\\nattribute vec2 a_xnormal;\\n#pragma header\\nvarying lowp vec4 v_color;\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform mediump vec2 u_fillTranslation;\\nuniform mediump float u_depth;\\nuniform mediump float u_outline_width;\\nvarying lowp vec2 v_normal;\\nconst float scale = 1.0 / 15.0;\\nvoid main()\\n{\\n#pragma main\\nv_color = color * opacity;\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\nv_normal = a_xnormal;\\nmediump vec2 dist = u_outline_width * scale * a_offset;\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(dist + u_fillTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth, 1.0);\\n}"},text:{"text.frag":"uniform lowp sampler2D u_texture;\\nvarying lowp vec2 v_tex;\\nvarying lowp vec4 v_color;\\nvarying mediump float v_edgeWidth;\\nvarying mediump float v_edgeDistance;\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main()\\n{\\nlowp float dist = texture2D(u_texture, v_tex).a;\\nmediump float alpha = smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist);\\ngl_FragColor = alpha * v_color;\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}","text.vert":"attribute vec2 a_pos;\\nattribute vec2 a_vertexOffset;\\nattribute vec4 a_texAngleRange;\\nattribute vec4 a_levelInfo;\\nattribute float a_opacityInfo;\\n#pragma header\\nvarying lowp vec4 v_color;\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform highp mat3 u_displayViewMat3;\\nuniform mediump vec2 u_textTranslation;\\nuniform vec2 u_mosaicSize;\\nuniform mediump float u_depth;\\nuniform mediump float u_mapRotation;\\nuniform mediump float u_level;\\nuniform lowp float u_keepUpright;\\nuniform mediump float u_fadeDuration;\\nvarying lowp vec2 v_tex;\\nconst float offsetPrecision = 1.0 / 8.0;\\nconst mediump float edgePos = 0.75;\\nuniform mediump float u_antialiasingWidth;\\nvarying mediump float v_edgeDistance;\\nvarying mediump float v_edgeWidth;\\nuniform lowp float u_halo;\\nconst float sdfFontScale = 1.0 / 24.0;\\nconst float sdfPixel = 3.0;\\nuniform highp float u_time;\\nvoid main()\\n{\\n#pragma main\\nif (u_halo > 0.5)\\n{\\nv_color = halo_color * opacity;\\nhalo_width *= sdfPixel;\\nhalo_blur *= sdfPixel;\\n}\\nelse\\n{\\nv_color = color * opacity;\\nhalo_width = 0.0;\\nhalo_blur = 0.0;\\n}\\nfloat modded = mod(a_opacityInfo, 128.0);\\nfloat targetOpacity = (a_opacityInfo - modded) / 128.0;\\nfloat startOpacity = modded / 127.0;\\nfloat interpolatedOpacity = clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\\nv_color *= interpolatedOpacity;\\nmediump float a_angle       = a_levelInfo[1];\\nmediump float a_minLevel    = a_levelInfo[2];\\nmediump float a_maxLevel    = a_levelInfo[3];\\nmediump vec2 a_tex          = a_texAngleRange.xy;\\nmediump float a_visMinAngle    = a_texAngleRange.z;\\nmediump float a_visMaxAngle    = a_texAngleRange.w;\\nmediump float delta_z = 0.0;\\nmediump float angle = mod(a_angle + u_mapRotation, 256.0);\\nif (a_visMinAngle < a_visMaxAngle)\\n{\\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) + (1.0 - step(a_visMinAngle, angle)));\\n}\\nelse\\n{\\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) * (1.0 - step(a_visMinAngle, angle)));\\n}\\ndelta_z += 1.0 - step(a_minLevel, u_level);\\ndelta_z += step(a_maxLevel, u_level);\\ndelta_z += step(v_color[3], 0.0);\\nv_tex = a_tex.xy / u_mosaicSize;\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\nv_edgeDistance = edgePos - halo_width / size;\\nv_edgeWidth = (u_antialiasingWidth + halo_blur) / size;\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + sdfFontScale * u_displayViewMat3 * vec3(offsetPrecision * size * a_vertexOffset, 0.0) + u_displayMat3 * vec3(u_textTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth + delta_z, 1.0);\\n}"},util:{"encoding.glsl":"const vec4 rgba2float_factors = vec4(\\n255.0 / (256.0),\\n255.0 / (256.0 * 256.0),\\n255.0 / (256.0 * 256.0 * 256.0),\\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\\n);\\nfloat rgba2float(vec4 rgba) {\\nreturn dot(rgba, rgba2float_factors);\\n}","util.glsl":"float nextPOT(in float x) {\\nreturn pow(2.0, ceil(log2(abs(x))));\\n}"}};\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/ShaderCompiler.js\nvar ShaderCompiler = __webpack_require__(78311);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/sources/resolver.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction o(e){let o=shaderRepository_e;return e.split("/").forEach((r=>{o&&(o=o[r])})),o}const t=new ShaderCompiler/* ShaderCompiler */.B(o);function n(r){return t.resolveIncludes(r)}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/programUtils.js\nvar programUtils = __webpack_require__(73353);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/Programs.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst Programs_t=e=>(0,programUtils/* glslifyDefineMap */.K)({ID:e.id,PATTERN:e.pattern}),a={shaders:r=>({vertexShader:Programs_t(r)+n("background/background.vert"),fragmentShader:Programs_t(r)+n("background/background.frag")})},d=e=>(0,programUtils/* glslifyDefineMap */.K)({ID:e.id}),i={shaders:r=>({vertexShader:d(r)+n("circle/circle.vert"),fragmentShader:d(r)+n("circle/circle.frag")})},Programs_n=e=>(0,programUtils/* glslifyDefineMap */.K)({ID:e.id,PATTERN:e.pattern}),l={shaders:r=>({vertexShader:Programs_n(r)+n("fill/fill.vert"),fragmentShader:Programs_n(r)+n("fill/fill.frag")})},Programs_s=e=>(0,programUtils/* glslifyDefineMap */.K)({ID:e.id}),f={shaders:r=>({vertexShader:Programs_s(r)+n("outline/outline.vert"),fragmentShader:Programs_s(r)+n("outline/outline.frag")})},h=e=>(0,programUtils/* glslifyDefineMap */.K)({ID:e.id,SDF:e.sdf}),Programs_o={shaders:r=>({vertexShader:h(r)+n("icon/icon.vert"),fragmentShader:h(r)+n("icon/icon.frag")})},g=e=>(0,programUtils/* glslifyDefineMap */.K)({ID:e.id,PATTERN:e.pattern,SDF:e.sdf}),c={shaders:r=>({vertexShader:g(r)+n("line/line.vert"),fragmentShader:g(r)+n("line/line.frag")})},S=e=>(0,programUtils/* glslifyDefineMap */.K)({ID:e.id}),v={shaders:r=>({vertexShader:S(r)+n("text/text.vert"),fragmentShader:S(r)+n("text/text.frag")})};\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/VTLMaterialManager.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass VTLMaterialManager_o{constructor(){this._programByKey=new Map}dispose(){this._programByKey.forEach((e=>e.dispose())),this._programByKey.clear()}getMaterialProgram(e,r,t){const a=r.key<<3|this._getMaterialOptionsValue(r.type,t);if(this._programByKey.has(a))return this._programByKey.get(a);const s=this._getProgramTemplate(r.type),{shaders:n}=s,{vertexShader:c,fragmentShader:i}=n(t),o=r.getShaderHeader(),u=r.getShaderMain(),p=c.replace("#pragma header",o).replace("#pragma main",u),g=e.programCache.acquire(p,i,r.getAttributeLocations());return this._programByKey.set(a,g),g}_getMaterialOptionsValue(r,t){switch(r){case vectorTiles_enums/* ShaderProgramType.BACKGROUND */._K.BACKGROUND:{const e=t;return(e.pattern?1:0)<<1|(e.id?1:0)}case vectorTiles_enums/* ShaderProgramType.FILL */._K.FILL:{const e=t;return(e.pattern?1:0)<<1|(e.id?1:0)}case vectorTiles_enums/* ShaderProgramType.OUTLINE */._K.OUTLINE:return t.id?1:0;case vectorTiles_enums/* ShaderProgramType.LINE */._K.LINE:{const e=t;return(e.sdf?1:0)<<2|(e.pattern?1:0)<<1|(e.id?1:0)}case vectorTiles_enums/* ShaderProgramType.ICON */._K.ICON:{const e=t;return(e.sdf?1:0)<<1|(e.id?1:0)}case vectorTiles_enums/* ShaderProgramType.CIRCLE */._K.CIRCLE:return t.id?1:0;case vectorTiles_enums/* ShaderProgramType.TEXT */._K.TEXT:return t.id?1:0;default:return 0}}_getProgramTemplate(o){switch(o){case vectorTiles_enums/* ShaderProgramType.BACKGROUND */._K.BACKGROUND:return a;case vectorTiles_enums/* ShaderProgramType.CIRCLE */._K.CIRCLE:return i;case vectorTiles_enums/* ShaderProgramType.FILL */._K.FILL:return l;case vectorTiles_enums/* ShaderProgramType.ICON */._K.ICON:return Programs_o;case vectorTiles_enums/* ShaderProgramType.LINE */._K.LINE:return c;case vectorTiles_enums/* ShaderProgramType.OUTLINE */._K.OUTLINE:return f;case vectorTiles_enums/* ShaderProgramType.TEXT */._K.TEXT:return v;default:return null}}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/DefaultVertexAttributeLayouts.js\nvar DefaultVertexAttributeLayouts = __webpack_require__(27894);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/resolver.js + 1 modules\nvar resolver = __webpack_require__(74580);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/BitBlitPrograms.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst e={shaders:{vertexShader:(0,resolver/* resolveIncludes */.w)("bitBlit/bitBlit.vert"),fragmentShader:(0,resolver/* resolveIncludes */.w)("bitBlit/bitBlit.frag")},attributes:new Map([["a_pos",0],["a_tex",1]])};\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/BufferObject.js\nvar BufferObject = __webpack_require__(78951);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/enums.js\nvar webgl_enums = __webpack_require__(91907);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/ProgramTemplate.js\nvar ProgramTemplate = __webpack_require__(84172);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/VertexArrayObject.js\nvar VertexArrayObject = __webpack_require__(29620);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/BitBlitRenderer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass _{constructor(){this._initialized=!1}dispose(){this._program=(0,maybe/* disposeMaybe */.O3)(this._program),this._vertexArrayObject=(0,maybe/* disposeMaybe */.O3)(this._vertexArrayObject)}render(r,t,e,i){r&&(this._initialized||this._initialize(r),r.setBlendFunctionSeparate(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA,webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA),r.bindVAO(this._vertexArrayObject),r.useProgram(this._program),t.setSamplingMode(e),r.bindTexture(t,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",i),r.drawArrays(webgl_enums/* PrimitiveType.TRIANGLE_STRIP */.MX.TRIANGLE_STRIP,0,4),r.bindTexture(null,0),r.bindVAO())}_initialize(r){if(this._initialized)return!0;const s=(0,ProgramTemplate/* createProgram */.H)(r,e);if(!s)return!1;const o=new Int8Array(16);o[0]=-1,o[1]=-1,o[2]=0,o[3]=0,o[4]=1,o[5]=-1,o[6]=1,o[7]=0,o[8]=-1,o[9]=1,o[10]=0,o[11]=1,o[12]=1,o[13]=1,o[14]=1,o[15]=1;const _=e.attributes,p=new VertexArrayObject/* VertexArrayObject */.U(r,_,DefaultVertexAttributeLayouts/* PosTex2b */.As,{geometry:BufferObject/* BufferObject.createVertex */.f.createVertex(r,webgl_enums/* Usage.STATIC_DRAW */.l1.STATIC_DRAW,o)});return this._program=s,this._vertexArrayObject=p,this._initialized=!0,!0}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/MaterialPrograms.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst MaterialPrograms_e=r=>{let t="";t+=r[0].toUpperCase();for(let e=1;e<r.length;e++){const s=r[e];s===s.toUpperCase()?(t+="_",t+=s):t+=s.toUpperCase()}return t},MaterialPrograms_s=r=>{const s={};for(const t in r){s[MaterialPrograms_e(t)]=r[t]}return (0,programUtils/* glslifyDefineMap */.K)(s)},MaterialPrograms_o=(t,e,o,n)=>{const a=t+t.substring(t.lastIndexOf("/")),p=e+e.substring(e.lastIndexOf("/"));return{attributes:o,shaders:{vertexShader:MaterialPrograms_s(n)+(0,resolver/* resolveIncludes */.w)(`${a}.vert`),fragmentShader:MaterialPrograms_s(n)+(0,resolver/* resolveIncludes */.w)(`${p}.frag`)}}};\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/MaterialManager.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst MaterialManager_a=r=>r===enums/* WGLDrawPhase.HITTEST */.jx.HITTEST||r===enums/* WGLDrawPhase.LABEL_ALPHA */.jx.LABEL_ALPHA,MaterialManager_s=r=>(MaterialManager_a(r)?1:0)|(r===enums/* WGLDrawPhase.HIGHLIGHT */.jx.HIGHLIGHT?2:0),MaterialManager_o=({rendererInfo:e,drawPhase:t},a,o,i)=>`${a.getVariationHash()}-${i.join(".")}-${MaterialManager_s(t)}-${e.getVariationHash()}-${(0,maybe/* isSome */.pC)(o)&&o.join(".")}`,MaterialManager_i=(t,s,o,i)=>{const h=i.reduce(((r,e)=>({...r,[e]:t.context.driverTest[e]})),{}),n={...s.getVariation(),...t.rendererInfo.getVariation(),highlight:t.drawPhase===enums/* WGLDrawPhase.HIGHLIGHT */.jx.HIGHLIGHT,id:MaterialManager_a(t.drawPhase),...h};if((0,maybe/* isSome */.pC)(o))for(const r of o)n[r]=!0;return n};class MaterialManager_h{constructor(r){this._rctx=r,this._programByKey=new Map}dispose(){this._programByKey.forEach((r=>r.dispose())),this._programByKey.clear()}getProgram(r,e,a=[],s=[]){const o=e.vsPath+"."+e.fsPath+JSON.stringify(a)+s.join(".");if(this._programByKey.has(o))return this._programByKey.get(o);const i=s.reduce(((e,t)=>({...e,[t]:r.context.driverTest[t]})),{}),h={...a.map((r=>"string"==typeof r?{name:r,value:!0}:r)).reduce(((r,e)=>({...r,[e.name]:e.value})),{}),...i},{vsPath:n,fsPath:g,attributes:m}=e,c=MaterialPrograms_o(n,g,m,h),y=this._rctx.programCache.acquire(c.shaders.vertexShader,c.shaders.fragmentShader,c.attributes);if(!y)throw new Error("Unable to get program for key: ${key}");return this._programByKey.set(o,y),y}getMaterialProgram(r,e,a,s,h,n=["ignoresSamplerPrecision"]){const g=MaterialManager_o(r,e,h,n);if(this._programByKey.has(g))return this._programByKey.get(g);const m=MaterialManager_i(r,e,h,n),c=MaterialPrograms_o(a,a,s,m),y=this._rctx.programCache.acquire(c.shaders.vertexShader,c.shaders.fragmentShader,c.attributes);if(!y)throw new Error("Unable to get program for key: ${key}");return this._programByKey.set(g,y),y}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/config.js\nvar config = __webpack_require__(51366);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/request.js\nvar request = __webpack_require__(66341);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/BidiText.js\nvar BidiText = __webpack_require__(89060);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(13802);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/promiseUtils.js\nvar promiseUtils = __webpack_require__(78668);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/screenUtils.js\nvar screenUtils = __webpack_require__(95550);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/vec2f32.js\nvar vec2f32 = __webpack_require__(55542);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/symbols/cim/Rasterizer.js\nvar Rasterizer = __webpack_require__(556);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js\nvar definitions = __webpack_require__(14266);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/fontUtils.js\nvar fontUtils = __webpack_require__(70734);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js\nvar Rect = __webpack_require__(4655);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/RectangleBinPack.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass RectangleBinPack_t{constructor(t,e){this._width=0,this._height=0,this._free=[],this._width=t,this._height=e,this._free.push(new Rect/* default */.Z(0,0,t,e))}get width(){return this._width}get height(){return this._height}allocate(t,e){if(t>this._width||e>this._height)return new Rect/* default */.Z;let i=null,s=-1;for(let h=0;h<this._free.length;++h){const r=this._free[h];t<=r.width&&e<=r.height&&(null===i||r.y<=i.y&&r.x<=i.x)&&(i=r,s=h)}return null===i?new Rect/* default */.Z:(this._free.splice(s,1),i.width<i.height?(i.width>t&&this._free.push(new Rect/* default */.Z(i.x+t,i.y,i.width-t,e)),i.height>e&&this._free.push(new Rect/* default */.Z(i.x,i.y+e,i.width,i.height-e))):(i.width>t&&this._free.push(new Rect/* default */.Z(i.x+t,i.y,i.width-t,i.height)),i.height>e&&this._free.push(new Rect/* default */.Z(i.x,i.y+e,t,i.height-e))),new Rect/* default */.Z(i.x,i.y,t,e))}release(h){for(let t=0;t<this._free.length;++t){const e=this._free[t];if(e.y===h.y&&e.height===h.height&&e.x+e.width===h.x)e.width+=h.width;else if(e.x===h.x&&e.width===h.width&&e.y+e.height===h.y)e.height+=h.height;else if(h.y===e.y&&h.height===e.height&&h.x+h.width===e.x)e.x=h.x,e.width+=h.width;else{if(h.x!==e.x||h.width!==e.width||h.y+h.height!==e.y)continue;e.y=h.y,e.height+=h.height}this._free.splice(t,1),this.release(h)}this._free.push(h)}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/Texture.js\nvar Texture = __webpack_require__(43487);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/GlyphMosaic.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst GlyphMosaic_n=256,GlyphMosaic_c=t=>Math.floor(t/256);function GlyphMosaic_o(t){const e=new Set;for(const i of t)e.add(GlyphMosaic_c(i));return e}function GlyphMosaic_l(t,i,h){return t.has(i)||t.set(i,h().then((()=>{t.delete(i)})).catch((h=>{t.delete(i),(0,promiseUtils/* throwIfNotAbortError */.H9)(h)}))),t.get(i)}const GlyphMosaic_g=t=>({rect:new Rect/* default */.Z(0,0,0,0),page:0,metrics:{left:0,width:0,height:0,advance:0,top:0},code:t,sdf:!0});class GlyphMosaic_{constructor(t,e,i){this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphCache={},this._textures=[],this._rangePromises=new Map,this.width=t,this.height=e,this._glyphSource=i,this._binPack=new RectangleBinPack_t(t-4,e-4),this._glyphData.push(new Uint8Array(t*e)),this._dirties.push(!0),this._textures.push(null),this._initDecorationGlyph()}dispose(){this._binPack=null;for(const t of this._textures)t&&t.dispose();this._textures.length=0,this._glyphData.length=0}_initDecorationGlyph(){const t=[117,149,181,207,207,181,149,117],e=[];for(let h=0;h<t.length;h++){const i=t[h];for(let t=0;t<11;t++)e.push(i)}const i={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(e)};this._recordGlyph(i)}async getGlyphItems(t,e,i){const h=this._getGlyphCache(t);return await this._fetchRanges(t,e,i),e.map((e=>this._getMosaicItem(h,t,e)))}bind(t,e,i,h){const s=this._getTexture(t,i);s.setSamplingMode(e),this._dirties[i]&&(s.setData(this._glyphData[i]),this._dirties[i]=!1),t.bindTexture(s,h)}_getGlyphCache(t){return this._glyphCache[t]||(this._glyphCache[t]={}),this._glyphCache[t]}_getTexture(t,e){return this._textures[e]||(this._textures[e]=new Texture/* Texture */.x(t,{pixelFormat:webgl_enums/* PixelFormat.ALPHA */.VI.ALPHA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,width:this.width,height:this.height},new Uint8Array(this.width*this.height))),this._textures[e]}_invalidate(){this._dirties[this._currentPage]=!0}async _fetchRanges(t,e,i){const h=GlyphMosaic_o(e),s=[];h.forEach((e=>{s.push(this._fetchRange(t,e,i))})),await Promise.all(s)}async _fetchRange(t,e,i){if(e>GlyphMosaic_n)return null;const h=t+e;return GlyphMosaic_l(this._rangePromises,h,(()=>this._glyphSource.getRange(t,e,i)))}_getMosaicItem(t,e,i){if(!t[i]){const h=this._glyphSource.getGlyph(e,i);if(!h||!h.metrics)return GlyphMosaic_g(i);const s=this._recordGlyph(h),r=this._currentPage,a=h.metrics;t[i]={rect:s,page:r,metrics:a,code:i,sdf:!0},this._invalidate()}return t[i]}_recordGlyph(e){const s=e.metrics;let r;if(0===s.width)r=new Rect/* default */.Z(0,0,0,0);else{const i=3,a=s.width+2*i,n=s.height+2*i;r=this._binPack.allocate(a,n),r.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(null),this._initDecorationGlyph(),this._binPack=new RectangleBinPack_t(this.width-4,this.height-4),r=this._binPack.allocate(a,n));const c=this._glyphData[this._currentPage],o=e.bitmap;let l,g;if(o)for(let t=0;t<n;t++){l=a*t,g=this.width*(r.y+t)+r.x;for(let t=0;t<a;t++)c[g+t]=o[l+t]}(0,has/* default */.Z)("esri-glyph-debug")&&this._showDebugPage(c)}return r}_showDebugPage(t){const e=document.createElement("canvas"),i=e.getContext("2d"),h=new ImageData(this.width,this.height),s=h.data;e.width=this.width,e.height=this.height,e.style.border="1px solid black";for(let r=0;r<t.length;++r)s[4*r+0]=t[r],s[4*r+1]=0,s[4*r+2]=0,s[4*r+3]=255;i.putImageData(h,0,0),document.body.appendChild(e)}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/pbf.js\nvar pbf = __webpack_require__(76480);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/GlyphSource.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass GlyphSource_s{constructor(t){for(this._metrics=[],this._bitmaps=[];t.next();)switch(t.tag()){case 1:{const e=t.getMessage();for(;e.next();)switch(e.tag()){case 3:{const t=e.getMessage();let s,a,r,n,i,c,g;for(;t.next();)switch(t.tag()){case 1:s=t.getUInt32();break;case 2:a=t.getBytes();break;case 3:r=t.getUInt32();break;case 4:n=t.getUInt32();break;case 5:i=t.getSInt32();break;case 6:c=t.getSInt32();break;case 7:g=t.getUInt32();break;default:t.skip()}t.release(),s&&(this._metrics[s]={width:r,height:n,left:i,top:c,advance:g},this._bitmaps[s]=a);break}default:e.skip()}e.release();break}default:t.skip()}}getMetrics(t){return this._metrics[t]}getBitmap(t){return this._bitmaps[t]}}class GlyphSource_a{constructor(){this._ranges=[]}getRange(t){return this._ranges[t]}addRange(t,e){this._ranges[t]=e}}class GlyphSource_r{constructor(t){this._glyphInfo={},this._baseURL=t}getRange(a,r,n){const i=this._getFontStack(a);if(i.getRange(r))return Promise.resolve();const c=256*r,g=c+255,o=this._baseURL.replace("{fontstack}",a).replace("{range}",c+"-"+g);return (0,request["default"])(o,{responseType:"array-buffer",...n}).then((t=>{i.addRange(r,new GlyphSource_s(new pbf/* default */.Z(new Uint8Array(t.data),new DataView(t.data))))}))}getGlyph(t,e){const s=this._getFontStack(t);if(!s)return;const a=Math.floor(e/256);if(a>256)return;const r=s.getRange(a);return r?{metrics:r.getMetrics(e),bitmap:r.getBitmap(e)}:void 0}_getFontStack(t){let e=this._glyphInfo[t];return e||(e=this._glyphInfo[t]=new GlyphSource_a),e}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/floatRGBA.js\nvar floatRGBA = __webpack_require__(73534);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/SDFConverter.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst SDFConverter_i=1e20;class SDFConverter_r{constructor(t){this.size=t;const s=document.createElement("canvas");s.width=s.height=t,this._context=s.getContext("2d"),this._gridOuter=new Float64Array(t*t),this._gridInner=new Float64Array(t*t),this._f=new Float64Array(t),this._d=new Float64Array(t),this._z=new Float64Array(t+1),this._v=new Int16Array(t)}dispose(){this._context=this._gridOuter=this._gridInner=this._f=this._d=this._z=this._v=null,this._svg&&(document.body.removeChild(this._svg),this._svg=null)}draw(r,h,n=31){this._initSVG();const o=this.createSVGString(r);return new Promise(((r,a)=>{const d=new Image;d.src="data:image/svg+xml; charset=utf8, "+encodeURIComponent(o),d.onload=()=>{d.onload=null,this._context.clearRect(0,0,this.size,this.size),this._context.drawImage(d,0,0,this.size,this.size);const s=this._context.getImageData(0,0,this.size,this.size),e=new Uint8Array(this.size*this.size*4);for(let t=0;t<this.size*this.size;t++){const e=s.data[4*t+3]/255;this._gridOuter[t]=1===e?0:0===e?SDFConverter_i:Math.max(0,.5-e)**2,this._gridInner[t]=1===e?SDFConverter_i:0===e?0:Math.max(0,e-.5)**2}this._edt(this._gridOuter,this.size,this.size),this._edt(this._gridInner,this.size,this.size);for(let i=0;i<this.size*this.size;i++){const s=this._gridOuter[i]-this._gridInner[i];(0,floatRGBA/* packFloatRGBA */.I)(.5-s/(2*n),e,4*i)}r(e)};const l=h&&h.signal;l&&(0,promiseUtils/* onAbort */.fu)(l,(()=>a((0,promiseUtils/* createAbortError */.zE)())))}))}_initSVG(){if(!this._svg){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("style","position: absolute;"),t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("role","presentation"),document.body.appendChild(t),this._svg=t}}createSVGString(t){this._initSVG();const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d",t),this._svg.appendChild(s);const e=s.getBBox(),i=e.width/e.height,r=this.size/2;let h,n,o,a;if(i>1){n=h=r/e.width;const t=r*(1/i);o=this.size/4,a=r-t/2}else{h=n=r/e.height;o=r-r*i/2,a=this.size/4}const d=-e.x*h+o,l=-e.y*n+a;s.setAttribute("style",`transform: matrix(${h}, 0, 0, ${n}, ${d}, ${l})`);const _=`<svg style="fill:red;" height="${this.size}" width="${this.size}" xmlns="http://www.w3.org/2000/svg">${this._svg.innerHTML}</svg>`;return this._svg.removeChild(s),_}_edt(t,s,e){const i=this._f,r=this._d,h=this._v,n=this._z;for(let o=0;o<s;o++){for(let r=0;r<e;r++)i[r]=t[r*s+o];this._edt1d(i,r,h,n,e);for(let i=0;i<e;i++)t[i*s+o]=r[i]}for(let o=0;o<e;o++){for(let e=0;e<s;e++)i[e]=t[o*s+e];this._edt1d(i,r,h,n,s);for(let e=0;e<s;e++)t[o*s+e]=Math.sqrt(r[e])}}_edt1d(t,s,e,r,h){e[0]=0,r[0]=-SDFConverter_i,r[1]=+SDFConverter_i;for(let n=1,o=0;n<h;n++){let s=(t[n]+n*n-(t[e[o]]+e[o]*e[o]))/(2*n-2*e[o]);for(;s<=r[o];)o--,s=(t[n]+n*n-(t[e[o]]+e[o]*e[o]))/(2*n-2*e[o]);o++,e[o]=n,r[o]=s,r[o+1]=+SDFConverter_i}for(let i=0,n=0;i<h;i++){for(;r[n+1]<i;)n++;s[i]=(i-e[n])*(i-e[n])+t[e[n]]}}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/GeometryUtils.js\nvar GeometryUtils = __webpack_require__(71200);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/SpriteMosaic.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction m(t){return t&&"static"===t.type}class p{constructor(t,e,i,s=0){this._mosaicPages=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects=new Map,this._spriteCopyQueue=[],this.pixelRatio=1,(e<=0||i<=0)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!"),this._pageWidth=e,this._pageHeight=i,this._requestRender=t,s>0&&(this._maxItemSize=s),this.pixelRatio=window.devicePixelRatio||1,this._binPack=new RectangleBinPack_t(this._pageWidth,this._pageHeight);const a=Math.floor(this._pageWidth),o=Math.floor(this._pageHeight);this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(a*o)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0})}getWidth(t){return t>=this._mosaicPages.length?-1:this._mosaicPages[t].size[0]}getHeight(t){return t>=this._mosaicPages.length?-1:this._mosaicPages[t].size[1]}getPageTexture(t){return t<this._mosaicPages.length?this._mosaicPages[t].texture:null}has(t){return this._mosaicRects.has(t)}get itemCount(){return this._mosaicRects.size}getSpriteItem(t){return this._mosaicRects.get(t)}addSpriteItem(t,e,i,s,r,o){if(this._mosaicRects.has(t))return this._mosaicRects.get(t);let h,c,n;if(m(i))[h,c,n]=this._allocateImage(e[0],e[1]);else{h=new Rect/* default */.Z(0,0,e[0],e[1]),c=this._mosaicPages.length;const t=void 0;this._mosaicPages.push({mosaicsData:i,size:e,dirty:!0,texture:t})}if(h.width<=0||h.height<=0)return null;const g={rect:h,width:e[0],height:e[1],sdf:r,simplePattern:o,pixelRatio:1,page:c};return this._mosaicRects.set(t,g),m(i)&&this._copy({rect:h,spriteSize:e,spriteData:i.data,page:c,pageSize:n,repeat:s,sdf:r}),g}hasItemsToProcess(){return 0!==this._spriteCopyQueue.length}processNextItem(){const t=this._spriteCopyQueue.pop();t&&this._copy(t)}getSpriteItems(t){const e={};for(const i of t)e[i]=this.getSpriteItem(i);return e}getMosaicItemPosition(t){const e=this.getSpriteItem(t),s=e&&e.rect;if(!s)return null;s.width=e.width,s.height=e.height;const a=e.width,r=e.height,o=definitions/* SPRITE_PADDING */.fL,h=this._mosaicPages[e.page];return{size:[e.width,e.height],tl:[(s.x+o)/h[0],(s.y+o)/h[1]],br:[(s.x+o+a)/h[0],(s.y+o+r)/h[1]],page:e.page}}bind(t,i,s=0,a=0){const r=this._mosaicPages[s],o=r.mosaicsData;let h=r.texture;if(h||(h=SpriteMosaic_(t,o,r.size),r.texture=h),h.setSamplingMode(i),m(o))t.bindTexture(h,a),r.dirty&&(h.setData(new Uint8Array(o.data.buffer)),h.generateMipmap());else{const i=o.data,s=i.bindFrame(t,h,a);(0,maybe/* isSome */.pC)(this._requestRender)&&s&&i.frameCount>0&&this._requestRender.requestRender(),i.bindFrame(t,h,a)}r.dirty=!1}static _copyBits(t,e,i,s,a,r,o,h,c,n,g){let m=s*e+i,p=h*r+o;if(g){p-=r;for(let o=-1;o<=n;o++,m=((o+n)%n+s)*e+i,p+=r)for(let e=-1;e<=c;e++)a[p+e]=t[m+(e+c)%c]}else for(let _=0;_<n;_++){for(let e=0;e<c;e++)a[p+e]=t[m+e];m+=e,p+=r}}_copy(e){if(e.page>=this._mosaicPages.length)return;const s=this._mosaicPages[e.page],a=s.mosaicsData;if(!m(s.mosaicsData))throw new core_Error/* default */.Z("mapview-invalid-resource","unsuitable data type!");const r=e.spriteData,o=a.data;o&&r||console.error("Source or target images are uninitialized!"),p._copyBits(r,e.spriteSize[0],0,0,o,e.pageSize[0],e.rect.x+definitions/* SPRITE_PADDING */.fL,e.rect.y+definitions/* SPRITE_PADDING */.fL,e.spriteSize[0],e.spriteSize[1],e.repeat),s.dirty=!0}_allocateImage(t,e){t+=2*definitions/* SPRITE_PADDING */.fL,e+=2*definitions/* SPRITE_PADDING */.fL;const o=Math.max(t,e);if(this._maxItemSize&&this._maxItemSize<o){const i=2**Math.ceil((0,GeometryUtils/* log2 */.k3)(t)),r=2**Math.ceil((0,GeometryUtils/* log2 */.k3)(e)),o=new Rect/* default */.Z(0,0,t,e);return this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(i*r)},size:[i,r],dirty:!0,texture:void 0}),[o,this._mosaicPages.length-1,[i,r]]}const h=this._binPack.allocate(t,e);if(h.width<=0){const i=this._mosaicPages[this._currentPage];return!i.dirty&&m(i.mosaicsData)&&(i.mosaicsData.data=null),this._currentPage=this._mosaicPages.length,this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(this._pageWidth*this._pageHeight)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0}),this._binPack=new RectangleBinPack_t(this._pageWidth,this._pageHeight),this._allocateImage(t,e)}return[h,this._currentPage,[this._pageWidth,this._pageHeight]]}dispose(){this._binPack=null;for(const t of this._mosaicPages){const e=t.texture;e&&e.dispose();const i=t.mosaicsData;if(!m(i)){i.data.pause()}}this._mosaicPages=null,this._mosaicRects.clear()}}function SpriteMosaic_(t,e,i){return m(e)?new Texture/* Texture */.x(t,{pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,width:i[0],height:i[1]},new Uint8Array(e.data.buffer)):new Texture/* Texture */.x(t,{pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,width:i[0],height:i[1]},null)}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js + 1 modules\nvar Utils = __webpack_require__(15875);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/apng.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst r=new Uint32Array(256);for(let b=0;b<256;b++){let t=b;for(let e=0;e<8;e++)t=0!=(1&t)?3988292384^t>>>1:t>>>1;r[b]=t}function apng_a(t,e=0,a=t.length-e){let i=-1;for(let s=e,n=e+a;s<n;s++)i=i>>>8^r[255&(i^t[s])];return-1^i}const apng_i=new core_Error/* default */.Z("Not a PNG"),apng_s=new core_Error/* default */.Z("Not an animated PNG"),apng_n=new Uint8Array([137,80,78,71,13,10,26,10]);function apng_h(t){const e=t.constructor===Uint8Array?t:new Uint8Array(t);return!apng_n.some(((t,r)=>t!==e[r]))}function u(t){let e,r;return apng_p(new Uint8Array(t),((t,a,i)=>{const s=new DataView(a.buffer);"IHDR"===t&&(e=s.getUint32(i+8),r=s.getUint32(i+12))})),[e,r]}function apng_l(t){const e=new Uint8Array(t);if(!apng_h(e))return!1;let r=!1;return apng_p(e,(t=>!(r="acTL"===t))),r}class apng_o{constructor(){this.width=0,this.height=0,this.numPlays=0,this.playTime=0,this.frames=[],this.paused=!1,this.playing=!1,this.playSpeed=1,this.currentFrameNumber=0,this._lastUsedFrame=-1}static async create(r,a){const i=new apng_o;try{await i._load(r,a)}catch(s){if(!(0,promiseUtils/* isAbortError */.D_)(s))return new core_Error/* default */.Z("invalid-resource",`Could not load PNG: ${s.message}`)}return i}play(){this.playing||(this.paused=!1,this.playing=!0,this._play())}pause(){this.paused=!0,this.playing=!1,clearTimeout(this.timerID)}togglePlay(){this.paused||!this.playing?this.play():this.pause()}bindFrame(t,e,r){t.bindTexture(e,r);const a=this.frameChanged();if(!a)return!1;const i=this.currentFrame,s=i.frameData,n=e.descriptor;return(i.left||i.top||i.width!==n.width||i.height!==n.height)&&e.setData(null),e.updateData(0,i.left,i.top,i.width,i.height,s),this.updateUsedFrame(),a}frameChanged(){return this._lastUsedFrame!==this.currentFrameNumber}updateUsedFrame(){this._lastUsedFrame=this.currentFrameNumber}async _load(r,a){try{const t=apng_d(this,r);if(t!==this)return t;this._resizeCanvas=document.createElement("canvas"),this._resizeCanvas.width=this.width,this._resizeCanvas.height=this.height,await Promise.all(this.frames.map((t=>t.createImage(this._resizeCanvas))))}catch(i){if(!(0,promiseUtils/* isAbortError */.D_)(i))return new core_Error/* default */.Z("invalid-resource","Could not parse PNG")}this.play()}_play(){let t,e;if(0===this.playSpeed)return void this.pause();this.playSpeed<0?(this.currentFrameNumber-=1,this.currentFrameNumber<0&&(this.currentFrameNumber=this.frames.length-1),e=this.currentFrameNumber,e-=1,e<0&&(e=this.frames.length-1),t=1*-this.frames[e].delay/this.playSpeed):(this.currentFrameNumber+=1,this.currentFrameNumber%=this.frames.length,t=1*this.frames[this.currentFrameNumber].delay/this.playSpeed);const r=this.frames[this.currentFrameNumber];this.currentFrame={frameData:r.imageData,top:r.top,left:r.left,width:r.width,height:r.height},this.timerID=window.setTimeout((()=>this._play()),t)}}class apng_c{constructor(){this.left=0,this.top=0,this.width=0,this.height=0,this.delay=0,this.disposeOp=0,this.blendOp=0,this.data=null,this.imageData=null}async createImage(t){if(null===this.imageData)return new Promise(((e,r)=>{const a=URL.createObjectURL(this.data),i=document.createElement("img");i.onload=()=>{URL.revokeObjectURL(a),this.imageData=apng_m(i,t),e()},i.onerror=()=>{URL.revokeObjectURL(a),this.imageData=null,r(new Error("Image creation error"))},i.src=a}))}}function apng_m(t,e){e.width=t.width,e.height=t.height;const r=e.getContext("2d");r.drawImage(t,0,0,t.width,t.height);const a=r.getImageData(0,0,t.width,t.height),i=new Uint8Array(a.data);let s;for(let n=0;n<i.length;n+=4)s=i[n+3]/255,i[n]=i[n]*s,i[n+1]=i[n+1]*s,i[n+2]=i[n+2]*s;return new ImageData(new Uint8ClampedArray(i.buffer),t.width,t.height)}function apng_d(t,e){const r=new Uint8Array(e);if(apng_n.some(((t,e)=>t!==r[e])))return apng_i;let a=!1;if(apng_p(r,(t=>!(a="acTL"===t))),!a)return apng_s;const h=[],u=[];let l=null,o=null,m=0;if(apng_p(r,((e,r,a,i)=>{const s=new DataView(r.buffer);switch(e){case"IHDR":l=r.subarray(a+8,a+8+i),t.width=s.getUint32(a+8),t.height=s.getUint32(a+12);break;case"acTL":t.numPlays=s.getUint32(a+8+4);break;case"fcTL":{o&&(t.frames.push(o),m++),o=new apng_c,o.width=s.getUint32(a+8+4),o.height=s.getUint32(a+8+8),o.left=s.getUint32(a+8+12),o.top=s.getUint32(a+8+16);const e=s.getUint16(a+8+20);let r=s.getUint16(a+8+22);0===r&&(r=100),o.delay=1e3*e/r,o.delay<=10&&(o.delay=100),t.playTime+=o.delay,o.disposeOp=s.getUint8(a+8+24),o.blendOp=s.getUint8(a+8+25),o.dataParts=[],0===m&&2===o.disposeOp&&(o.disposeOp=1);break}case"fdAT":o&&o.dataParts.push(r.subarray(a+8+4,a+8+i));break;case"IDAT":o&&o.dataParts.push(r.subarray(a+8,a+8+i));break;case"IEND":u.push(w(r,a,12+i));break;default:h.push(w(r,a,12+i))}})),0===t.frames.length)return apng_s;t.frameCount=t.frames.length;const d=new Blob(h),g=new Blob(u);return t.frames.forEach((t=>{let e=[];e.push(apng_n),l.set(U(t.width),0),l.set(U(t.height),4),e.push(y("IHDR",l)),e.push(d),t.dataParts.forEach((t=>e.push(y("IDAT",t)))),e.push(g),t.data=new Blob(e,{type:"image/png"}),delete t.dataParts,e=null})),t}function apng_p(t,e){const r=new DataView(t.buffer);let a,i,s,n=8;do{i=r.getUint32(n),a=apng_g(t,n+4,4),s=e(a,t,n,i),n+=12+i}while(!1!==s&&"IEND"!==a&&n<t.length)}function apng_g(t,e,r){const a=Array.prototype.slice.call(t.subarray(e,e+r));return String.fromCharCode.apply(String,a)}function apng_f(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function w(t,e,r){const a=new Uint8Array(r);return a.set(t.subarray(e,e+r)),a}function y(t,e){const r=t.length+e.length,i=new Uint8Array(r+8),s=new DataView(i.buffer);s.setUint32(0,e.length),i.set(apng_f(t),4),i.set(e,8);const n=apng_a(i,4,r);return s.setUint32(r+4,n),i}function U(t){return new Uint8Array([t>>>24&255,t>>>16&255,t>>>8&255,255&t])}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/gif.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst gif_a={GCExt:249,COMMENT:254,APPExt:255,UNKNOWN:1,IMAGE:44,EOF:59,EXT:33};function gif_r(t){if(!t||0===t.byteLength)return!1;const e=t.constructor===Uint8Array?t:new Uint8Array(t);return 71===e[0]&&73===e[1]&&70===e[2]&&56===e[3]}function gif_h(t){const e=new Uint8ClampedArray(t);let s=6;return[e[s++]+(e[s++]<<8),e[s++]+(e[s++]<<8)]}function gif_o(t){if(!t||0===t.byteLength)return!1;const e=new Uint8Array(t);if(!gif_r(e))return!1;let s=0;for(let i=0,a=e.length-9;i<a;++i)if(0===e[i]&&33===e[i+1]&&249===e[i+2]&&4===e[i+3]&&0===e[i+8]&&(44===e[i+9]||33===e[i+9])&&(s++,s>1))return!0;return!1}class gif_n{constructor(){this.paused=!1,this.playing=!1,this.waitTillDone=!0,this.loading=!1,this.firstFrameOnly=!1,this.frames=[],this.comment="",this.length=0,this.currentFrameNumber=0,this.frameCount=0,this.playSpeed=1,this.lastFrame=null,this.playOnLoad=!0,this.complete=!1,this.interlaceOffsets=[0,4,2,1],this.interlaceSteps=[8,8,4,2],this._lastUsedFrame=-1}static async create(s,i){const a=new gif_n;try{await a._load(s,i)}catch(r){if(!(0,promiseUtils/* isAbortError */.D_)(r))return new core_Error/* default */.Z("invalid-resource",`Could not load PNG: ${r.message}`)}return a}play(){this.playing||(this.paused=!1,this.playing=!0,this._play())}pause(){this.paused=!0,this.playing=!1,clearTimeout(this.timerID)}togglePlay(){this.paused||!this.playing?this.play():this.pause()}bindFrame(t,e,s){t.bindTexture(e,s);const i=this.frameChanged();if(i){const t=this.currentFrame,s=t.frameData;e.updateData(0,0,0,t.width,t.height,s),this.updateUsedFrame()}return i}seekFrame(t){clearTimeout(this.timerID),this.currentFrameNumber=t%this.frames.length,this.playing?this._play():this._setCurrentFrame(this.currentFrameNumber)}seek(t){clearTimeout(this.timerID),t<0&&(t=0),t*=1e3,t%=this.length;let e=0;for(;t>this.frames[e].time+this.frames[e].delay&&e<this.frames.length;)e+=1;this.currentFrameNumber=e,this.playing?this._play():this._setCurrentFrame(this.currentFrameNumber)}frameChanged(){return this._lastUsedFrame!==this.currentFrameNumber}updateUsedFrame(){this._lastUsedFrame=this.currentFrameNumber}async _load(s,i){try{this.loading=!0,await this._parse(s,i),this.loading=!1,this.play()}catch(a){if(!(0,promiseUtils/* isAbortError */.D_)(a))return new core_Error/* default */.Z("invalid-resource","Could not parse gif!")}}_parse(t,e){const s=new gif_l(t);s.pos+=6,this.width=s.data[s.pos++]+(s.data[s.pos++]<<8),this.height=s.data[s.pos++]+(s.data[s.pos++]<<8);const i=s.data[s.pos++];return this.globalColourCount=1<<1+(7&i),s.pos++,s.pos++,128&i&&(this.globalColourTable=this._parseColourTable(this.globalColourCount,s)),new Promise(((t,i)=>{setTimeout((()=>this._parseBlock(s,t,i,e)),0)}))}async _parseBlock(t,e,r,h){if(h&&h.signal&&(0,promiseUtils/* isAborted */.Hc)(h.signal))return void r((0,promiseUtils/* createAbortError */.zE)());const o=t.data[t.pos++];if(o===gif_a.IMAGE){if(this._parseImg(t),this.firstFrameOnly)return this._finishedLoading(),void e()}else{if(o===gif_a.EOF)return this._finishedLoading(),void e();this._parseExt(t)}"function"==typeof this.onprogress&&this.onprogress({bytesRead:t.pos,totalBytes:t.data.length,frame:this.frames.length}),setTimeout((()=>this._parseBlock(t,e,r,h)),0)}_parseColourTable(t,e){const s=[];for(let i=0;i<t;i++)s.push([e.data[e.pos++],e.data[e.pos++],e.data[e.pos++]]);return s}_parseImg(t){const e=t=>{const e=this.pixelBufSize/t;this.interlacedBufSize!==this.pixelBufSize&&(this.deinterlaceBuf=new Uint8Array(this.pixelBufSize),this.interlacedBufSize=this.pixelBufSize);let s=0;for(let i=0;i<4;i++)for(let a=this.interlaceOffsets[i];a<e;a+=this.interlaceSteps[i])this.deinterlaceBuf.set(this.pixelBuf.subarray(s,s+t),a*t),s+=t},s={};this.frames.push(s),s.disposalMethod=this.disposalMethod,s.time=this.length,s.delay=10*this.delayTime,this.length+=s.delay,this.transparencyGiven?s.transparencyIndex=this.transparencyIndex:s.transparencyIndex=void 0,s.leftPos=t.data[t.pos++]+(t.data[t.pos++]<<8),s.topPos=t.data[t.pos++]+(t.data[t.pos++]<<8),s.width=t.data[t.pos++]+(t.data[t.pos++]<<8),s.height=t.data[t.pos++]+(t.data[t.pos++]<<8);const i=t.data[t.pos++];s.localColourTableFlag=!!(128&i),s.localColourTableFlag&&(s.localColourTable=this._parseColourTable(1<<1+(7&i),t)),this.pixelBufSize!==s.width*s.height&&(this.pixelBuf=new Uint8Array(s.width*s.height),this.pixelBufSize=s.width*s.height),this._lzwDecode(t.data[t.pos++],t.readSubBlocksB()),64&i?(s.interlaced=!0,e(s.width)):s.interlaced=!1,this._processFrame(s)}_lzwDecode(t,e){let s,i,a,r,h,o,n,l,d;a=i=0;let p=[];const u=1<<t,m=u+1;for(r=t+1,d=!1;!d;){for(o=h,h=0,s=0;s<r;s++)e[a>>3]&1<<(7&a)&&(h|=1<<s),a++;if(h===u){for(p=[],r=t+1,s=0;s<u;s++)p[s]=[s];p[u]=[],p[m]=null}else{if(h===m)return void(d=!0);for(h>=p.length?p.push(p[o].concat(p[o][0])):o!==u&&p.push(p[o].concat(p[h][0])),n=p[h],l=n.length,s=0;s<l;s++)this.pixelBuf[i++]=n[s];p.length===1<<r&&r<12&&r++}}}_processFrame(t){t.image=document.createElement("canvas"),t.image.width=this.width,t.image.height=this.height,t.ctx=t.image.getContext("2d");const e=t.localColourTableFlag?t.localColourTable:this.globalColourTable;null===this.lastFrame&&(this.lastFrame=t);const s=2===this.lastFrame.disposalMethod||3===this.lastFrame.disposalMethod;s||t.ctx.drawImage(this.lastFrame.image,0,0,this.width,this.height);const i=t.ctx.getImageData(t.leftPos,t.topPos,t.width,t.height),a=t.transparencyIndex,r=i.data,h=t.interlaced?this.deinterlaceBuf:this.pixelBuf,o=h.length;let n,l,d=0;for(let p=0;p<o;p++)n=h[p],l=e[n],a!==n?(r[d++]=l[0],r[d++]=l[1],r[d++]=l[2],r[d++]=255):s?(r[d+3]=0,d+=4):d+=4;t.ctx.putImageData(i,t.leftPos,t.topPos),this.lastFrame=t}_parseExt(t){const e=t.data[t.pos++];e===gif_a.GCExt?this._parseGCExt(t):e===gif_a.COMMENT?this.comment+=t.readSubBlocks():e===gif_a.APPExt?this._parseAppExt(t):(e===gif_a.UNKNOWN&&(t.pos+=13),t.readSubBlocks())}_parseAppExt(t){t.pos+=1,"NETSCAPE"===t.getString(8)?t.pos+=8:(t.pos+=3,t.readSubBlocks())}_parseGCExt(t){t.pos++;const e=t.data[t.pos++];this.disposalMethod=(28&e)>>2,this.transparencyGiven=!!(1&e),this.delayTime=t.data[t.pos++]+(t.data[t.pos++]<<8),this.transparencyIndex=t.data[t.pos++],t.pos++}_finishedLoading(){this.loading=!1,this.frameCount=this.frames.length,this.lastFrame=null,this.complete=!0,this.disposalMethod=void 0,this.transparencyGiven=void 0,this.delayTime=void 0,this.transparencyIndex=void 0,this.waitTillDone=void 0,this.pixelBuf=void 0,this.deinterlaceBuf=void 0,this.pixelBufSize=void 0,this.deinterlaceBuf=void 0,this.currentFrameNumber=0,this.frames.length>0&&this._setCurrentFrame(0),this.playOnLoad&&this.play()}_play(){let t,e;0!==this.playSpeed?(this.playSpeed<0?(this.currentFrameNumber-=1,this.currentFrameNumber<0&&(this.currentFrameNumber=this.frames.length-1),e=this.currentFrameNumber,e-=1,e<0&&(e=this.frames.length-1),t=1*-this.frames[e].delay/this.playSpeed):(this.currentFrameNumber+=1,this.currentFrameNumber%=this.frames.length,t=1*this.frames[this.currentFrameNumber].delay/this.playSpeed),this._setCurrentFrame(this.currentFrameNumber),this.timerID=window.setTimeout((()=>this._play()),t)):this.pause()}_setCurrentFrame(t){const e=this.frames[t];this.currentFrame={frameData:e.image,top:0,left:0,width:this.width,height:this.height}}}class gif_l{constructor(t){this.pos=0,this.data=new Uint8ClampedArray(t),this.len=this.data.length}getString(t){let e="";for(;t--;)e+=String.fromCharCode(this.data[this.pos++]);return e}readSubBlocks(){let t,e,s="";do{for(e=t=this.data[this.pos++];e--;)s+=String.fromCharCode(this.data[this.pos++])}while(0!==t&&this.pos<this.len);return s}readSubBlocksB(){let t,e;const s=[];do{for(e=t=this.data[this.pos++];e--;)s.push(this.data[this.pos++])}while(0!==t&&this.pos<this.len);return s}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/util/Result.js\nvar Result = __webpack_require__(16068);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/util/symbolUtils.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction symbolUtils_e(e){switch(e.type){case"esriSMS":return`${e.style}.${e.path}`;case"esriSLS":return`${e.style}.${e.cap}`;case"esriSFS":return`${e.style}`;case"esriPFS":case"esriPMS":return e.imageData?`${e.imageData}${e.width}${e.height}`:`${e.url}${e.width}${e.height}`;default:return"mosaicHash"in e?e.mosaicHash:JSON.stringify(e)}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/support/QueueProcessor.js\nvar QueueProcessor = __webpack_require__(99542);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/TextureManager.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst k=(0,vec2f32.c)(),O="arial-unicode-ms-regular",Q=126,H=Logger/* default.getLogger */.Z.getLogger("esri.views.2d.engine.webgl.TextureManager");async function V(e,i){const r=(0,Utils/* getUrl */.Gr)(e);let n;const o=";base64,";if(r.includes(o)){const e=r.indexOf(o)+o.length,t=r.substring(e),i=atob(t),s=new Uint8Array(i.length);for(let r=0;r<i.length;r++)s[r]=i.charCodeAt(r);n=s.buffer}else try{const{data:e}=await (0,request["default"])(r,{responseType:"array-buffer",...i});n=e}catch(a){if(!(0,promiseUtils/* isAbortError */.D_)(a))return new core_Error/* default */.Z("mapview-invalid-resource",`Could not fetch requested resource at ${r}`)}return n}function Y(e,t){const i=Math.round((0,screenUtils/* pt2px */.F2)(t)*window.devicePixelRatio),s=i>=128?2:4;return Math.min(e,i*s)}const D=(e,t,i)=>H.error(new core_Error/* default */.Z(e,t,i));class J{constructor(e,t,i){this.mosaicType=e,this.page=t,this.sdf=i}static fromMosaic(e,t){return new J(e,t.page,t.sdf)}}class W{constructor(i,r){this.resourceManager=r,this._invalidFontsMap=new Map,this._sdfConverter=new SDFConverter_r(Q),this._bindingInfos=new Array,this._hashToBindingIndex=new Map,this._ongoingRasterizations=new Map,this._imageRequestQueue=new QueueProcessor/* QueueProcessor */.e({concurrency:10,process:async(e,i)=>{(0,promiseUtils/* throwIfAborted */.k_)(i);try{return await (0,request["default"])(e,{responseType:"image",signal:i})}catch(r){if(!(0,promiseUtils/* isAbortError */.D_)(r))throw new core_Error/* default */.Z("mapview-invalid-resource",`Could not fetch requested resource at ${e}`,r);throw r}}}),this._spriteMosaic=new p(i,2048,2048,500),this._glyphSource=new GlyphSource_r(`${config/* default.fontsUrl */.Z.fontsUrl}/{fontstack}/{range}.pbf`),this._glyphMosaic=new GlyphMosaic_(1024,1024,this._glyphSource),this._rasterizer=new Rasterizer/* default */.Z(r)}dispose(){this._spriteMosaic.dispose(),this._glyphMosaic.dispose(),this._rasterizer.dispose(),this._sdfConverter.dispose(),this._spriteMosaic=null,this._glyphMosaic=null,this._sdfConverter=null,this._hashToBindingIndex.clear(),this._hashToBindingIndex=null,this._bindingInfos=null,this._ongoingRasterizations.clear(),this._ongoingRasterizations=null,this._imageRequestQueue.clear(),this._imageRequestQueue=null}get sprites(){return this._spriteMosaic}get glyphs(){return this._glyphMosaic}async rasterizeItem(e,t,i,s){if((0,maybe/* isNone */.Wi)(e))return D("mapview-null-resource","Unable to rasterize null resource"),null;switch(e.type){case"text":case"esriTS":{const t=await this._rasterizeText(e,i,s);return t.forEach((e=>this._setTextureBinding(enums/* MosaicType.GLYPH */.Un.GLYPH,e))),{glyphMosaicItems:t}}default:{if((0,Utils/* is3D */.Ll)(e))return D("mapview-invalid-type",`MapView does not support symbol type: ${e.type}`,e),null;const i=await this._rasterizeSpriteSymbol(e,t,s);return (0,Result.ok)(i)&&i&&this._setTextureBinding(enums/* MosaicType.SPRITE */.Un.SPRITE,i),{spriteMosaicItem:i}}}}bindTextures(e,t,i,s=!1){if(0===i.textureBinding)return;const r=this._bindingInfos[i.textureBinding-1],n=r.page,o=s?webgl_enums/* TextureSamplingMode.LINEAR_MIPMAP_LINEAR */.cw.LINEAR_MIPMAP_LINEAR:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR;switch(r.mosaicType){case enums/* MosaicType.SPRITE */.Un.SPRITE:{const i=this.sprites.getWidth(n),s=this.sprites.getHeight(n),r=(0,vec2.s)(k,i,s);return this._spriteMosaic.bind(e,o,n,definitions/* TEXTURE_BINDING_SPRITE_ATLAS */.D3),t.setUniform1i("u_texture",definitions/* TEXTURE_BINDING_SPRITE_ATLAS */.D3),void t.setUniform2fv("u_mosaicSize",r)}case enums/* MosaicType.GLYPH */.Un.GLYPH:{const i=this.glyphs.width,s=this.glyphs.height,r=(0,vec2.s)(k,i,s);return this._glyphMosaic.bind(e,o,n,definitions/* TEXTURE_BINDING_GLYPH_ATLAS */.Al),t.setUniform1i("u_texture",definitions/* TEXTURE_BINDING_GLYPH_ATLAS */.Al),void t.setUniform2fv("u_mosaicSize",r)}default:H.error("mapview-texture-manager",`Cannot handle unknown type ${r.mosaicType}`)}}_hashMosaic(e,t){return 1|e<<1|(t.sdf?1:0)<<2|t.page<<3}_setTextureBinding(e,t){const i=this._hashMosaic(e,t);if(!this._hashToBindingIndex.has(i)){const s=J.fromMosaic(e,t),r=this._bindingInfos.length+1;this._hashToBindingIndex.set(i,r),this._bindingInfos.push(s)}t.textureBinding=this._hashToBindingIndex.get(i)}async _rasterizeText(e,t,s){let r,n;if("cim"in e){const t=e;r=t.fontName,n=t.text}else{const t=e;r=(0,fontUtils/* getFullyQualifiedFontName */.Yc)(t.font),n=t.text}const o=this._invalidFontsMap.has(r),a=t||(0,Utils/* charCodes */.Jq)((0,BidiText/* bidiText */.E)(n)[0]);try{return await this._glyphMosaic.getGlyphItems(o?O:r,a,s)}catch(h){return D("mapview-invalid-resource",`Couldn\'t find font ${r}. Falling back to Arial Unicode MS Regular`),this._invalidFontsMap.set(r,!0),this._glyphMosaic.getGlyphItems(O,a,s)}}async _rasterizeSpriteSymbol(e,t,i){if((0,Utils/* isSimple */.Gg)(e))return null;const r=symbolUtils_e(e);if(this._spriteMosaic.has(r))return this._spriteMosaic.getSpriteItem(r);if((0,Utils/* isSVGResource */.sG)(e)||(0,Utils/* isImageResource */.HX)(e))return this._handleAsyncResource(r,e,i);const n=1,o=this._rasterizer.rasterizeJSONResource(e,n);if(o){const{size:t,image:i,sdf:s,simplePattern:n}=o;return this._addItemToMosaic(r,t,{type:"static",data:i},(0,Utils/* shouldRepeat */.js)(e),s,n)}return new core_Error/* default */.Z("TextureManager","unrecognized or null rasterized image")}async _handleAsyncResource(e,t,i){if(this._ongoingRasterizations.has(e))return this._ongoingRasterizations.get(e);let s;s=(0,Utils/* isSVGResource */.sG)(t)?this._handleSVG(t,e,i):this._handleImage(t,e,i),this._ongoingRasterizations.set(e,s);try{await s,this._ongoingRasterizations.delete(e)}catch{this._ongoingRasterizations.delete(e)}return s}async _handleSVG(e,t,i){const s=[Q,Q],r=await this._sdfConverter.draw(e.path,i);return this._addItemToMosaic(t,s,{type:"static",data:new Uint32Array(r.buffer)},!1,!0,!0)}async _handleGIFOrPNG(e,t,i){const r=await V(e,i);if((0,Result.ok)(r)){const o=gif_r(r),a=apng_h(r);if(!o&&!a)return new core_Error/* default */.Z("mapview-invalid-resource","Image data is neither GIF nor PNG!");let c;try{o&&gif_o(r)?c=await gif_n.create(r,i):a&&apng_l(r)&&(c=await apng_o.create(r,i))}catch(n){if(!(0,promiseUtils/* isAbortError */.D_)(n))return new core_Error/* default */.Z("mapview-invalid-resource","Could not fetch requested resource!")}if(c&&(0,Result.ok)(c))return this._addItemToMosaic(t,[c.width,c.height],{type:"animated",data:c},(0,Utils/* shouldRepeat */.js)(e),!1,!1);const u=new Blob([r],{type:o?"image/gif":"image/png"}),d=await this._imageFromBlob(u);if(d&&d instanceof HTMLImageElement){let i=d.width,s=d.height;"esriPMS"===e.type&&(i=Math.round(Y(d.width,(0,Utils/* getPMSResourceSize */.Ub)(e))),s=Math.round(d.height*(i/d.width)));const r="cim"in e?e.cim.colorSubstitutions:void 0,{size:n,sdf:o,image:a}=this._rasterizer.rasterizeImageResource(i,s,d,r);return this._addItemToMosaic(t,n,{type:"static",data:a},(0,Utils/* shouldRepeat */.js)(e),o,!1)}}return new core_Error/* default */.Z("mapview-invalid-resource","Could not handle resource!")}async _handleImage(e,t,i){if((0,Utils/* isGIF */.DQ)(e)||(0,Utils/* isPNG */.iw)(e))return this._handleGIFOrPNG(e,t,i);const r=(0,Utils/* getUrl */.Gr)(e);try{let s;const a=this.resourceManager.getResource(r);if((0,maybe/* isSome */.pC)(a))s=a;else{const{data:e}=await this._imageRequestQueue.push(r,{...i});s=e}if((0,Utils/* isSVGImage */.TB)(r))if("width"in e&&"height"in e)s.width=(0,screenUtils/* pt2px */.F2)(e.width),s.height=(0,screenUtils/* pt2px */.F2)(e.height);else if("cim"in e){var n;const t=e.cim;s.width=(0,screenUtils/* pt2px */.F2)(null!=(n=t.width)?n:t.scaleX*t.size),s.height=(0,screenUtils/* pt2px */.F2)(t.size)}if(!s.width||!s.height)return null;let h=s.width,u=s.height;"esriPMS"===e.type&&(h=Math.round(Y(s.width,(0,Utils/* getPMSResourceSize */.Ub)(e))),u=Math.round(s.height*(h/s.width)));const d="cim"in e?e.cim.colorSubstitutions:void 0,{size:l,sdf:m,image:g}=this._rasterizer.rasterizeImageResource(h,u,s,d);return this._addItemToMosaic(t,l,{type:"static",data:g},(0,Utils/* shouldRepeat */.js)(e),m,!1)}catch(a){if(!(0,promiseUtils/* isAbortError */.D_)(a))return new core_Error/* default */.Z("mapview-invalid-resource",`Could not fetch requested resource at ${r}. ${a.message}`)}}async _imageFromBlob(e){const t=window.URL.createObjectURL(e);try{const{data:e}=await this._imageRequestQueue.push(t);return window.URL.revokeObjectURL(t),e}catch(i){if(window.URL.revokeObjectURL(t),!(0,promiseUtils/* isAbortError */.D_)(i))return new core_Error/* default */.Z("mapview-invalid-resource",`Could not fetch requested resource at ${t}`);throw i}}_addItemToMosaic(e,t,i,s,r,n){return this._spriteMosaic.addSpriteItem(e,t,i,s,r,n)}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/VertexStream.js\nvar VertexStream = __webpack_require__(86424);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/Effect.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass Effect_t{constructor(){this.name=this.constructor.name}createOptions(t,r){return null}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/AnimationEffect.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass AnimationEffect_o extends Effect_t{constructor(){super(...arguments),this.defines=[],this._desc={vsPath:"fx/integrate",fsPath:"fx/integrate",attributes:new Map([["a_position",0]])}}dispose(){this._quad&&this._quad.dispose()}bind(){}unbind(){}draw(r,i){if(!i.size)return;const{context:a,renderingOptions:o}=r;this._quad||(this._quad=new VertexStream/* default */.Z(a,[0,0,1,0,0,1,1,1]));const n=a.getBoundFramebufferObject(),{x:u,y:m,width:d,height:f}=a.getViewport();i.bindTextures(a);const c=i.getBlock(definitions/* ATTRIBUTE_DATA_ANIMATION */.xl);if((0,maybe/* isNone */.Wi)(c))return;const _=c.getFBO(a),l=c.getFBO(a,1);a.setViewport(0,0,i.size,i.size),this._computeDelta(r,l,o.labelsAnimationTime),this._updateAnimationState(r,l,_),a.bindFramebuffer(n),a.setViewport(u,m,d,f)}_computeDelta(e,t,s){const{context:a,painter:o,displayLevel:n}=e,u=o.materialManager.getProgram(e,this._desc,["delta"]);a.bindFramebuffer(t),a.setClearColor(0,0,0,0),a.clear(a.gl.COLOR_BUFFER_BIT),a.useProgram(u),u.setUniform1i("u_maskTexture",definitions/* TEXTURE_BINDING_ATTRIBUTE_DATA_0 */.iJ),u.setUniform1i("u_sourceTexture",definitions/* TEXTURE_BINDING_ATTRIBUTE_DATA_1 */.nM),u.setUniform1f("u_timeDelta",e.deltaTime),u.setUniform1f("u_animationTime",s),u.setUniform1f("u_zoomLevel",Math.round(10*n)),this._quad.draw()}_updateAnimationState(e,t,r){const{context:i,painter:s}=e,a=s.materialManager.getProgram(e,this._desc,["update"]);i.bindTexture(t.colorTexture,1),i.useProgram(a),a.setUniform1i("u_sourceTexture",1),i.bindFramebuffer(r),i.setClearColor(0,0,0,0),i.clear(i.gl.COLOR_BUFFER_BIT),this._quad.draw()}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/BlendPrograms.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst BlendPrograms_r=e=>e.replace("-","_").toUpperCase(),BlendPrograms_t=e=>`#define ${BlendPrograms_r(e)}\\n`;function BlendPrograms_n(r){return{attributes:new Map([["a_pos",0],["a_tex",1]]),shaders:{vertexShader:BlendPrograms_t(r)+(0,resolver/* resolveIncludes */.w)("blend/blend.vert"),fragmentShader:BlendPrograms_t(r)+(0,resolver/* resolveIncludes */.w)("blend/blend.frag")}}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/BlendEffect.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst BlendEffect_l=Logger/* default.getLogger */.Z.getLogger("esri.views.2d.engine.webgl.effects.blendEffects.BlendEffect");class BlendEffect_{constructor(){this._size=[0,0]}dispose(e){this._backBufferTexture=(0,maybe/* disposeMaybe */.O3)(this._backBufferTexture),this._quad=(0,maybe/* disposeMaybe */.O3)(this._quad)}draw(r,t,s,a,d){const{context:u,drawPhase:f}=r;if(this._setupShader(u),a&&"normal"!==a&&f!==enums/* WGLDrawPhase.LABEL */.jx.LABEL)return void this._drawBlended(r,t,s,a,d);const c=BlendPrograms_n("normal"),m=u.programCache.acquire(c.shaders.vertexShader,c.shaders.fragmentShader,c.attributes);if(!m)return void BlendEffect_l.error(new core_Error/* default */.Z("mapview-BlendEffect",\'Error creating shader program for blend mode "normal"\'));u.useProgram(m),t.setSamplingMode(s),u.bindTexture(t,0),m.setUniform1i("u_layerTexture",0),m.setUniform1f("u_opacity",d),u.setBlendingEnabled(!0),u.setBlendFunction(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA);const h=this._quad;h.draw(),h.unbind(),m.dispose()}_drawBlended(r,t,i,a,d){const{context:u,state:f,pixelRatio:c,inFadeTransition:m}=r,{size:h}=f,_=u.getBoundFramebufferObject();let p,b;if((0,maybe/* isSome */.pC)(_)){const e=_.descriptor;p=e.width,b=e.height}else p=Math.round(c*h[0]),b=Math.round(c*h[1]);this._createOrResizeTexture(r,p,b);const g=this._backBufferTexture;_.copyToTexture(0,0,p,b,0,0,g),u.setStencilTestEnabled(!1),u.setStencilWriteMask(0),u.setBlendingEnabled(!0),u.setDepthTestEnabled(!1),u.setDepthWriteEnabled(!1);const x=BlendPrograms_n(a),E=u.programCache.acquire(x.shaders.vertexShader,x.shaders.fragmentShader,x.attributes);if(!E)return void BlendEffect_l.error(new core_Error/* default */.Z("mapview-BlendEffect",`Error creating shader program for blend mode ${a}`));u.useProgram(E),g.setSamplingMode(i),u.bindTexture(g,0),E.setUniform1i("u_backbufferTexture",0),t.setSamplingMode(i),u.bindTexture(t,1),E.setUniform1i("u_layerTexture",1),E.setUniform1f("u_opacity",d),E.setUniform1f("u_inFadeOpacity",m?1:0),u.setBlendFunction(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ZERO */.zi.ZERO);const T=this._quad;T.draw(),T.unbind(),E.dispose(),u.setBlendFunction(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA)}_setupShader(e){this._quad||(this._quad=new VertexStream/* default */.Z(e,[-1,-1,1,-1,-1,1,1,1]))}_createOrResizeTexture(e,r,t){const{context:s}=e;null!==this._backBufferTexture&&r===this._size[0]&&t===this._size[1]||(this._backBufferTexture?this._backBufferTexture.resize(r,t):this._backBufferTexture=new Texture/* Texture */.x(s,{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,internalFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR,flipped:!1,width:r,height:t}),this._size[0]=r,this._size[1]=t)}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/FeatureEffect.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass FeatureEffect_r extends Effect_t{constructor(e){super(),this.name=this.constructor.name,this.defines=[e]}dispose(){}bind({context:e,painter:t}){this._prev=e.getBoundFramebufferObject();const{width:r,height:s}=e.getViewport(),o=t.getFbos(r,s).effect0;e.bindFramebuffer(o),e.setColorMask(!0,!0,!0,!0),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT)}unbind(){}draw(e,r){const{context:s,painter:o}=e,n=o.getPostProcessingEffects(r),c=s.getBoundFramebufferObject();for(const{postProcessingEffect:t,effect:f}of n)t.draw(e,c,f);s.bindFramebuffer(this._prev),s.setStencilTestEnabled(!1),o.blitTexture(s,c.colorTexture,webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST),s.setStencilTestEnabled(!0)}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/parameters.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst parameters_o=1,parameters_t=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],parameters_i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],parameters_n=256,parameters_e={outlineWidth:.7,outerHaloWidth:.7,innerHaloWidth:.7,outlinePosition:0};\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightGradient.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst HighlightGradient_u=Logger/* default.getLogger */.Z.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function C(o,i){i.fillColor[0]=o.color.r/255,i.fillColor[1]=o.color.g/255,i.fillColor[2]=o.color.b/255,i.fillColor[3]=o.color.a,o.haloColor?(i.outlineColor[0]=o.haloColor.r/255,i.outlineColor[1]=o.haloColor.g/255,i.outlineColor[2]=o.haloColor.b/255,i.outlineColor[3]=o.haloColor.a):(i.outlineColor[0]=i.fillColor[0],i.outlineColor[1]=i.fillColor[1],i.outlineColor[2]=i.fillColor[2],i.outlineColor[3]=i.fillColor[3]),i.fillColor[3]*=o.fillOpacity,i.outlineColor[3]*=o.haloOpacity,i.fillColor[0]*=i.fillColor[3],i.fillColor[1]*=i.fillColor[3],i.fillColor[2]*=i.fillColor[3],i.outlineColor[0]*=i.outlineColor[3],i.outlineColor[1]*=i.outlineColor[3],i.outlineColor[2]*=i.outlineColor[3],i.outlineWidth=parameters_e.outlineWidth,i.outerHaloWidth=parameters_e.outerHaloWidth,i.innerHaloWidth=parameters_e.innerHaloWidth,i.outlinePosition=parameters_e.outlinePosition}const HighlightGradient_g=[0,0,0,0];class HighlightGradient_f{constructor(){this._convertedHighlightOptions={fillColor:[.2*.75,.6*.75,.675,.75],outlineColor:[.2*.9,.54,.81,.9],outlinePosition:parameters_e.outlinePosition,outlineWidth:parameters_e.outlineWidth,innerHaloWidth:parameters_e.innerHaloWidth,outerHaloWidth:parameters_e.outerHaloWidth},this.shadeTexChanged=!0,this.texelData=new Uint8Array(4*parameters_n),this.minMaxDistance=[0,0]}setHighlightOptions(o){const i=this._convertedHighlightOptions;C(o,i);const t=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,r=i.outlinePosition-i.outlineWidth/2,n=i.outlinePosition+i.outlineWidth/2,h=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,a=Math.sqrt(Math.PI/2)*parameters_o,s=Math.abs(t)>a?Math.round(10*(Math.abs(t)-a))/10:0,d=Math.abs(h)>a?Math.round(10*(Math.abs(h)-a))/10:0;let f;s&&!d?HighlightGradient_u.error("The outer rim of the highlight is "+s+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!s&&d?HighlightGradient_u.error("The inner rim of the highlight is "+d+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):s&&d&&HighlightGradient_u.error("The highlight is "+Math.max(s,d)+"px away from the edge of the feature; consider reducing some width values.");const c=[void 0,void 0,void 0,void 0];function m(o,i,t){c[0]=(1-t)*o[0]+t*i[0],c[1]=(1-t)*o[1]+t*i[1],c[2]=(1-t)*o[2]+t*i[2],c[3]=(1-t)*o[3]+t*i[3]}const{texelData:p}=this;for(let l=0;l<parameters_n;++l)f=t+l/(parameters_n-1)*(h-t),f<t?(c[4*l+0]=0,c[4*l+1]=0,c[4*l+2]=0,c[4*l+3]=0):f<r?m(HighlightGradient_g,i.outlineColor,(f-t)/(r-t)):f<n?[c[0],c[1],c[2],c[3]]=i.outlineColor:f<h?m(i.outlineColor,i.fillColor,(f-n)/(h-n)):[c[4*l+0],c[4*l+1],c[4*l+2],c[4*l+3]]=i.fillColor,p[4*l+0]=255*c[0],p[4*l+1]=255*c[1],p[4*l+2]=255*c[2],p[4*l+3]=255*c[3];this.minMaxDistance[0]=t,this.minMaxDistance[1]=h,this.shadeTexChanged=!0}applyHighlightOptions(o,t){this.shadeTex||(this.shadeTex=new Texture/* Texture */.x(o,{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,width:parameters_n,height:1,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR})),this.shadeTexChanged&&(this.shadeTex.updateData(0,0,0,parameters_n,1,this.texelData),this.shadeTexChanged=!1),o.bindTexture(this.shadeTex,definitions/* TEXTURE_BINDING_HIGHLIGHT_1 */.Jw),t.setUniform2fv("u_minMaxDistance",this.minMaxDistance)}destroy(){this.shadeTex&&(this.shadeTex.dispose(),this.shadeTex=null)}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/HighlightPrograms.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst HighlightPrograms_t={shaders:{vertexShader:(0,resolver/* resolveIncludes */.w)("highlight/textured.vert"),fragmentShader:(0,resolver/* resolveIncludes */.w)("highlight/highlight.frag")},attributes:new Map([["a_position",0],["a_texcoord",1]])},HighlightPrograms_r={shaders:{vertexShader:(0,resolver/* resolveIncludes */.w)("highlight/textured.vert"),fragmentShader:(0,resolver/* resolveIncludes */.w)("highlight/blur.frag")},attributes:new Map([["a_position",0],["a_texcoord",1]])};\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js\nvar VertexElementDescriptor = __webpack_require__(41163);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightRenderer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass HighlightRenderer_c{constructor(){this._width=void 0,this._height=void 0,this._resources=null}dispose(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),this._resources.blurProgram.dispose(),this._resources=null)}preBlur(e,i){e.bindTexture(i,definitions/* TEXTURE_BINDING_HIGHLIGHT_0 */.QU),e.useProgram(this._resources.blurProgram),this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]),this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",parameters_t),e.bindVAO(this._resources.quadVAO),e.drawArrays(webgl_enums/* PrimitiveType.TRIANGLE_STRIP */.MX.TRIANGLE_STRIP,0,4),e.bindVAO()}finalBlur(e,s){e.bindTexture(s,definitions/* TEXTURE_BINDING_HIGHLIGHT_0 */.QU),e.useProgram(this._resources.blurProgram),this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]),this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",parameters_i),e.bindVAO(this._resources.quadVAO),e.drawArrays(webgl_enums/* PrimitiveType.TRIANGLE_STRIP */.MX.TRIANGLE_STRIP,0,4),e.bindVAO()}renderHighlight(e,s,i){e.bindTexture(s,definitions/* TEXTURE_BINDING_HIGHLIGHT_0 */.QU),e.useProgram(this._resources.highlightProgram),i.applyHighlightOptions(e,this._resources.highlightProgram),e.bindVAO(this._resources.quadVAO),e.setBlendingEnabled(!0),e.setBlendFunction(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA),e.drawArrays(webgl_enums/* PrimitiveType.TRIANGLE_STRIP */.MX.TRIANGLE_STRIP,0,4),e.bindVAO()}_initialize(s,i,a){this._width=i,this._height=a;const m=BufferObject/* BufferObject.createVertex */.f.createVertex(s,webgl_enums/* Usage.STATIC_DRAW */.l1.STATIC_DRAW,new Int8Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]).buffer),c=new VertexArrayObject/* VertexArrayObject */.U(s,new Map([["a_position",0],["a_texcoord",1]]),{geometry:[new VertexElementDescriptor/* VertexElementDescriptor */.G("a_position",2,webgl_enums/* DataType.BYTE */.g.BYTE,0,4),new VertexElementDescriptor/* VertexElementDescriptor */.G("a_texcoord",2,webgl_enums/* DataType.UNSIGNED_BYTE */.g.UNSIGNED_BYTE,2,4)]},{geometry:m}),f=(0,ProgramTemplate/* createProgram */.H)(s,HighlightPrograms_t),b=(0,ProgramTemplate/* createProgram */.H)(s,HighlightPrograms_r);s.useProgram(f),f.setUniform1i("u_texture",definitions/* TEXTURE_BINDING_HIGHLIGHT_0 */.QU),f.setUniform1i("u_shade",definitions/* TEXTURE_BINDING_HIGHLIGHT_1 */.Jw),f.setUniform1f("u_sigma",parameters_o),s.useProgram(b),b.setUniform1i("u_texture",definitions/* TEXTURE_BINDING_HIGHLIGHT_0 */.QU),b.setUniform1f("u_sigma",parameters_o),this._resources={quadGeometry:m,quadVAO:c,highlightProgram:f,blurProgram:b}}setup(r,e,s){this._resources?(this._width=e,this._height=s):this._initialize(r,e,s)}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/FramebufferObject.js\nvar FramebufferObject = __webpack_require__(18567);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightSurfaces.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction HighlightSurfaces_l(l,a,_){const c=new Texture/* Texture */.x(l,{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,width:a,height:_,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR});return[c,new FramebufferObject/* FramebufferObject */.X(l,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.STENCIL_RENDER_BUFFER */.OU.STENCIL_RENDER_BUFFER},c)]}class HighlightSurfaces_a{constructor(){this._width=void 0,this._height=void 0,this._resources=null}dispose(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)}_initialize(e,s,r){this._width=s,this._height=r;const[t,i]=HighlightSurfaces_l(e,s,r),[h,o]=HighlightSurfaces_l(e,s,r);this._resources={sharedBlur1Tex:t,sharedBlur1Fbo:i,sharedBlur2Tex:h,sharedBlur2Fbo:o}}setup(e,s,r){!this._resources||this._width===s&&this._height===r||this.dispose(),this._resources||this._initialize(e,s,r)}get sharedBlur1Tex(){return this._resources.sharedBlur1Tex}get sharedBlur1Fbo(){return this._resources.sharedBlur1Fbo}get sharedBlur2Tex(){return this._resources.sharedBlur2Tex}get sharedBlur2Fbo(){return this._resources.sharedBlur2Fbo}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/HighlightEffect.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst HighlightEffect_l=4,HighlightEffect_d=4/HighlightEffect_l;class HighlightEffect_n extends Effect_t{constructor(){super(...arguments),this.defines=["highlight"],this._hlRenderer=new HighlightRenderer_c,this._hlGradient=new HighlightGradient_f,this._width=void 0,this._height=void 0,this._hlSurfaces=new HighlightSurfaces_a,this._adjustedWidth=void 0,this._adjustedHeight=void 0,this._blitRenderer=new _}dispose(){this._hlSurfaces&&this._hlSurfaces.dispose(),this._hlRenderer&&this._hlRenderer.dispose(),this._hlGradient&&this._hlGradient.destroy(),this._boundFBO=null}bind(e){const{context:t,painter:s}=e,{width:i,height:h}=t.getViewport(),r=s.getFbos(i,h).effect0;this.setup(e,i,h),t.bindFramebuffer(r),t.setColorMask(!0,!0,!0,!0),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT)}unbind(){}setup({context:e},t,s){this._width=t,this._height=s;const i=t%HighlightEffect_l,h=s%HighlightEffect_l;t+=i<HighlightEffect_l/2?-i:HighlightEffect_l-i,s+=h<HighlightEffect_l/2?-h:HighlightEffect_l-h,this._adjustedWidth=t,this._adjustedHeight=s,this._boundFBO=e.getBoundFramebufferObject();const r=Math.round(t*HighlightEffect_d),n=Math.round(s*HighlightEffect_d);this._hlRenderer.setup(e,r,n),this._hlSurfaces.setup(e,r,n)}draw({context:e}){const t=e.getBoundFramebufferObject();e.setViewport(0,0,this._adjustedWidth*HighlightEffect_d,this._adjustedHeight*HighlightEffect_d),e.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),e.setStencilTestEnabled(!1),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT),this._blitRenderer.render(e,t.colorTexture,webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,1),e.setStencilTestEnabled(!1),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!0),e.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT),this._hlRenderer.preBlur(e,this._hlSurfaces.sharedBlur1Tex),e.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(e,this._hlSurfaces.sharedBlur2Tex),e.bindFramebuffer(this._boundFBO),e.setBlendingEnabled(!0),e.setColorMask(!0,!0,!0,!0),e.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(e,this._hlSurfaces.sharedBlur1Tex,this._hlGradient),this._boundFBO=null}setHighlightOptions(e){this._hlGradient.setHighlightOptions(e)}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/HittestEffect.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass HittestEffect_l extends Effect_t{constructor(){super(...arguments),this.name=this.constructor.name,this.defines=["hittest"]}dispose(){(0,maybe/* isSome */.pC)(this._fbo)&&this._fbo.dispose()}createOptions({pixelRatio:t},e,s=definitions/* HITTEST_RADIUS */.dn){if(!e.length)return null;const o=e.shift(),n=o.point.x,r=o.point.y;return this._outstanding=o,{type:"hittest",distance:s*t,position:[n,r]}}bind(t){const{context:i,attributeView:o}=t;if(!o.size)return;const n=o.getBlock(definitions/* ATTRIBUTE_DATA_GPGPU */.pU);if((0,maybe/* isNone */.Wi)(n))return;const r=n.getFBO(i);i.setViewport(0,0,o.size,o.size),i.bindFramebuffer(r),i.setColorMask(!0,!0,!0,!0),i.setClearColor(0,0,0,0),i.clear(i.gl.COLOR_BUFFER_BIT|i.gl.DEPTH_BUFFER_BIT)}unbind(t){}draw(t){const{context:i,attributeView:o}=t,l=o.getBlock(definitions/* ATTRIBUTE_DATA_GPGPU */.pU);if((0,maybe/* isNone */.Wi)(this._outstanding))return;const u=this._outstanding.resolver;if((0,maybe/* isNone */.Wi)(l))return u.resolve([]),void(this._outstanding=null);const c=l.getFBO(i),h=new Uint8Array(c.width*c.height*4);c.readPixels(0,0,c.width,c.height,webgl_enums/* PixelFormat.RGBA */.VI.RGBA,webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,h);const a=[];for(let e=0;e<h.length;e+=4)h[e]&&a.push(e/4);this._outstanding=null,u.resolve(a)}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/HittestEffectVTL.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass HittestEffectVTL_i extends Effect_t{constructor(){super(...arguments),this.name=this.constructor.name,this.defines=["id"],this._lastSize=0}dispose(){(0,maybe/* isSome */.pC)(this._fbo)&&this._fbo.dispose()}bind({context:t,painter:e}){const{width:s,height:o}=t.getViewport();this._boundFBO=t.getBoundFramebufferObject();const r=e.getFbos(s,o).effect0;t.bindFramebuffer(r),t.setColorMask(!0,!0,!0,!0),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT)}unbind({context:t}){t.bindFramebuffer(this._boundFBO),this._boundFBO=null}draw({context:t,state:s,pixelRatio:i},n,f=2*definitions/* HITTEST_RADIUS */.dn){const a=t.getBoundFramebufferObject(),h=s.size[1]*i,u=Math.round(f*i),b=u/2,c=u/2;this._ensureBuffer(u),n.forEach(((t,e)=>{const s=new Map,f=Math.floor(e.x*i-u/2),l=Math.floor(h-e.y*i-u/2);a.readPixels(f,l,u,u,webgl_enums/* PixelFormat.RGBA */.VI.RGBA,webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,this._buf);for(let o=0;o<this._buf32.length;o++){const t=this._buf32[o];if(4294967295!==t&&0!==t){const e=o%u,r=u-Math.floor(o/u),i=(b-e)*(b-e)+(c-r)*(c-r),n=s.has(t)?s.get(t):4294967295;s.set(t,Math.min(i,n))}}const d=Array.from(s).sort(((t,e)=>t[1]-e[1])).map((t=>t[0]));t.resolve(d),n.delete(e)}))}_ensureBuffer(t){this._lastSize!==t&&(this._lastSize=t,this._buf=new Uint8Array(4*t*t),this._buf32=new Uint32Array(this._buf.buffer))}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Bloom.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst Bloom_u=5,Bloom_p=[1,0],Bloom_=[0,1],Bloom_m=[1,.8,.6,.4,.2],Bloom_d=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];class Bloom_c{constructor(){this._intensityFBO=null,this._compositeFBO=null,this._mipsFBOs=new Array(Bloom_u),this._nMips=Bloom_u,this._kernelSizeArray=[3,5,7,9,11],this._size=[0,0],this._programDesc={luminosityHighPass:{vsPath:"post-processing/pp",fsPath:"post-processing/bloom/luminosityHighPass",attributes:new Map([["a_position",0]])},gaussianBlur:{vsPath:"post-processing/pp",fsPath:"post-processing/bloom/gaussianBlur",attributes:new Map([["a_position",0]])},composite:{vsPath:"post-processing/pp",fsPath:"post-processing/bloom/composite",attributes:new Map([["a_position",0]])},blit:{vsPath:"post-processing/pp",fsPath:"post-processing/blit",attributes:new Map([["a_position",0]])}}}dispose(){if(this._quad&&(this._quad.dispose(),this._quad=null),this._intensityFBO&&(this._intensityFBO.dispose(),this._intensityFBO=null),this._compositeFBO&&(this._compositeFBO.dispose(),this._compositeFBO=null),this._mipsFBOs){for(let t=0;t<this._nMips;t++)this._mipsFBOs[t]&&(this._mipsFBOs[t].horizontal.dispose(),this._mipsFBOs[t].vertical.dispose());this._mipsFBOs=null}}draw(i,s,r){const{width:o,height:n}=s,{context:a,painter:l}=i,{materialManager:h}=l,c=a.gl,T=this._programDesc,{strength:f,radius:g,threshold:B}=r;this._quad||(this._quad=new VertexStream/* default */.Z(a,[-1,-1,1,-1,-1,1,1,1])),this._createOrResizeResources(i,o,n),a.setStencilTestEnabled(!1),a.setBlendingEnabled(!0),a.setBlendFunction(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA),a.setStencilWriteMask(0);const O=this._quad;O.bind(),a.bindFramebuffer(this._intensityFBO);const F=h.getProgram(i,T.luminosityHighPass);a.useProgram(F),a.bindTexture(s.colorTexture,0),F.setUniform1i("u_texture",0),F.setUniform3fv("u_defaultColor",[0,0,0]),F.setUniform1f("u_defaultOpacity",0),F.setUniform1f("u_luminosityThreshold",B),F.setUniform1f("u_smoothWidth",.01);const b=[Math.round(o/2),Math.round(n/2)];a.setViewport(0,0,b[0],b[1]),a.setClearColor(0,0,0,0),a.clear(c.COLOR_BUFFER_BIT),O.draw(),a.setBlendingEnabled(!1);let E=this._intensityFBO.colorTexture;for(let t=0;t<this._nMips;t++){const e=h.getProgram(i,T.gaussianBlur,[{name:"radius",value:this._kernelSizeArray[t]}]);a.useProgram(e),a.bindTexture(E,t+1),e.setUniform1i("u_colorTexture",t+1),e.setUniform2fv("u_texSize",b),e.setUniform2fv("u_direction",Bloom_p),a.setViewport(0,0,b[0],b[1]);const s=this._mipsFBOs[t];a.bindFramebuffer(s.horizontal),O.draw(),E=s.horizontal.colorTexture,a.bindFramebuffer(s.vertical),a.bindTexture(E,t+1),e.setUniform2fv("u_direction",Bloom_),O.draw(),E=s.vertical.colorTexture,b[0]=Math.round(b[0]/2),b[1]=Math.round(b[1]/2)}a.setViewport(0,0,o,n);const x=h.getProgram(i,T.composite,[{name:"nummips",value:Bloom_u}]);a.bindFramebuffer(this._compositeFBO),a.useProgram(x),x.setUniform1f("u_bloomStrength",f),x.setUniform1f("u_bloomRadius",g),x.setUniform1fv("u_bloomFactors",Bloom_m),x.setUniform3fv("u_bloomTintColors",Bloom_d),a.bindTexture(this._mipsFBOs[0].vertical.colorTexture,1),x.setUniform1i("u_blurTexture1",1),a.bindTexture(this._mipsFBOs[1].vertical.colorTexture,2),x.setUniform1i("u_blurTexture2",2),a.bindTexture(this._mipsFBOs[2].vertical.colorTexture,3),x.setUniform1i("u_blurTexture3",3),a.bindTexture(this._mipsFBOs[3].vertical.colorTexture,4),x.setUniform1i("u_blurTexture4",4),a.bindTexture(this._mipsFBOs[4].vertical.colorTexture,5),x.setUniform1i("u_blurTexture5",5),O.draw(),a.bindFramebuffer(s),a.setBlendingEnabled(!0);const w=h.getProgram(i,T.blit);a.useProgram(w),a.bindTexture(this._compositeFBO.colorTexture,6),w.setUniform1i("u_texture",6),a.setBlendFunction(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE */.zi.ONE),O.draw(),O.unbind(),a.setBlendFunction(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA),a.setStencilTestEnabled(!0)}_createOrResizeResources(t,e,u){const{context:p}=t;if(this._compositeFBO&&this._size[0]===e&&this._size[1]===u)return;this._size[0]=e,this._size[1]=u;const _=[Math.round(e/2),Math.round(u/2)];this._compositeFBO?this._compositeFBO.resize(e,u):this._compositeFBO=new FramebufferObject/* FramebufferObject */.X(p,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.NONE */.OU.NONE,width:e,height:u}),this._intensityFBO?this._intensityFBO.resize(_[0],_[1]):this._intensityFBO=new FramebufferObject/* FramebufferObject */.X(p,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.NONE */.OU.NONE,width:_[0],height:_[1]},{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,internalFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR,flipped:!1,width:_[0],height:_[1]});for(let m=0;m<this._nMips;m++)this._mipsFBOs[m]?(this._mipsFBOs[m].horizontal.resize(_[0],_[1]),this._mipsFBOs[m].vertical.resize(_[0],_[1])):this._mipsFBOs[m]={horizontal:new FramebufferObject/* FramebufferObject */.X(p,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.NONE */.OU.NONE,width:_[0],height:_[1]},{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,internalFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR,flipped:!1,width:_[0],height:_[1]}),vertical:new FramebufferObject/* FramebufferObject */.X(p,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.NONE */.OU.NONE,width:_[0],height:_[1]},{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,internalFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR,flipped:!1,width:_[0],height:_[1]})},_[0]=Math.round(_[0]/2),_[1]=Math.round(_[1]/2)}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Blur.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst Blur_d=[1,0],Blur_=[0,1];class b{constructor(){this._blurFBO=null,this._size=[0,0],this._programDesc={gaussianBlur:{vsPath:"post-processing/pp",fsPath:"post-processing/blur/gaussianBlur",attributes:new Map([["a_position",0]])},radialBlur:{vsPath:"post-processing/pp",fsPath:"post-processing/blur/radial-blur",attributes:new Map([["a_position",0]])},blit:{vsPath:"post-processing/pp",fsPath:"post-processing/blit",attributes:new Map([["a_position",0]])}}}dispose(){this._blurFBO&&(this._blurFBO.dispose(),this._blurFBO=null)}draw(t,r,s){const{context:i}=t,{type:a,radius:n}=s;if(0===n)return;this._createOrResizeResources(t),this._quad||(this._quad=new VertexStream/* default */.Z(i,[-1,-1,1,-1,-1,1,1,1]));const o=this._quad;o.bind(),"blur"===a?this._gaussianBlur(t,r,n):this._radialBlur(t,r),o.unbind()}_gaussianBlur(e,r,s){const{context:i,state:a,painter:n,pixelRatio:o}=e,{size:u}=a,{materialManager:l}=n,b=this._programDesc,p=this._quad,c=[Math.round(o*u[0]),Math.round(o*u[1])],h=this._blurFBO,g=l.getProgram(e,b.gaussianBlur,[{name:"radius",value:Math.ceil(s)}]);i.useProgram(g),i.setBlendingEnabled(!1),i.bindFramebuffer(h),i.bindTexture(r.colorTexture,4),g.setUniform1i("u_colorTexture",4),g.setUniform2fv("u_texSize",c),g.setUniform2fv("u_direction",Blur_d),g.setUniform1f("u_sigma",s),p.draw(),i.bindFramebuffer(r),i.setStencilWriteMask(0),i.setStencilTestEnabled(!1),i.setDepthWriteEnabled(!1),i.setDepthTestEnabled(!1),i.bindTexture(h.colorTexture,5),g.setUniform1i("u_colorTexture",5),g.setUniform2fv("u_direction",Blur_),p.draw(),i.setBlendingEnabled(!0),i.setBlendFunction(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA),i.setStencilTestEnabled(!0)}_radialBlur(e,r){const{context:s,painter:i}=e,{materialManager:a}=i,n=this._programDesc,o=this._quad,u=this._blurFBO;s.bindFramebuffer(u);const l=a.getProgram(e,n.radialBlur);s.useProgram(l),s.setBlendingEnabled(!1),s.bindTexture(r.colorTexture,4),l.setUniform1i("u_colorTexture",4),o.draw(),s.bindFramebuffer(r),s.setStencilWriteMask(0),s.setStencilTestEnabled(!1),s.setDepthWriteEnabled(!1),s.setDepthTestEnabled(!1),s.setBlendingEnabled(!0);const d=a.getProgram(e,n.blit);s.useProgram(d),s.bindTexture(u.colorTexture,5),d.setUniform1i("u_texture",5),s.setBlendFunction(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA),o.draw()}_createOrResizeResources(e){const{context:t,state:d,pixelRatio:_}=e,{size:b}=d,p=Math.round(_*b[0]),c=Math.round(_*b[1]);this._blurFBO&&this._size[0]===p&&this._size[1]===c||(this._size[0]=p,this._size[1]=c,this._blurFBO?this._blurFBO.resize(p,c):this._blurFBO=new FramebufferObject/* FramebufferObject */.X(t,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.NONE */.OU.NONE,width:p,height:c},{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,internalFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR,flipped:!1,width:p,height:c}))}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Colorize.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass Colorize_l{constructor(){this._size=[0,0],this._programDesc={vsPath:"post-processing/pp",fsPath:"post-processing/filterEffect",attributes:new Map([["a_position",0]])}}dispose(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null)}draw(e,s,r){const{width:i,height:a}=s;this._createOrResizeResources(e,i,a);const{context:o,painter:n}=e,{materialManager:l}=n,_=this._programDesc,c=this._quad,h=r.colorMatrix;c.bind();const u=this._layerFBOTexture;o.bindFramebuffer(s),s.copyToTexture(0,0,i,a,0,0,u),o.setBlendingEnabled(!1),o.setStencilTestEnabled(!1);const d=l.getProgram(e,_);o.useProgram(d),o.bindTexture(u,2),d.setUniformMatrix4fv("u_coefficients",h),d.setUniform1i("u_colorTexture",2),c.draw(),o.setBlendingEnabled(!0),o.setBlendFunction(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA),o.setStencilTestEnabled(!0),c.unbind()}_createOrResizeResources(t,l,_){const{context:c}=t;this._layerFBOTexture&&this._size[0]===l&&this._size[1]===_||(this._size[0]=l,this._size[1]=_,this._layerFBOTexture?this._layerFBOTexture.resize(l,_):this._layerFBOTexture=new Texture/* Texture */.x(c,{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,internalFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR,flipped:!1,width:l,height:_}),this._quad||(this._quad=new VertexStream/* default */.Z(c,[-1,-1,1,-1,-1,1,1,1])))}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/DropShadow.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst DropShadow_=[1,0],DropShadow_d=[0,1];class DropShadow_c{constructor(){this._horizontalBlurFBO=null,this._verticalBlurFBO=null,this._size=[0,0],this._programDesc={blur:{vsPath:"post-processing/pp",fsPath:"post-processing/blur/gaussianBlur",attributes:new Map([["a_position",0]])},composite:{vsPath:"post-processing/pp",fsPath:"post-processing/drop-shadow/composite",attributes:new Map([["a_position",0]])},blit:{vsPath:"post-processing/pp",fsPath:"post-processing/blit",attributes:new Map([["a_position",0]])}}}dispose(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null),this._horizontalBlurFBO&&(this._horizontalBlurFBO.dispose(),this._horizontalBlurFBO=null),this._verticalBlurFBO&&(this._verticalBlurFBO.dispose(),this._verticalBlurFBO=null)}draw(i,s,o){const{context:a,state:l,painter:n}=i,{materialManager:u}=n,h=this._programDesc,p=s.width,c=s.height,B=[Math.round(p/2),Math.round(c/2)],{blurRadius:m,offsetX:T,offsetY:f,color:g}=o,F=[(0,screenUtils/* pt2px */.F2)(T/2),(0,screenUtils/* pt2px */.F2)(f/2)];this._createOrResizeResources(i,p,c,B);const O=this._horizontalBlurFBO,E=this._verticalBlurFBO;a.setStencilWriteMask(0),a.setStencilTestEnabled(!1),a.setDepthWriteEnabled(!1),a.setDepthTestEnabled(!1);const b=this._layerFBOTexture;s.copyToTexture(0,0,p,c,0,0,b),this._quad||(this._quad=new VertexStream/* default */.Z(a,[-1,-1,1,-1,-1,1,1,1])),a.setViewport(0,0,B[0],B[1]);const w=this._quad;w.bind(),a.setBlendingEnabled(!1);const x=u.getProgram(i,h.blur,[{name:"radius",value:Math.ceil(m)}]);a.useProgram(x),a.bindFramebuffer(O),a.bindTexture(s.colorTexture,4),x.setUniform1i("u_colorTexture",4),x.setUniform2fv("u_texSize",B),x.setUniform2fv("u_direction",DropShadow_),x.setUniform1f("u_sigma",m),w.draw(),a.bindFramebuffer(E),a.bindTexture(O.colorTexture,5),x.setUniform1i("u_colorTexture",5),x.setUniform2fv("u_direction",DropShadow_d),w.draw(),a.bindFramebuffer(s),a.setViewport(0,0,p,c);const M=u.getProgram(i,h.composite);a.useProgram(M),a.bindTexture(E.colorTexture,2),M.setUniform1i("u_blurTexture",2),a.bindTexture(b,3),M.setUniform1i("u_layerFBOTexture",3),M.setUniform4fv("u_shadowColor",[g[3]*(g[0]/255),g[3]*(g[1]/255),g[3]*(g[2]/255),g[3]]),M.setUniformMatrix3fv("u_displayViewMat3",l.displayMat3),M.setUniform2fv("u_shadowOffset",F),w.draw(),a.setBlendingEnabled(!0),a.setStencilTestEnabled(!0),a.setBlendFunction(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA),w.unbind()}_createOrResizeResources(e,t,r,_){const{context:d}=e;this._horizontalBlurFBO&&this._size[0]===t&&this._size[1]===r||(this._size[0]=t,this._size[1]=r,this._horizontalBlurFBO?this._horizontalBlurFBO.resize(_[0],_[1]):this._horizontalBlurFBO=new FramebufferObject/* FramebufferObject */.X(d,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.NONE */.OU.NONE,width:_[0],height:_[1]},{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,internalFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR,flipped:!1,width:_[0],height:_[1]}),this._verticalBlurFBO?this._verticalBlurFBO.resize(_[0],_[1]):this._verticalBlurFBO=new FramebufferObject/* FramebufferObject */.X(d,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.NONE */.OU.NONE,width:_[0],height:_[1]},{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,internalFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR,flipped:!1,width:_[0],height:_[1]}),this._layerFBOTexture?this._layerFBOTexture.resize(t,r):this._layerFBOTexture=new Texture/* Texture */.x(d,{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,internalFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR,flipped:!1,width:t,height:r}))}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Opacity.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass Opacity_l{constructor(){this._size=[0,0]}dispose(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null)}draw(t,s,r){const{width:i,height:a}=s;this._createOrResizeResources(t,i,a);const{context:l,painter:o}=t,{amount:T}=r,h=l.gl,n=this._layerFBOTexture;l.bindFramebuffer(s),s.copyToTexture(0,0,i,a,0,0,n),l.setBlendingEnabled(!0),l.setStencilTestEnabled(!1),l.setDepthTestEnabled(!1),l.setClearColor(0,0,0,0),l.clear(h.COLOR_BUFFER_BIT),o.blitTexture(l,n,webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,T)}_createOrResizeResources(l,o,T){const{context:h}=l;this._layerFBOTexture&&this._size[0]===o&&this._size[1]===T||(this._size[0]=o,this._size[1]=T,this._layerFBOTexture?this._layerFBOTexture.resize(o,T):this._layerFBOTexture=new Texture/* Texture */.x(h,{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,internalFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,flipped:!1,width:o,height:T}))}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/EffectManager.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction EffectManager_c(e){switch(e){case"bloom":case"blur":case"opacity":case"drop-shadow":return e;default:return"colorize"}}const EffectManager_f={colorize:()=>new Colorize_l,blur:()=>new b,bloom:()=>new Bloom_c,opacity:()=>new Opacity_l,"drop-shadow":()=>new DropShadow_c};class EffectManager_i{constructor(e){this._requestRender=e,this._effectMap=new Map}dispose(){this._requestRender&&(this._requestRender=null),this._effectMap.forEach((e=>e.dispose())),this._effectMap.clear()}getPostProcessingEffects(e){if(!e||0===e.length)return[];const t=[];for(const o of e){const e=EffectManager_c(o.type);let s=this._effectMap.get(e);s||(s=EffectManager_f[e](),this._effectMap.set(e,s)),t.push({postProcessingEffect:s,effect:o})}return t}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/arrayUtils.js\nvar arrayUtils = __webpack_require__(7753);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/painter/RenderPass.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass RenderPass_t{constructor(r,e){var t;this.brushes=r,this.name=e.name,this.drawPhase=e.drawPhase||enums/* WGLDrawPhase.MAP */.jx.MAP,this._targetFn=e.target,this.effects=e.effects||[],this.enableDefaultDraw=null!=(t=e.enableDefaultDraw)?t:()=>!0}render(r){const{context:e,profiler:s}=r,t=this._targetFn(),a=this.drawPhase&r.drawPhase;if(s.recordPassStart(this.name),a){this.enableDefaultDraw()&&this._doRender(r,t),s.recordPassEnd();for(const a of this.effects){if(!a.enable())continue;const o=a.apply;s.recordPassStart(this.name+"."+o.name),s.recordBrushStart(o.name);const n=a.args&&a.args(),{x:i,y:d,width:f,height:h}=e.getViewport(),c=e.getBoundFramebufferObject();o.bind(r,n);const p=o.createOptions(r,n),u=r.passOptions;r.passOptions=p,this._doRender(r,t,o.defines),r.passOptions=u,o.draw(r,n),o.unbind(r,n),e.bindFramebuffer(c),e.setViewport(i,d,f,h),s.recordBrushEnd(),s.recordPassEnd()}}}_doRender(s,t,a){if(!(0,maybe/* isNone */.Wi)(t))if((0,arrayUtils/* isArrayLike */.zG)(t)){for(const r of t)if(r.visible)for(const e of this.brushes)s.profiler.recordBrushStart(e.name),e.prepareState(s,r,a),e.draw(s,r,a),s.profiler.recordBrushEnd()}else for(const r of this.brushes)s.profiler.recordBrushStart(r.name),r.prepareState(s,t,a),r.draw(s,t,a),s.profiler.recordBrushEnd()}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/Renderbuffer.js\nvar Renderbuffer = __webpack_require__(37165);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/Painter.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst Painter_S={[enums/* WGLGeometryType.FILL */.LW.FILL]:brushes/* brushes.fill */.U.fill,[enums/* WGLGeometryType.LINE */.LW.LINE]:brushes/* brushes.line */.U.line,[enums/* WGLGeometryType.MARKER */.LW.MARKER]:brushes/* brushes.marker */.U.marker,[enums/* WGLGeometryType.TEXT */.LW.TEXT]:brushes/* brushes.text */.U.text};class P{constructor(e,t,s){this.context=e,this._blitRenderer=new _,this._brushCache=new Map,this._vtlMaterialManager=new VTLMaterialManager_o,this._blendEffect=new BlendEffect_,this._fboPool=[],this.effects={highlight:new HighlightEffect_n,hittest:new HittestEffect_l,hittestVTL:new HittestEffectVTL_i,integrate:new AnimationEffect_o,insideEffect:new FeatureEffect_r("inside"),outsideEffect:new FeatureEffect_r("outside")},this.materialManager=new MaterialManager_h(e),this.textureManager=new W(t,s),this._effectsManager=new EffectManager_i(t)}get vectorTilesMaterialManager(){return this._vtlMaterialManager}getRenderTarget(){return this._renderTarget}setRenderTarget(e){this._renderTarget=e}getFbos(e,t){if(e!==this._lastWidth||t!==this._lastHeight){if(this._lastWidth=e,this._lastHeight=t,this._fbos){for(const s in this._fbos)this._fbos[s].resize(e,t);return this._fbos}const s={target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,samplingMode:webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,width:e,height:t},r={colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER */.OU.DEPTH_STENCIL_RENDER_BUFFER},i=new Renderbuffer/* Renderbuffer */.r(this.context,{width:e,height:t,internalFormat:webgl_enums/* RenderbufferFormat.DEPTH_STENCIL */.Tg.DEPTH_STENCIL});this._stencilBuf=i,this._fbos={output:new FramebufferObject/* FramebufferObject */.X(this.context,r,s,i),blend:new FramebufferObject/* FramebufferObject */.X(this.context,r,s,i),effect0:new FramebufferObject/* FramebufferObject */.X(this.context,r,s,i)}}return this._fbos}acquireFbo(e,t){let s;s=this._fboPool.length>0?this._fboPool.pop():new FramebufferObject/* FramebufferObject */.X(this.context,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER */.OU.DEPTH_STENCIL_RENDER_BUFFER},{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,samplingMode:webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,width:e,height:t},this._stencilBuf);const r=s.descriptor;return r.width===e&&r.height===t||s.resize(e,t),s}releaseFbo(e){this._fboPool.push(e)}getSharedStencilBuffer(){return this._stencilBuf}beforeRenderLayers(t,s=null){const{width:r,height:i}=t.getViewport();this._prevFBO=t.getBoundFramebufferObject();const n=this.getFbos(r,i);if(t.bindFramebuffer(n.output),t.setColorMask(!0,!0,!0,!0),t.setDepthWriteEnabled(!0),(0,maybe/* isSome */.pC)(s)){const{r:e,g:r,b:i,a:n}=s.color;t.setClearColor(n*e/255,n*r/255,n*i/255,n)}else t.setClearColor(0,0,0,0);t.setClearDepth(1),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),t.setDepthWriteEnabled(!1)}beforeRenderLayer(e,t,s){const{context:r,blendMode:i,effects:n,requireFBO:o,drawPhase:a}=e;if(o||N(a,i,n,s))r.bindFramebuffer(this._fbos.blend),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setDepthWriteEnabled(!0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);else{const e=this._getOutputFBO();r.bindFramebuffer(e)}r.setDepthWriteEnabled(!1),r.setDepthTestEnabled(!1),r.setStencilTestEnabled(!0),r.setClearStencil(t),r.setStencilWriteMask(255),r.clear(r.gl.STENCIL_BUFFER_BIT)}compositeLayer(s,r){const{context:i,blendMode:n,effects:a,requireFBO:h,drawPhase:f}=s;if(h||N(f,n,a,r)){(0,maybe/* isSome */.pC)(a)&&a.length>0&&f===enums/* WGLDrawPhase.MAP */.jx.MAP&&this._applyEffects(s,a);const h=this._getOutputFBO();i.bindFramebuffer(h),i.setStencilTestEnabled(!1),i.setStencilWriteMask(0),i.setBlendingEnabled(!0),i.setBlendFunctionSeparate(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA,webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA),i.setColorMask(!0,!0,!0,!0);const l=(0,maybe/* isNone */.Wi)(n)||f===enums/* WGLDrawPhase.HIGHLIGHT */.jx.HIGHLIGHT?"normal":n;this._blendEffect.draw(s,this._fbos.blend.colorTexture,webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,l,r)}}renderLayers(e){if(e.bindFramebuffer(this._prevFBO),!this._fbos)return;const t=this._getOutputFBO();e.setStencilTestEnabled(!1),e.setStencilWriteMask(0),this.blitTexture(e,t.colorTexture,webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST)}dispose(){if(this.materialManager.dispose(),this.textureManager.dispose(),this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null),this._brushCache&&(this._brushCache.forEach((e=>e.dispose())),this._brushCache.clear(),this._brushCache=null),this._fbos)for(const e in this._fbos)this._fbos[e]&&this._fbos[e].dispose();for(const e of this._fboPool)e.dispose();if(this._fboPool.length=0,this.effects)for(const e in this.effects)this.effects[e]&&this.effects[e].dispose();this._effectsManager.dispose(),this._vtlMaterialManager&&(this._vtlMaterialManager.dispose(),this._vtlMaterialManager=null),this._prevFBO=null}getGeometryBrush(e){const t=Painter_S[e];let s=this._brushCache.get(t);return void 0===s&&(s=new t,this._brushCache.set(t,s)),this._brushCache.get(t)}renderObject(e,t,r,i){const n=brushes/* brushes */.U[r];if(!n)return null;let o=this._brushCache.get(n);void 0===o&&(o=new n,this._brushCache.set(n,o)),o.prepareState(e,t,i),o.draw(e,t,i)}renderObjects(e,t,r,i){const n=brushes/* brushes */.U[r];if(!n)return null;let o=this._brushCache.get(n);void 0===o&&(o=new n,this._brushCache.set(n,o)),o.drawMany(e,t,i)}registerRenderPass(e){const t=e.brushes.map((e=>(this._brushCache.has(e)||this._brushCache.set(e,new e),this._brushCache.get(e))));return new RenderPass_t(t,e)}setHighlightOptions(e){this.effects.highlight.setHighlightOptions(e)}blitTexture(e,t,s,r=1){e.setBlendingEnabled(!0),e.setBlendFunctionSeparate(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA,webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA),e.setColorMask(!0,!0,!0,!0),this._blitRenderer.render(e,t,s,r)}getPostProcessingEffects(e){return this._effectsManager.getPostProcessingEffects(e)}_getOutputFBO(){return null!=this._renderTarget?this._renderTarget:this._fbos.output}_applyEffects(e,t){const{context:s}=e,r=this._effectsManager.getPostProcessingEffects(t);for(const{postProcessingEffect:i,effect:n}of r)s.bindFramebuffer(this._fbos.blend),i.draw(e,this._fbos.blend,n)}}function N(t,s,r,i){return t!==enums/* WGLDrawPhase.HIGHLIGHT */.jx.HIGHLIGHT&&(1!==i||(0,maybe/* isSome */.pC)(s)&&"normal"!==s||(0,maybe/* isSome */.pC)(r)&&r.length>0)}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/CircularArray.js\nvar CircularArray = __webpack_require__(12348);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Evented.js\nvar Evented = __webpack_require__(31355);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/capabilities/isWebGL2Context.js\nvar isWebGL2Context = __webpack_require__(79193);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/capabilities/DisjointTimerQuery.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass E{constructor(e,E,t,T,r,_,i,u){this.createQuery=e,this.resultAvailable=E,this.getResult=t,this.disjoint=T,this.beginTimeElapsed=r,this.endTimeElapsed=_,this.createTimestamp=i,this.timestampBits=u}}function DisjointTimerQuery_t(t,T){if(T.disjointTimerQuery)return null;let r=t.getExtension("EXT_disjoint_timer_query_webgl2");return r&&(0,isWebGL2Context/* default */.Z)(t)?new E((()=>t.createQuery()),(e=>t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE)),(e=>t.getQueryParameter(e,t.QUERY_RESULT)),(()=>t.getParameter(r.GPU_DISJOINT_EXT)),(e=>t.beginQuery(r.TIME_ELAPSED_EXT,e)),(()=>t.endQuery(r.TIME_ELAPSED_EXT)),(e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT)),(()=>t.getQuery(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT))):(r=t.getExtension("EXT_disjoint_timer_query"),r?new E((()=>r.createQueryEXT()),(e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT)),(e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)),(()=>t.getParameter(r.GPU_DISJOINT_EXT)),(e=>r.beginQueryEXT(r.TIME_ELAPSED_EXT,e)),(()=>r.endQueryEXT(r.TIME_ELAPSED_EXT)),(e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT)),(()=>r.getQueryEXT(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT))):null)}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/Profiler.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst Profiler_i=(0,has/* default */.Z)("esri-2d-profiler");class Profiler_o{constructor(t,r){if(this._events=new Evented/* default */.Z,this._entries=new Map,this._timings=new CircularArray/* default */.Z(10),!Profiler_i)return;this._ext=DisjointTimerQuery_t(t.gl,{}),this._debugOutput=r;const o=t.gl;if(this.enableCommandLogging)for(const e in o)if("function"==typeof o[e]){const s=o[e],t=-1!==e.indexOf("draw");o[e]=(...r)=>(this._events.emit("command",{container:this._currentContainer,pass:this._currentPass,brush:this._currentBrush,method:e,args:r,isDrawCommand:t}),this._currentSummary&&(this._currentSummary.commands++,t&&this._currentSummary.drawCommands++),s.apply(o,r))}}get enableCommandLogging(){return!("object"==typeof Profiler_i&&Profiler_i.disableCommands)}recordContainerStart(e){Profiler_i&&(this._currentContainer=e)}recordContainerEnd(){Profiler_i&&(this._currentContainer=null)}recordPassStart(e){Profiler_i&&(this._currentPass=e,this._initSummary())}recordPassEnd(){Profiler_i&&(this._currentPass=null,this._emitSummary())}recordBrushStart(e){Profiler_i&&(this._currentBrush=e)}recordBrushEnd(){Profiler_i&&(this._currentBrush=null)}recordStart(e){if(Profiler_i&&(0,maybe/* isSome */.pC)(this._ext)){if(this._entries.has(e)){const s=this._entries.get(e),t=this._ext.resultAvailable(s.query),n=this._ext.disjoint();if(t&&!n){const t=this._ext.getResult(s.query)/1e6;let n=0;if((0,maybe/* isSome */.pC)(this._timings.enqueue(t))){const e=this._timings.entries,s=e.length;let t=0;for(const r of e)t+=r;n=t/s}const i=t.toFixed(2),o=n?n.toFixed(2):"--";this.enableCommandLogging?(console.groupCollapsed(`Frame report for ${e}, ${i} ms (${o} last 10 avg)\\n${s.commandsLen} Commands (${s.drawCommands} draw)`),console.log("RenderPass breakdown: "),console.table(s.summaries),console.log("Commands: ",s.commands),console.groupEnd()):console.log(`Frame report for ${e}, ${i} ms (${o} last 10 avg)`),this._debugOutput.innerHTML=`${i} (${o})`}for(const e of s.handles)e.remove();this._entries.delete(e)}const s={name:e,query:this._ext.createQuery(),commands:[],commandsLen:0,drawCommands:0,summaries:[],handles:[]};this.enableCommandLogging&&(s.handles.push(this._events.on("command",(e=>{s.commandsLen++,s.commands.push(e),e.isDrawCommand&&s.drawCommands++}))),s.handles.push(this._events.on("summary",(e=>{s.summaries.push(e)})))),this._ext.beginTimeElapsed(s.query),this._entries.set(e,s)}}recordEnd(e){Profiler_i&&(0,maybe/* isSome */.pC)(this._ext)&&this._entries.has(e)&&this._ext.endTimeElapsed()}_initSummary(){this.enableCommandLogging&&(this._currentSummary={container:this._currentContainer,pass:this._currentPass,drawCommands:0,commands:0})}_emitSummary(){this.enableCommandLogging&&this._events.emit("summary",this._currentSummary)}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/StencilPrograms.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst StencilPrograms_r={shaders:{vertexShader:(0,resolver/* resolveIncludes */.w)("stencil/stencil.vert"),fragmentShader:(0,resolver/* resolveIncludes */.w)("stencil/stencil.frag")},attributes:new Map([["a_pos",0]])};\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/support/Timeline.js\nvar Timeline = __webpack_require__(45479);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/support/screenshotUtils.js\nvar screenshotUtils = __webpack_require__(994);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/context-util.js\nvar context_util = __webpack_require__(36172);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/time.js\nvar time = __webpack_require__(12928);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/checkWebGLError.js\nvar checkWebGLError = __webpack_require__(6174);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/ShaderTranspiler.js + 1 modules\nvar ShaderTranspiler = __webpack_require__(58400);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/ProgramCache.js + 1 modules\nvar ProgramCache = __webpack_require__(59720);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/ContextState.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass ContextState_h{constructor(){this.blend=!1,this.blendColor={r:0,g:0,b:0,a:0},this.blendFunction={srcRGB:webgl_enums/* BlendFactor.ONE */.zi.ONE,dstRGB:webgl_enums/* BlendFactor.ZERO */.zi.ZERO,srcAlpha:webgl_enums/* BlendFactor.ONE */.zi.ONE,dstAlpha:webgl_enums/* BlendFactor.ZERO */.zi.ZERO},this.blendEquation={mode:webgl_enums/* BlendOperation.ADD */.db.ADD,modeAlpha:webgl_enums/* BlendOperation.ADD */.db.ADD},this.colorMask={r:!0,g:!0,b:!0,a:!0},this.faceCulling=!1,this.cullFace=webgl_enums/* Face.BACK */.LR.BACK,this.frontFace=webgl_enums/* CullMode.CCW */.Wf.CCW,this.scissorTest=!1,this.scissorRect={x:0,y:0,width:0,height:0},this.depthTest=!1,this.depthFunction=webgl_enums/* CompareFunction.LESS */.wb.LESS,this.clearDepth=1,this.depthWrite=!0,this.depthRange={zNear:0,zFar:1},this.viewport=null,this.stencilTest=!1,this.polygonOffsetFill=!1,this.polygonOffset=[0,0],this.stencilFunction={face:webgl_enums/* Face.FRONT_AND_BACK */.LR.FRONT_AND_BACK,func:webgl_enums/* CompareFunction.ALWAYS */.wb.ALWAYS,ref:0,mask:1},this.clearStencil=0,this.stencilWriteMask=1,this.stencilOperation={face:webgl_enums/* Face.FRONT_AND_BACK */.LR.FRONT_AND_BACK,fail:webgl_enums/* StencilOperation.KEEP */.xS.KEEP,zFail:webgl_enums/* StencilOperation.KEEP */.xS.KEEP,zPass:webgl_enums/* StencilOperation.KEEP */.xS.KEEP},this.clearColor={r:0,g:0,b:0,a:0},this.program=null,this.vertexBuffer=null,this.indexBuffer=null,this.uniformBuffer=null,this.pixelPackBuffer=null,this.pixelUnpackBuffer=null,this.copyReadBuffer=null,this.copyWriteBuffer=null,this.uniformBufferBindingPoints=new Array,this.readFramebuffer=null,this.drawFramebuffer=null,this.renderbuffer=null,this.activeTexture=0,this.textureUnitMap=new Array}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/support/AllocationTracer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass AllocationTracer_o{constructor(o){this._allocations=new Map,o?Error.stackTraceLimit=1/0:(this.add=()=>{},this.remove=()=>{})}add(o){this._allocations.set(o,(new Error).stack)}remove(o){this._allocations.delete(o)}print(){if(this._allocations.size>0){console.log(`${this._allocations.size} live object allocations:`);const o=new Map;this._allocations.forEach((s=>{var t;o.set(s,(null!=(t=o.get(s))?t:0)+1)})),o.forEach(((o,s)=>{const t=s.split("\\n");t.shift(),t.shift(),console.log(`${o}: ${t.shift()}`),t.forEach((o=>console.log("   ",o)))}))}}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/InstanceCounter.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass InstanceCounter_s{constructor(){this.RECORD_ALLOCATIONS=!1}}const InstanceCounter_e=new InstanceCounter_s;class InstanceCounter_n{constructor(){for(this._current=new Array,this._max=new Array,this._allocations=new AllocationTracer_o(InstanceCounter_e.RECORD_ALLOCATIONS);this._current.length<webgl_enums/* ResourceType.COUNT */._g.COUNT;)this._current.push(0),this._max.push(0)}resetMax(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)}increment(t,r){const s=++this._current[t];this._max[t]=Math.max(s,this._max[t]),this._allocations.add(r)}decrement(t,r){--this._current[t],this._allocations.remove(r)}get max(){return this._max}get current(){return this._current}get total(){return this.current.reduce(((t,r)=>t+r),0)}printResourceCount(){if(this.total>0){console.log("Live objects:");for(let t=0;t<webgl_enums/* ResourceType.COUNT */._g.COUNT;++t){const s=this._current[t];s>0&&console.log(`${webgl_enums/* ResourceType */._g[t]}: ${s}`)}}this._allocations.print()}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/renderState.js\nvar renderState = __webpack_require__(17346);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/Util.js\nvar Util = __webpack_require__(62486);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/vec3f64.js\nvar vec3f64 = __webpack_require__(8909);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/doublePrecisionUtils.js\nvar doublePrecisionUtils = __webpack_require__(30560);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/testDoublePrecisionArithmetic.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction A(A,_){const g=new FramebufferObject/* FramebufferObject */.X(A,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.NONE */.OU.NONE},{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,samplingMode:webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,width:1,height:1});function B(n,e){const o=`\\n\\n  precision highp float;\\n\\n  attribute vec2 position;\\n\\n  uniform vec3 u_highA;\\n  uniform vec3 u_lowA;\\n  uniform vec3 u_highB;\\n  uniform vec3 u_lowB;\\n\\n  varying vec4 v_color;\\n\\n  ${_?"#define DOUBLE_PRECISION_REQUIRES_OBFUSCATION":""}\\n\\n  #ifdef DOUBLE_PRECISION_REQUIRES_OBFUSCATION\\n\\n  vec3 dpPlusFrc(vec3 a, vec3 b) {\\n    return mix(a, a + b, vec3(notEqual(b, vec3(0))));\\n  }\\n\\n  vec3 dpMinusFrc(vec3 a, vec3 b) {\\n    return mix(vec3(0), a - b, vec3(notEqual(a, b)));\\n  }\\n\\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\\n    vec3 t1 = dpPlusFrc(hiA, hiB);\\n    vec3 e = dpMinusFrc(t1, hiA);\\n    vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\\n    return t1 + t2;\\n  }\\n\\n  #else\\n\\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\\n    vec3 t1 = hiA + hiB;\\n    vec3 e = t1 - hiA;\\n    vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\\n    return t1 + t2;\\n  }\\n\\n  #endif\\n\\n  const float MAX_RGBA_FLOAT =\\n    255.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 / 256.0 / 256.0;\\n\\n  const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\\n\\n  vec4 float2rgba(const float value) {\\n    // Make sure value is in the domain we can represent\\n    float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\\n\\n    // Decompose value in 32bit fixed point parts represented as\\n    // uint8 rgba components. Decomposition uses the fractional part after multiplying\\n    // by a power of 256 (this removes the bits that are represented in the previous\\n    // component) and then converts the fractional part to 8bits.\\n    vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\\n\\n    // Convert uint8 values (from 0 to 255) to floating point representation for\\n    // the shader\\n    const float toU8AsFloat = 1.0 / 255.0;\\n\\n    return fixedPointU8 * toU8AsFloat;\\n  }\\n\\n  void main() {\\n    vec3 val = dpAdd(u_highA, u_lowA, -u_highB, -u_lowB);\\n\\n    v_color = float2rgba(val.z / 25.0);\\n\\n    gl_Position = vec4(position * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  `,r="\\n  precision highp float;\\n\\n  varying vec4 v_color;\\n\\n  void main() {\\n    gl_FragColor = v_color;\\n  }\\n  ",i=A.programCache.acquire(o,r,new Map([["position",0]])),a=new Float32Array(6);(0,doublePrecisionUtils/* encodeDoubleArray */.LF)(n,a,3);const c=new Float32Array(6);return (0,doublePrecisionUtils/* encodeDoubleArray */.LF)(e,c,3),A.useProgram(i),i.setUniform3f("u_highA",a[0],a[2],a[4]),i.setUniform3f("u_lowA",a[1],a[3],a[5]),i.setUniform3f("u_highB",c[0],c[2],c[4]),i.setUniform3f("u_lowB",c[1],c[3],c[5]),i}const E=BufferObject/* BufferObject.createVertex */.f.createVertex(A,webgl_enums/* Usage.STATIC_DRAW */.l1.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),b=new VertexArrayObject/* VertexArrayObject */.U(A,new Map([["position",0]]),{geometry:[new VertexElementDescriptor/* VertexElementDescriptor */.G("position",2,webgl_enums/* DataType.UNSIGNED_SHORT */.g.UNSIGNED_SHORT,0,4)]},{geometry:E}),F=(0,vec3f64.f)(5633261.287538229,2626832.878767164,1434988.0495278358),w=(0,vec3f64.f)(5633271.46742708,2626873.6381334523,1434963.231608387),T=B(F,w),O=A.getBoundFramebufferObject(),{x:U,y:I,width:R,height:N}=A.getViewport();A.bindFramebuffer(g),A.setViewport(0,0,1,1),A.bindVAO(b),A.drawArrays(webgl_enums/* PrimitiveType.TRIANGLE_STRIP */.MX.TRIANGLE_STRIP,0,4);const S=new Uint8Array(4);g.readPixels(0,0,1,1,webgl_enums/* PixelFormat.RGBA */.VI.RGBA,webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,S),T.dispose(),b.dispose(!1),E.dispose(),g.dispose(),A.setViewport(U,I,R,N),A.bindFramebuffer(O);const D=(F[2]-w[2])/25,y=(0,floatRGBA/* unpackFloatRGBA */.v)(S);return Math.abs(D-y)}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js\nvar OrderIndependentTransparency = __webpack_require__(12045);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/testFloatBufferBlend.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nvar T,testFloatBufferBlend_,F,testFloatBufferBlend_v={exports:{}};function x(T){var _,F,x,A,R;if(!T.gl)return!1;if(T.type===context_util/* ContextType.WEBGL1 */.zO.WEBGL1)return!(null==(A=T.capabilities.textureFloat)||!A.textureFloat||null==(R=T.capabilities.colorBufferFloat)||!R.textureFloat);if(!((null==(_=T.capabilities.textureFloat)?void 0:_.textureFloat)&&(null==(F=T.capabilities.colorBufferFloat)?void 0:F.textureFloat)&&(null==(x=T.capabilities.colorBufferFloat)?void 0:x.floatBlend)))return!1;const S=new FramebufferObject/* FramebufferObject */.X(T,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.NONE */.OU.NONE},{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.FLOAT */.Br.FLOAT,internalFormat:webgl_enums/* SizedPixelFormat.RGBA32F */.lP.RGBA32F,samplingMode:webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,width:1,height:1}),h=BufferObject/* BufferObject.createVertex */.f.createVertex(T,webgl_enums/* Usage.STATIC_DRAW */.l1.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),P=new VertexArrayObject/* VertexArrayObject */.U(T,new Map([["a_pos",0]]),{geometry:[new VertexElementDescriptor/* VertexElementDescriptor */.G("a_pos",2,webgl_enums/* DataType.UNSIGNED_SHORT */.g.UNSIGNED_SHORT,0,4)]},{geometry:h}),L="\\n  precision highp float;\\n  attribute vec2 a_pos;\\n\\n  void main() {\\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  ",B="\\n   precision highp float;\\n\\n   void main() {\\n    gl_FragColor = vec4(0.5, 0.5, 0.5, 0.5);\\n   }\\n  ",C=T.programCache.acquire(L,B,new Map([["a_pos",0]]));T.useProgram(C);const w=T.getBoundFramebufferObject(),{x:O,y:N,width:I,height:U}=T.getViewport();T.bindFramebuffer(S),T.setViewport(0,0,1,1),T.bindVAO(P),T.drawArrays(webgl_enums/* PrimitiveType.TRIANGLE_STRIP */.MX.TRIANGLE_STRIP,0,4);const y=(0,renderState/* makePipelineState */.sm)({blending:OrderIndependentTransparency/* blendingAlpha */.IB});T.setPipelineState(y),T.drawArrays(webgl_enums/* PrimitiveType.TRIANGLE_STRIP */.MX.TRIANGLE_STRIP,0,4),testFloatBufferBlend_v.exports.init(T);const D=T.gl.getError();return T.setViewport(O,N,I,U),T.bindFramebuffer(w),C.dispose(),P.dispose(!1),h.dispose(),S.dispose(),1282!==D||(console.warn("Device claims support for WebGL extension EXT_float_blend but does not support it. Using fall back."),!1)}T=testFloatBufferBlend_v,testFloatBufferBlend_=function(){var e=function(e){window.console&&window.console.log&&window.console.log(e)},t=function(t){window.console&&window.console.error?window.console.error(t):e(t)},r={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},n=null,o=null;function i(e){if(null==n)for(var t in n={},o={},e)"number"==typeof e[t]&&(n[e[t]]=t,o[t]=e[t])}function a(){if(null==n)throw"WebGLDebugUtils.init(ctx) not called"}function u(e){return a(),void 0!==n[e]}function f(e){a();var t=n[e];return void 0!==t?"gl."+t:"/*UNKNOWN WebGL ENUM*/ 0x"+e.toString(16)}function l(e,t,n,i){var a;if(void 0!==(a=r[e])&&void 0!==(a=a[t])&&a[n]){if("object"==typeof a[n]&&void 0!==a[n].enumBitwiseOr){for(var u=a[n].enumBitwiseOr,l=0,c=[],s=0;s<u.length;++s){var d=o[u[s]];0!=(i&d)&&(l|=d,c.push(f(d)))}return l===i?c.join(" | "):f(i)}return f(i)}return null===i?"null":void 0===i?"undefined":i.toString()}function c(e,t){for(var r="",n=t.length,o=0;o<n;++o)r+=(0==o?"":", ")+l(e,n,o,t[o]);return r}function s(e,t,r){e.__defineGetter__(r,(function(){return t[r]})),e.__defineSetter__(r,(function(e){t[r]=e}))}function d(e,r,n,o){o=o||e,i(e),r=r||function(e,r,n){for(var o="",i=n.length,a=0;a<i;++a)o+=(0==a?"":", ")+l(r,i,a,n[a]);t("WebGL error "+f(e)+" in "+r+"("+o+")")};var a={};function u(e,t){return function(){n&&n(t,arguments);var i=e[t].apply(e,arguments),u=o.getError();return 0!=u&&(a[u]=!0,r(u,t,arguments)),i}}var c={};for(var g in e)if("function"==typeof e[g])if("getExtension"!=g)c[g]=u(e,g);else{var b=u(e,g);c[g]=function(){return d(b.apply(e,arguments),r,n,o)}}else s(c,e,g);return c.getError=function(){for(var t in a)if(a.hasOwnProperty(t)&&a[t])return a[t]=!1,t;return e.NO_ERROR},c}function g(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);for(var n=0;n<t;++n)e.disableVertexAttribArray(n),e.vertexAttribPointer(n,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(n,0);e.deleteBuffer(r);var o=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(n=0;n<o;++n)e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}function b(e){var t,r,n=[],o=[],i={},a=1,u=!1,f=[],l=0,c=0,d=!1,b=0,E={};function p(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}e.getContext=(r=e.getContext,function(){var n=r.apply(e,arguments);if(n instanceof WebGLRenderingContext){if(n!=t){if(t)throw"got different context";i=S(t=n)}return i}return n});var m=function(e){n.push(p(e))},T=function(e){o.push(p(e))};function _(e){var t=e.addEventListener;e.addEventListener=function(r,n,o){switch(r){case"webglcontextlost":m(n);break;case"webglcontextrestored":T(n);break;default:t.apply(e,arguments)}}}function F(){for(var e=Object.keys(E),t=0;t<e.length;++t)delete E[e]}function v(){++c,u||l==c&&e.loseContext()}function x(e,t){var r=e[t];return function(){if(v(),!u)return r.apply(e,arguments)}}function A(){for(var e=0;e<f.length;++e){var r=f[e];r instanceof WebGLBuffer?t.deleteBuffer(r):r instanceof WebGLFramebuffer?t.deleteFramebuffer(r):r instanceof WebGLProgram?t.deleteProgram(r):r instanceof WebGLRenderbuffer?t.deleteRenderbuffer(r):r instanceof WebGLShader?t.deleteShader(r):r instanceof WebGLTexture&&t.deleteTexture(r)}}function R(e){return{statusMessage:e,preventDefault:function(){d=!0}}}return _(e),e.loseContext=function(){if(!u){for(u=!0,l=0,++a;t.getError(););F(),E[t.CONTEXT_LOST_WEBGL]=!0;var r=R("context lost"),o=n.slice();setTimeout((function(){for(var t=0;t<o.length;++t)o[t](r);b>=0&&setTimeout((function(){e.restoreContext()}),b)}),0)}},e.restoreContext=function(){u&&o.length&&setTimeout((function(){if(!d)throw"can not restore. webglcontestlost listener did not call event.preventDefault";A(),g(t),u=!1,c=0,d=!1;for(var e=o.slice(),r=R("context restored"),n=0;n<e.length;++n)e[n](r)}),0)},e.loseContextInNCalls=function(e){if(u)throw"You can not ask a lost contet to be lost";l=c+e},e.getNumCalls=function(){return c},e.setRestoreTimeout=function(e){b=e},e;function S(e){for(var r in e)"function"==typeof e[r]?i[r]=x(e,r):s(i,e,r);i.getError=function(){if(v(),!u)for(;e=t.getError();)E[e]=!0;for(var e in E)if(E[e])return delete E[e],e;return i.NO_ERROR};for(var n=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],o=0;o<n.length;++o){var l=n[o];i[l]=function(t){return function(){if(v(),u)return null;var r=t.apply(e,arguments);return r.__webglDebugContextLostId__=a,f.push(r),r}}(e[l])}var c=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];for(o=0;o<c.length;++o)l=c[o],i[l]=function(t){return function(){return v(),u?null:t.apply(e,arguments)}}(i[l]);var d=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];for(o=0;o<d.length;++o)l=d[o],i[l]=function(t){return function(){return v(),!u&&t.apply(e,arguments)}}(i[l]);return i.checkFramebufferStatus=function(t){return function(){return v(),u?i.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(i.checkFramebufferStatus),i.getAttribLocation=function(t){return function(){return v(),u?-1:t.apply(e,arguments)}}(i.getAttribLocation),i.getVertexAttribOffset=function(t){return function(){return v(),u?0:t.apply(e,arguments)}}(i.getVertexAttribOffset),i.isContextLost=function(){return u},i}}return{init:i,mightBeEnum:u,glEnumToString:f,glFunctionArgToString:l,glFunctionArgsToString:c,makeDebugContext:d,makeLostContextSimulatingCanvas:b,resetToInitialState:g}},void 0!==(F=testFloatBufferBlend_())&&(T.exports=F);\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/testSamplerPrecision.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst testSamplerPrecision_w=Logger/* default.getLogger */.Z.getLogger("esri.views.WebGLDriverTest");function testSamplerPrecision_h(e){const h=new FramebufferObject/* FramebufferObject */.X(e,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.NONE */.OU.NONE},{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,samplingMode:webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,width:1,height:1}),T="\\nprecision highp float;\\nattribute vec2 a_pos;\\nuniform highp sampler2D u_texture;\\nvarying vec4 v_color;\\n\\nfloat getBit(in float bitset, in int bitIndex) {\\n  float offset = pow(2.0, float(bitIndex));\\n  return mod(floor(bitset / offset), 2.0);\\n}\\n\\nvoid main() {\\n  vec4 value = texture2D(u_texture, vec2(0.0));\\n  float bit = getBit(value.x * 255.0, 1);\\n\\n  v_color = bit * vec4(1.0);\\n  gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n}\\n",_="\\nprecision highp float;\\nvarying vec4 v_color;\\n\\nvoid main() {\\n  gl_FragColor = v_color;\\n}\\n",v=new Uint8Array(4),b=BufferObject/* BufferObject.createVertex */.f.createVertex(e,webgl_enums/* Usage.STATIC_DRAW */.l1.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),E=new VertexArrayObject/* VertexArrayObject */.U(e,new Map([["a_position",0]]),{geometry:[new VertexElementDescriptor/* VertexElementDescriptor */.G("a_position",2,webgl_enums/* DataType.SHORT */.g.SHORT,0,4)]},{geometry:b}),A=e.programCache.acquire(T,_,new Map([["a_pos",0]]));e.useProgram(A);const x=new Texture/* Texture */.x(e,{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,samplingMode:webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,width:1,height:1},new Uint8Array([2,255,0,0]));A.setUniform1i("u_texture",0),e.bindTexture(x,0);const y=e.getBoundFramebufferObject();e.bindFramebuffer(h),e.useProgram(A);const{x:D,y:R,width:j,height:N}=e.getViewport();e.setViewport(0,0,1,1),e.bindVAO(E),e.drawArrays(webgl_enums/* PrimitiveType.TRIANGLE_STRIP */.MX.TRIANGLE_STRIP,0,4),e.setViewport(D,R,j,N),h.readPixels(0,0,1,1,webgl_enums/* PixelFormat.RGBA */.VI.RGBA,webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,v),A.dispose(),E.dispose(!1),b.dispose(),h.dispose();const B=255!==v[0]||255!==v[1]||255!==v[2]||255!==v[3];return B&&testSamplerPrecision_w.warn(`A problem was detected with your graphics driver. Your driver does not appear to honor sampler precision specifiers, which may result in rendering issues due to numerical instability. We recommend ensuring that your drivers have been updated to the latest version. Applying lowp sampler workaround. [${v[0]}.${v[1]}.${v[2]}.${v[3]}]`),e.bindFramebuffer(y),B}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/testSVGPremultipliedAlpha.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nasync function testSVGPremultipliedAlpha_f(f){const w=new Image;if(w.src="data:image/svg+xml,%3C%3Fxml version=\'1.0\' encoding=\'UTF-8\'%3F%3E%3Csvg width=\'5\' height=\'5\' version=\'1.1\' viewBox=\'0 0 5 5\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Crect width=\'5\' height=\'5\' fill=\'%23f00\' fill-opacity=\'.5\'/%3E%3C/svg%3E%0A",w.width=5,w.height=5,await w.decode(),!f.gl)return!0;const _=new FramebufferObject/* FramebufferObject */.X(f,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.NONE */.OU.NONE},{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,samplingMode:webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,width:1,height:1}),E=BufferObject/* BufferObject.createVertex */.f.createVertex(f,webgl_enums/* Usage.STATIC_DRAW */.l1.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),h=new VertexArrayObject/* VertexArrayObject */.U(f,new Map([["a_pos",0]]),DefaultVertexAttributeLayouts/* Pos2us */.cD,{geometry:E}),v="\\n  precision highp float;\\n\\n  attribute vec2 a_pos;\\n  varying vec2 v_uv;\\n\\n  void main() {\\n    v_uv = a_pos;\\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  ",T="\\n  precision highp float;\\n\\n  varying vec2 v_uv;\\n  uniform sampler2D u_texture;\\n\\n  void main() {\\n    gl_FragColor = texture2D(u_texture, v_uv);\\n  }\\n  ",x=f.programCache.acquire(v,T,new Map([["a_pos",0]]));f.useProgram(x);const A=new Texture/* Texture */.x(f,{dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,preMultiplyAlpha:!1,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR},w);f.bindTexture(A,0),x.setUniform1i("u_texture",0);const b=f.getBoundFramebufferObject(),{x:y,y:B,width:C,height:F}=f.getViewport();f.bindFramebuffer(_),f.setViewport(0,0,1,1),f.setClearColor(0,0,0,0),f.setBlendingEnabled(!1),f.clearSafe(webgl_enums/* ClearBufferBit.COLOR_BUFFER_BIT */.lk.COLOR_BUFFER_BIT),f.bindVAO(h),f.drawArrays(webgl_enums/* PrimitiveType.TRIANGLE_STRIP */.MX.TRIANGLE_STRIP,0,4);const R=new Uint8Array(4);return _.readPixels(0,0,1,1,webgl_enums/* PixelFormat.RGBA */.VI.RGBA,webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,R),x.dispose(),h.dispose(!1),E.dispose(),_.dispose(),A.dispose(),f.setViewport(y,B,C,F),f.bindFramebuffer(b),w.src="",255===R[0]}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/WebGLDriverTest.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass WebGLDriverTest_o{constructor(e){this.context=e,this._floatBufferBlendWorking=x(e),testSVGPremultipliedAlpha_f(e).then((e=>this._svgAlwaysPremultipliesAlpha=!e))}get floatBufferBlendWorking(){if((0,maybe/* isNone */.Wi)(this._floatBufferBlendWorking))throw new Error("floatBufferBlendWorking test not yet available");return this._floatBufferBlendWorking}get svgAlwaysPremultipliesAlpha(){if((0,maybe/* isNone */.Wi)(this._svgAlwaysPremultipliesAlpha))throw new Error("svgAlwaysPremultipliesAlpha test not yet available");return this._svgAlwaysPremultipliesAlpha}get doublePrecisionRequiresObfuscation(){if((0,maybe/* isNone */.Wi)(this._doublePrecisionRequiresObfuscation)){const e=A(this.context,!1),i=A(this.context,!0);this._doublePrecisionRequiresObfuscation=0!==e&&(0===i||e/i>5)}return this._doublePrecisionRequiresObfuscation}get ignoresSamplerPrecision(){return (0,maybe/* isNone */.Wi)(this._ignoresSamplerPrecision)&&(this._ignoresSamplerPrecision=testSamplerPrecision_h(this.context)),this._ignoresSamplerPrecision}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/capabilities/DrawBuffers.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction DrawBuffers_A(A,_){if(_.disjointTimerQuery)return null;if((0,isWebGL2Context/* default */.Z)(A))return{drawBuffers:A.drawBuffers.bind(A),MAX_DRAW_BUFFERS:A.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:A.MAX_COLOR_ATTACHMENTS};if(_.drawBuffers)return null;const e=A.getExtension("WEBGL_draw_buffers");return e?{drawBuffers:e.drawBuffersWEBGL.bind(e),MAX_DRAW_BUFFERS:e.MAX_DRAW_BUFFERS_WEBGL,MAX_COLOR_ATTACHMENTS:e.MAX_COLOR_ATTACHMENTS_WEBGL}:null}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/capabilities/Instancing.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction Instancing_r(r){if((0,isWebGL2Context/* default */.Z)(r))return{drawArraysInstanced:r.drawArraysInstanced.bind(r),drawElementsInstanced:r.drawElementsInstanced.bind(r),vertexAttribDivisor:r.vertexAttribDivisor.bind(r)};const t=r.getExtension("ANGLE_instanced_arrays");return t?{drawArraysInstanced:t.drawArraysInstancedANGLE.bind(t),drawElementsInstanced:t.drawElementsInstancedANGLE.bind(t),vertexAttribDivisor:t.vertexAttribDivisorANGLE.bind(t)}:null}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/capabilities/load.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction load_(t,_){if(_.compressedTextureETC)return null;const e=t.getExtension("WEBGL_compressed_texture_etc");return e?{COMPRESSED_R11_EAC:e.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:e.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:e.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:e.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:e.COMPRESSED_RGB8_ETC2,COMPRESSED_SRGB8_ETC2:e.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:e.COMPRESSED_RGBA8_ETC2_EAC,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null}function load_e(t,_){if(_.compressedTextureS3TC)return null;const e=t.getExtension("WEBGL_compressed_texture_s3tc");return e?{COMPRESSED_RGB_S3TC_DXT1:e.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:e.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:e.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:e.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}function load_E(_,e){if((0,isWebGL2Context/* default */.Z)(_))return{MIN:_.MIN,MAX:_.MAX};if(e.blendMinMax)return null;{const t=_.getExtension("EXT_blend_minmax");return t?{MIN:t.MIN_EXT,MAX:t.MAX_EXT}:null}}function load_n(t,_){if(_.textureFilterAnisotropic)return null;const e=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");return e?{MAX_TEXTURE_MAX_ANISOTROPY:e.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:e.TEXTURE_MAX_ANISOTROPY_EXT}:null}function R(_,e){if((0,isWebGL2Context/* default */.Z)(_))return{textureFloat:!0,textureFloatLinear:!e.textureFloatLinear&&!!_.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!_.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:_.HALF_FLOAT,R16F:_.R16F,RG16F:_.RG16F,RGBA16F:_.RGBA16F,R32F:_.R32F,RG32F:_.RG32F,RGBA32F:_.RGBA32F,R11F_G11F_B10F:_.R11F_G11F_B10F,RGB16F:_.RGB16F};if(_ instanceof WebGLRenderingContext){const t=!e.textureHalfFloat&&_.getExtension("OES_texture_half_float");return{textureFloat:!e.textureFloat&&!!_.getExtension("OES_texture_float"),textureFloatLinear:!e.textureFloatLinear&&!!_.getExtension("OES_texture_float_linear"),textureHalfFloat:!!t,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!_.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:t?t.HALF_FLOAT_OES:void 0}}return null}function load_r(_,e){if((0,isWebGL2Context/* default */.Z)(_)){const t=!e.colorBufferFloat&&_.getExtension("EXT_color_buffer_half_float"),E=!e.colorBufferFloat&&_.getExtension("EXT_color_buffer_float"),n=!e.floatBlend&&!e.colorBufferFloat&&_.getExtension("EXT_float_blend");return t||E||n?{textureFloat:!!E,textureHalfFloat:!!t,floatBlend:!!n,R16F:_.R16F,RG16F:_.RG16F,RGBA16F:_.RGBA16F,R32F:_.R32F,RG32F:_.RG32F,RGBA32F:_.RGBA32F,R11F_G11F_B10F:_.R11F_G11F_B10F,RGB16F:_.RGB16F}:null}if(_ instanceof WebGLRenderingContext){const t=!e.colorBufferFloat&&_.getExtension("EXT_color_buffer_half_float"),E=!e.colorBufferFloat&&_.getExtension("WEBGL_color_buffer_float"),n=!e.floatBlend&&!e.colorBufferFloat&&_.getExtension("EXT_float_blend");return t||E||n?{textureFloat:!!E,textureHalfFloat:!!t,floatBlend:!!n,RGBA16F:t?t.RGBA16F_EXT:void 0,RGB16F:t?t.RGB16F_EXT:void 0,RGBA32F:E?E.RGBA32F_EXT:void 0}:null}return null}function load_o(_,e,E,n,R){if(n&&(0,isWebGL2Context/* default */.Z)(_))return!0;if(e[E])return!1;for(const t of R)if(_.getExtension(t))return!0;return!1}function load_l(_,e){if(!(0,isWebGL2Context/* default */.Z)(_))return null;if(e.textureNorm16)return null;const E=_.getExtension("EXT_texture_norm16");return E?{R16:E.R16_EXT,RG16:E.RG16_EXT,RGB16:E.RGB16_EXT,RGBA16:E.RGBA16_EXT,R16_SNORM:E.R16_SNORM_EXT,RG16_SNORM:E.RG16_SNORM_EXT,RGB16_SNORM:E.RGB16_SNORM_EXT,RGBA16_SNORM:E.RGBA16_SNORM_EXT}:null}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/capabilities/LoseContext.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction LoseContext_e(e,t){const n=t.loseContext&&e.getExtension("WEBGL_lose_context");return n?{loseRenderingContext:()=>n.loseContext()}:null}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/capabilities/VertexArrayObjects.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction VertexArrayObjects_r(r,t){if((0,isWebGL2Context/* default */.Z)(r))return{createVertexArray:r.createVertexArray.bind(r),deleteVertexArray:r.deleteVertexArray.bind(r),bindVertexArray:r.bindVertexArray.bind(r)};if(t.vao)return null;const n=r.getExtension("OES_vertex_array_object")||r.getExtension("MOZ_OES_vertex_array_object")||r.getExtension("WEBKIT_OES_vertex_array_object");return n?{createVertexArray:n.createVertexArrayOES.bind(n),deleteVertexArray:n.deleteVertexArrayOES.bind(n),bindVertexArray:n.bindVertexArrayOES.bind(n)}:null}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/capabilities/Capabilities.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass Capabilities_x{constructor(t,e){this.gl=t,this._depthTexture=null,this._standardDerivatives=null,this._shaderTextureLOD=null,this._fragDepth=null,this._disabledExtensions=e.disabledExtensions||{},this._debugWebGLExtensions=e.debugWebGLExtensions||{}}get drawBuffers(){return this._drawBuffers||(this._drawBuffers=DrawBuffers_A(this.gl,this._disabledExtensions)),this._drawBuffers}get instancing(){return this._instancing||(this._instancing=Instancing_r(this.gl)),this._instancing}get vao(){return this._vertexArrayObject||(this._vertexArrayObject=VertexArrayObjects_r(this.gl,this._disabledExtensions)),this._vertexArrayObject}get compressedTextureETC(){return this._compressedTextureETC||(this._compressedTextureETC=load_(this.gl,this._disabledExtensions)),this._compressedTextureETC}get compressedTextureS3TC(){return this._compressedTextureS3TC||(this._compressedTextureS3TC=load_e(this.gl,this._disabledExtensions)),this._compressedTextureS3TC}get textureFilterAnisotropic(){return this._textureFilterAnisotropic||(this._textureFilterAnisotropic=load_n(this.gl,this._disabledExtensions)),this._textureFilterAnisotropic}get disjointTimerQuery(){return this._disjointTimerQuery||(this._disjointTimerQuery=DisjointTimerQuery_t(this.gl,this._disabledExtensions)),this._disjointTimerQuery}get textureFloat(){return this._textureFloat||(this._textureFloat=R(this.gl,this._disabledExtensions)),this._textureFloat}get colorBufferFloat(){return this._colorBufferFloat||(this._colorBufferFloat=load_r(this.gl,this._disabledExtensions)),this._colorBufferFloat}get blendMinMax(){return this._minMaxBlending||(this._minMaxBlending=load_E(this.gl,this._disabledExtensions)),this._minMaxBlending}get depthTexture(){return null===this._depthTexture&&(this._depthTexture=load_o(this.gl,this._disabledExtensions,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"])),this._depthTexture}get standardDerivatives(){return null===this._standardDerivatives&&(this._standardDerivatives=load_o(this.gl,this._disabledExtensions,"standardDerivatives",!0,["OES_standard_derivatives"])),this._standardDerivatives}get shaderTextureLOD(){return null===this._shaderTextureLOD&&(this._shaderTextureLOD=load_o(this.gl,this._disabledExtensions,"shaderTextureLOD",!0,["EXT_shader_texture_lod"])),this._shaderTextureLOD}get fragDepth(){return null===this._fragDepth&&(this._fragDepth=load_o(this.gl,this._disabledExtensions,"fragDepth",!0,["EXT_frag_depth"])),this._fragDepth}get loseContext(){return this._loseContext||(this._loseContext=LoseContext_e(this.gl,this._debugWebGLExtensions)),this._loseContext}get textureNorm16(){return this._textureNorm16||(this._textureNorm16=load_l(this.gl,this._disabledExtensions)),this._textureNorm16}enable(t){return this[t]}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/RenderingContext.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass RenderingContext_k{constructor(t,e){this.gl=t,this.instanceCounter=new InstanceCounter_n,this.programCache=new ProgramCache/* ProgramCache */.G(this),this._state=new ContextState_h,this._numOfDrawCalls=0,this._numOfTriangles=0,this.type=(0,isWebGL2Context/* default */.Z)(t)?context_util/* ContextType.WEBGL2 */.zO.WEBGL2:context_util/* ContextType.WEBGL1 */.zO.WEBGL1,this._loadExtensions(),this.configure(e)}configure(t){this._capabilities=new Capabilities_x(this.gl,t),this._parameters=this._loadParameters(t);const e=this.gl.getParameter(this.gl.VIEWPORT);this._state=new ContextState_h,this._state.viewport={x:e[0],y:e[1],width:e[2],height:e[3]},this._stateTracker=new renderState/* StateTracker */.jp({setBlending:t=>{if(t){this.setBlendingEnabled(!0),this.setBlendEquationSeparate(t.opRgb,t.opAlpha),this.setBlendFunctionSeparate(t.srcRgb,t.dstRgb,t.srcAlpha,t.dstAlpha);const e=t.color;this.setBlendColor(e.r,e.g,e.b,e.a)}else this.setBlendingEnabled(!1)},setCulling:t=>{t?(this.setFaceCullingEnabled(!0),this.setCullFace(t.face),this.setFrontFace(t.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:t=>{t?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(t.factor,t.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:t=>{t?(this.setDepthTestEnabled(!0),this.setDepthFunction(t.func)):this.setDepthTestEnabled(!1)},setStencilTest:t=>{if(t){this.setStencilTestEnabled(!0);const e=t.function;this.setStencilFunction(e.func,e.ref,e.mask);const s=t.operation;this.setStencilOp(s.fail,s.zFail,s.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:t=>{t?(this.setDepthWriteEnabled(!0),this.setDepthRange(t.zNear,t.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:t=>{t?this.setColorMask(t.r,t.g,t.b,t.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:t=>{t?this.setStencilWriteMask(t.mask):this.setStencilWriteMask(0)}}),this.enforceState(),this._driverTest=new WebGLDriverTest_o(this)}get driverTest(){return this._driverTest}get contextAttributes(){return this.gl.getContextAttributes()}get parameters(){return this._parameters}dispose(){this.programCache.dispose(),this.bindVAO(null),this.unbindBuffer(webgl_enums/* BufferType.ARRAY_BUFFER */.w0.ARRAY_BUFFER),this.unbindBuffer(webgl_enums/* BufferType.ELEMENT_ARRAY_BUFFER */.w0.ELEMENT_ARRAY_BUFFER),(0,isWebGL2Context/* default */.Z)(this.gl)&&(this.unbindBuffer(webgl_enums/* BufferType.UNIFORM_BUFFER */.w0.UNIFORM_BUFFER),this._state.uniformBufferBindingPoints.length=0,this.unbindBuffer(webgl_enums/* BufferType.PIXEL_PACK_BUFFER */.w0.PIXEL_PACK_BUFFER),this.unbindBuffer(webgl_enums/* BufferType.PIXEL_UNPACK_BUFFER */.w0.PIXEL_UNPACK_BUFFER),this.unbindBuffer(webgl_enums/* BufferType.COPY_READ_BUFFER */.w0.COPY_READ_BUFFER),this.unbindBuffer(webgl_enums/* BufferType.COPY_WRITE_BUFFER */.w0.COPY_WRITE_BUFFER)),this._state.textureUnitMap.length=0,(0,checkWebGLError/* webglDebugEnabled */.hZ)()&&this.instanceCounter.printResourceCount()}setPipelineState(t){this._stateTracker.setPipeline(t)}setBlendingEnabled(t){this._state.blend!==t&&(!0===t?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._state.blend=t,this._stateTracker.invalidateBlending())}externalProgramUpdate(){var t;null==(t=this._state.program)||t.stop(),this._state.program=null}externalTextureUnitUpdate(t,e){for(let s=0;s<t.length;++s)this._state.textureUnitMap[t[s]]=null;e>=0&&(this._state.activeTexture=e)}externalVertexArrayObjectUpdate(){const t=this.capabilities.vao;t&&(t.bindVertexArray(null),this._state.vertexArrayObject=null),this._state.vertexBuffer=null,this._state.indexBuffer=null}externalVertexBufferUpdate(){this._state.vertexBuffer=null}externalIndexBufferUpdate(){this._state.indexBuffer=null}setBlendColor(t,e,s,i){t===this._state.blendColor.r&&e===this._state.blendColor.g&&s===this._state.blendColor.b&&i===this._state.blendColor.a||(this.gl.blendColor(t,e,s,i),this._state.blendColor.r=t,this._state.blendColor.g=e,this._state.blendColor.b=s,this._state.blendColor.a=i,this._stateTracker.invalidateBlending())}setBlendFunction(t,e){t===this._state.blendFunction.srcRGB&&e===this._state.blendFunction.dstRGB||(this.gl.blendFunc(t,e),this._state.blendFunction.srcRGB=t,this._state.blendFunction.srcAlpha=t,this._state.blendFunction.dstRGB=e,this._state.blendFunction.dstAlpha=e,this._stateTracker.invalidateBlending())}setBlendFunctionSeparate(t,e,s,i){this._state.blendFunction.srcRGB===t&&this._state.blendFunction.srcAlpha===s&&this._state.blendFunction.dstRGB===e&&this._state.blendFunction.dstAlpha===i||(this.gl.blendFuncSeparate(t,e,s,i),this._state.blendFunction.srcRGB=t,this._state.blendFunction.srcAlpha=s,this._state.blendFunction.dstRGB=e,this._state.blendFunction.dstAlpha=i,this._stateTracker.invalidateBlending())}setBlendEquation(t){this._state.blendEquation.mode!==t&&(this.gl.blendEquation(t),this._state.blendEquation.mode=t,this._state.blendEquation.modeAlpha=t,this._stateTracker.invalidateBlending())}setBlendEquationSeparate(t,e){this._state.blendEquation.mode===t&&this._state.blendEquation.modeAlpha===e||(this.gl.blendEquationSeparate(t,e),this._state.blendEquation.mode=t,this._state.blendEquation.modeAlpha=e,this._stateTracker.invalidateBlending())}setColorMask(t,e,s,i){this._state.colorMask.r===t&&this._state.colorMask.g===e&&this._state.colorMask.b===s&&this._state.colorMask.a===i||(this.gl.colorMask(t,e,s,i),this._state.colorMask.r=t,this._state.colorMask.g=e,this._state.colorMask.b=s,this._state.colorMask.a=i,this._stateTracker.invalidateColorWrite())}setClearColor(t,e,s,i){this._state.clearColor.r===t&&this._state.clearColor.g===e&&this._state.clearColor.b===s&&this._state.clearColor.a===i||(this.gl.clearColor(t,e,s,i),this._state.clearColor.r=t,this._state.clearColor.g=e,this._state.clearColor.b=s,this._state.clearColor.a=i)}setFaceCullingEnabled(t){this._state.faceCulling!==t&&(!0===t?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._state.faceCulling=t,this._stateTracker.invalidateCulling())}setPolygonOffsetFillEnabled(t){this._state.polygonOffsetFill!==t&&(!0===t?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._state.polygonOffsetFill=t,this._stateTracker.invalidatePolygonOffset())}setPolygonOffset(t,e){this._state.polygonOffset[0]===t&&this._state.polygonOffset[1]===e||(this._state.polygonOffset[0]=t,this._state.polygonOffset[1]=e,this.gl.polygonOffset(t,e),this._stateTracker.invalidatePolygonOffset())}setCullFace(t){this._state.cullFace!==t&&(this.gl.cullFace(t),this._state.cullFace=t,this._stateTracker.invalidateCulling())}setFrontFace(t){this._state.frontFace!==t&&(this.gl.frontFace(t),this._state.frontFace=t,this._stateTracker.invalidateCulling())}setScissorTestEnabled(t){this._state.scissorTest!==t&&(!0===t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._state.scissorTest=t)}setScissorRect(t,e,s,i){this._state.scissorRect.x===t&&this._state.scissorRect.y===e&&this._state.scissorRect.width===s&&this._state.scissorRect.height===i||(this.gl.scissor(t,e,s,i),this._state.scissorRect.x=t,this._state.scissorRect.y=e,this._state.scissorRect.width=s,this._state.scissorRect.height=i)}setDepthTestEnabled(t){this._state.depthTest!==t&&(!0===t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._state.depthTest=t,this._stateTracker.invalidateDepthTest())}setClearDepth(t){this._state.clearDepth!==t&&(this.gl.clearDepth(t),this._state.clearDepth=t)}setDepthFunction(t){this._state.depthFunction!==t&&(this.gl.depthFunc(t),this._state.depthFunction=t,this._stateTracker.invalidateDepthTest())}setDepthWriteEnabled(t){this._state.depthWrite!==t&&(this.gl.depthMask(t),this._state.depthWrite=t,this._stateTracker.invalidateDepthWrite())}setDepthRange(t,e){this._state.depthRange.zNear===t&&this._state.depthRange.zFar===e||(this.gl.depthRange(t,e),this._state.depthRange.zNear=t,this._state.depthRange.zFar=e,this._stateTracker.invalidateDepthWrite())}setStencilTestEnabled(t){this._state.stencilTest!==t&&(!0===t?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._state.stencilTest=t,this._stateTracker.invalidateStencilTest())}setClearStencil(t){t!==this._state.clearStencil&&(this.gl.clearStencil(t),this._state.clearStencil=t)}setStencilFunction(t,e,s){this._state.stencilFunction.func===t&&this._state.stencilFunction.ref===e&&this._state.stencilFunction.mask===s||(this.gl.stencilFunc(t,e,s),this._state.stencilFunction.face=webgl_enums/* Face.FRONT_AND_BACK */.LR.FRONT_AND_BACK,this._state.stencilFunction.func=t,this._state.stencilFunction.ref=e,this._state.stencilFunction.mask=s,this._stateTracker.invalidateStencilTest())}setStencilFunctionSeparate(t,e,s,i){this._state.stencilFunction.face===t&&this._state.stencilFunction.func===e&&this._state.stencilFunction.ref===s&&this._state.stencilFunction.mask===i||(this.gl.stencilFuncSeparate(t,e,s,i),this._state.stencilFunction.face=t,this._state.stencilFunction.func=e,this._state.stencilFunction.ref=s,this._state.stencilFunction.mask=i,this._stateTracker.invalidateStencilTest())}setStencilWriteMask(t){this._state.stencilWriteMask!==t&&(this.gl.stencilMask(t),this._state.stencilWriteMask=t,this._stateTracker.invalidateStencilWrite())}setStencilOp(t,e,s){this._state.stencilOperation.face===webgl_enums/* Face.FRONT_AND_BACK */.LR.FRONT_AND_BACK&&this._state.stencilOperation.fail===t&&this._state.stencilOperation.zFail===e&&this._state.stencilOperation.zPass===s||(this.gl.stencilOp(t,e,s),this._state.stencilOperation.face=webgl_enums/* Face.FRONT_AND_BACK */.LR.FRONT_AND_BACK,this._state.stencilOperation.fail=t,this._state.stencilOperation.zFail=e,this._state.stencilOperation.zPass=s,this._stateTracker.invalidateStencilTest())}setStencilOpSeparate(t,e,s,i){this._state.stencilOperation.face===t&&this._state.stencilOperation.fail===e&&this._state.stencilOperation.zFail===s&&this._state.stencilOperation.zPass===i||(this.gl.stencilOpSeparate(t,e,s,i),this._state.stencilOperation.face=t,this._state.stencilOperation.fail=e,this._state.stencilOperation.zFail=s,this._state.stencilOperation.zPass=i,this._stateTracker.invalidateStencilTest())}setActiveTexture(t,e=!1){const s=this._state.activeTexture;return t>=0&&(e||t!==this._state.activeTexture)&&(this.gl.activeTexture(webgl_enums/* BASE_TEXTURE_UNIT */.Ld+t),this._state.activeTexture=t),s}clear(t){t&&this.gl.clear(t)}clearSafe(t,e=255){t&&(t&webgl_enums/* ClearBufferBit.COLOR_BUFFER_BIT */.lk.COLOR_BUFFER_BIT&&this.setColorMask(!0,!0,!0,!0),t&webgl_enums/* ClearBufferBit.DEPTH_BUFFER_BIT */.lk.DEPTH_BUFFER_BIT&&this.setDepthWriteEnabled(!0),t&webgl_enums/* ClearBufferBit.STENCIL_BUFFER_BIT */.lk.STENCIL_BUFFER_BIT&&this.setStencilWriteMask(e),this.gl.clear(t))}drawArrays(t,e,s){if((0,checkWebGLError/* webglDebugEnabled */.hZ)()&&(this._numOfDrawCalls++,this._numOfTriangles+=I(t,s)),this.gl.drawArrays(t,e,s),(0,checkWebGLError/* webglDebugEnabled */.hZ)()){const t=(0,Util/* getErrorString */.HH)(this);t&&console.error("drawArrays:",t)}}drawElements(e,s,i,a){if((0,checkWebGLError/* webglDebugEnabled */.hZ)()&&(this._numOfDrawCalls++,this._numOfTriangles+=I(e,s)),this.gl.drawElements(e,s,i,a),(0,checkWebGLError/* webglDebugEnabled */.hZ)()){const n=(0,Util/* getErrorString */.HH)(this);if(n){var r;const l=this.getBoundVAO(),h=null==l?void 0:l.indexBuffer,f={indexBuffer:h,vertexBuffers:null==l?void 0:l.vertexBuffers},o={mode:e,count:s,type:i,offset:a},u=null!=(r=(0,maybe/* applySome */.yw)(h,(t=>t.size)))?r:0,_=a+s,c=u<_?`. Buffer is too small. Attempted to draw index ${_} of ${u}`:"";console.error(`drawElements: ${n}${c}`,{args:o,vao:f})}}}logIno(){(0,checkWebGLError/* webglDebugEnabled */.hZ)()&&console.log(`DrawCalls: ${this._numOfDrawCalls}, Triangles: ${this._numOfTriangles}`)}get capabilities(){return this._capabilities}setViewport(t,e,s,i){s=Math.max(Math.round(s),1),i=Math.max(Math.round(i),1);const a=this._state.viewport;a.x===t&&a.y===e&&a.width===s&&a.height===i||(a.x=t,a.y=e,a.width=s,a.height=i,this.gl.viewport(t,e,s,i))}getViewport(){return{x:this._state.viewport.x,y:this._state.viewport.y,width:this._state.viewport.width,height:this._state.viewport.height}}useProgram(t){var e,s;this._state.program!==t&&(null==(e=this._state.program)||e.stop(),this._state.program=t,this.gl.useProgram(null!=(s=null==t?void 0:t.glName)?s:null))}bindTexture(t,i,a=!1){(i>=this.parameters.maxTextureImageUnits||i<0)&&console.error("Input texture unit is out of range of available units!");const r=this._state.textureUnitMap[i];return (0,maybe/* isNone */.Wi)(t)||null==t.glName?((0,maybe/* isSome */.pC)(r)&&(this.setActiveTexture(i,a),this.gl.bindTexture(r.descriptor.target,null)),this._state.textureUnitMap[i]=null,r):a||r!==t?(this.setActiveTexture(i,a),this.gl.bindTexture(t.descriptor.target,t.glName),t.applyChanges(),this._state.textureUnitMap[i]=t,r):(t.isDirty&&(this.setActiveTexture(i,a),t.applyChanges()),r)}unbindTextureAllUnits(t){for(let e=0;e<this.parameters.maxTextureImageUnits;e++)this._state.textureUnitMap[e]===t&&(this.bindTexture(null,e),this._state.textureUnitMap[e]=null)}bindFramebuffer(t,s=!1){if(s||this._state.readFramebuffer!==t||this._state.drawFramebuffer!==t){if((0,maybe/* isNone */.Wi)(t))return this.gl.bindFramebuffer(webgl_enums/* FramebufferTarget.FRAMEBUFFER */.qi.FRAMEBUFFER,null),this._state.readFramebuffer=null,void(this._state.drawFramebuffer=null);t.initializeAndBind(webgl_enums/* FramebufferTarget.FRAMEBUFFER */.qi.FRAMEBUFFER),this._state.readFramebuffer=t,this._state.drawFramebuffer=t}}bindFramebufferSeparate(t,s,a=!1){const r=s===webgl_enums/* FramebufferTarget.READ_FRAMEBUFFER */.qi.READ_FRAMEBUFFER,n=r?this._state.readFramebuffer:this._state.drawFramebuffer;(a||n!==t)&&((0,maybe/* isNone */.Wi)(t)?this.gl.bindFramebuffer(s,null):t.initializeAndBind(s),r?this._state.readFramebuffer=(0,maybe/* unwrapOr */.Pt)(t,null):this._state.drawFramebuffer=(0,maybe/* unwrapOr */.Pt)(t,null))}blitFramebuffer(t,e,s=0,i=0,a=t.width,r=t.height,n=0,l=0,h=e.width,f=e.height,o=webgl_enums/* ClearBufferBit.COLOR_BUFFER_BIT */.lk.COLOR_BUFFER_BIT,d=webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST){this.bindFramebufferSeparate(t,webgl_enums/* FramebufferTarget.READ_FRAMEBUFFER */.qi.READ_FRAMEBUFFER),this.bindFramebufferSeparate(e,webgl_enums/* FramebufferTarget.DRAW_FRAMEBUFFER */.qi.DRAW_FRAMEBUFFER);this.gl.blitFramebuffer(s,i,a,r,n,l,h,f,o,d)}bindBuffer(t,e){if(t)switch(null!=e||(e=t.bufferType),e){case webgl_enums/* BufferType.ARRAY_BUFFER */.w0.ARRAY_BUFFER:this._state.vertexBuffer=RenderingContext_y(this.gl,t,e,this._state.vertexBuffer);break;case webgl_enums/* BufferType.ELEMENT_ARRAY_BUFFER */.w0.ELEMENT_ARRAY_BUFFER:this._state.indexBuffer=RenderingContext_y(this.gl,t,e,this._state.indexBuffer);break;case webgl_enums/* BufferType.UNIFORM_BUFFER */.w0.UNIFORM_BUFFER:this._state.uniformBuffer=RenderingContext_y(this.gl,t,e,this._state.uniformBuffer);break;case webgl_enums/* BufferType.PIXEL_PACK_BUFFER */.w0.PIXEL_PACK_BUFFER:this._state.pixelPackBuffer=RenderingContext_y(this.gl,t,e,this._state.pixelPackBuffer);break;case webgl_enums/* BufferType.PIXEL_UNPACK_BUFFER */.w0.PIXEL_UNPACK_BUFFER:this._state.pixelUnpackBuffer=RenderingContext_y(this.gl,t,e,this._state.pixelUnpackBuffer);break;case webgl_enums/* BufferType.COPY_READ_BUFFER */.w0.COPY_READ_BUFFER:this._state.copyReadBuffer=RenderingContext_y(this.gl,t,e,this._state.copyReadBuffer);break;case webgl_enums/* BufferType.COPY_WRITE_BUFFER */.w0.COPY_WRITE_BUFFER:this._state.copyWriteBuffer=RenderingContext_y(this.gl,t,e,this._state.copyWriteBuffer)}}bindRenderbuffer(t){const e=this.gl;t||(e.bindRenderbuffer(e.RENDERBUFFER,null),this._state.renderbuffer=null),this._state.renderbuffer!==t&&(e.bindRenderbuffer(e.RENDERBUFFER,t.glName),this._state.renderbuffer=t)}_getBufferBinding(t,s){if(s>=this.parameters.maxUniformBufferBindings||s<0)return console.error("Uniform buffer binding point is out of range!"),null;const i=this._state.uniformBufferBindingPoints;let a=i[s];return (0,maybe/* isNone */.Wi)(a)&&(a={buffer:null,offset:0,size:0},i[s]=a),a}bindBufferBase(t,s,i){const a=this._getBufferBinding(t,s);if((0,maybe/* isNone */.Wi)(a))return;if(a.buffer===i&&0===a.offset&&0===a.size)return;this.gl.bindBufferBase(t,s,i?i.glName:null),a.buffer=i,a.offset=0,a.size=0}bindBufferRange(t,s,i,a,r){const n=this._getBufferBinding(t,s);if((0,maybe/* isNone */.Wi)(n))return;if(n.buffer===i&&n.offset===a&&n.size===r)return;if(a%this._parameters.uniformBufferOffsetAlignment!=0)return void console.error("Uniform buffer binding offset is not a multiple of the context offset alignment");this.gl.bindBufferRange(t,s,i.glName,a,r),n.buffer=i,n.offset=a,n.size=r}bindUBO(t,s,i,a){(0,maybe/* isNone */.Wi)(s)?this.bindBufferBase(webgl_enums/* BufferType.UNIFORM_BUFFER */.w0.UNIFORM_BUFFER,t,null):((0,checkWebGLError/* webglDebugEnabled */.hZ)()&&(null!=a?a:s.byteLength)>this._parameters.maxUniformBlockSize&&console.error("Attempting to bind more data than the maximum uniform block size"),s.initialize(),void 0!==i&&void 0!==a?this.bindBufferRange(webgl_enums/* BufferType.UNIFORM_BUFFER */.w0.UNIFORM_BUFFER,t,s.buffer,i,a):this.bindBufferBase(webgl_enums/* BufferType.UNIFORM_BUFFER */.w0.UNIFORM_BUFFER,t,s.buffer))}unbindUBO(t){for(let e=0,i=this._state.uniformBufferBindingPoints.length;e<i;e++){const i=this._state.uniformBufferBindingPoints[e];(0,maybe/* isSome */.pC)(i)&&i.buffer===t.buffer&&this.bindBufferBase(webgl_enums/* BufferType.UNIFORM_BUFFER */.w0.UNIFORM_BUFFER,e,null)}}unbindBuffer(t){switch(t){case webgl_enums/* BufferType.ARRAY_BUFFER */.w0.ARRAY_BUFFER:this._state.vertexBuffer=RenderingContext_y(this.gl,null,t,this._state.vertexBuffer);break;case webgl_enums/* BufferType.ELEMENT_ARRAY_BUFFER */.w0.ELEMENT_ARRAY_BUFFER:this._state.indexBuffer=RenderingContext_y(this.gl,null,t,this._state.indexBuffer);break;case webgl_enums/* BufferType.UNIFORM_BUFFER */.w0.UNIFORM_BUFFER:this._state.uniformBuffer=RenderingContext_y(this.gl,null,t,this._state.uniformBuffer);break;case webgl_enums/* BufferType.PIXEL_PACK_BUFFER */.w0.PIXEL_PACK_BUFFER:this._state.pixelPackBuffer=RenderingContext_y(this.gl,null,t,this._state.pixelPackBuffer);break;case webgl_enums/* BufferType.PIXEL_UNPACK_BUFFER */.w0.PIXEL_UNPACK_BUFFER:this._state.pixelUnpackBuffer=RenderingContext_y(this.gl,null,t,this._state.pixelUnpackBuffer);break;case webgl_enums/* BufferType.COPY_READ_BUFFER */.w0.COPY_READ_BUFFER:this._state.copyReadBuffer=RenderingContext_y(this.gl,null,t,this._state.copyReadBuffer);break;case webgl_enums/* BufferType.COPY_WRITE_BUFFER */.w0.COPY_WRITE_BUFFER:this._state.copyWriteBuffer=RenderingContext_y(this.gl,null,t,this._state.copyWriteBuffer)}}bindVAO(t=null){(0,maybe/* isNone */.Wi)(t)?this._state.vertexArrayObject&&(this._state.vertexArrayObject.unbind(),this._state.vertexArrayObject=null):this._state.vertexArrayObject!==t&&(t.bind(),this._state.vertexArrayObject=t)}async clientWaitAsync(t=(0,time/* Milliseconds */.HA)(10)){const e={};this.instanceCounter.increment(webgl_enums/* ResourceType.Sync */._g.Sync,e);const s=this.gl,i=s.fenceSync(webgl_enums/* SyncCondition.SYNC_GPU_COMMANDS_COMPLETE */.V7.SYNC_GPU_COMMANDS_COMPLETE,0);let n;s.flush();do{await (0,promiseUtils/* after */.e4)(t),n=s.clientWaitSync(i,0,0)}while(n===webgl_enums/* ClientWaitSyncStatus.TIMEOUT_EXPIRED */.Y5.TIMEOUT_EXPIRED);if(s.deleteSync(i),this.instanceCounter.decrement(webgl_enums/* ResourceType.Sync */._g.Sync,e),n===webgl_enums/* ClientWaitSyncStatus.WAIT_FAILED */.Y5.WAIT_FAILED)throw new Error("Client wait failed")}getBoundFramebufferObject(t=webgl_enums/* FramebufferTarget.FRAMEBUFFER */.qi.FRAMEBUFFER){return t===webgl_enums/* FramebufferTarget.READ_FRAMEBUFFER */.qi.READ_FRAMEBUFFER?this._state.readFramebuffer:this._state.drawFramebuffer}getBoundVAO(){return this._state.vertexArrayObject}resetState(){this.useProgram(null),this.bindVAO(null),this.bindFramebuffer(null,!0),this.unbindBuffer(webgl_enums/* BufferType.ARRAY_BUFFER */.w0.ARRAY_BUFFER),this.unbindBuffer(webgl_enums/* BufferType.ELEMENT_ARRAY_BUFFER */.w0.ELEMENT_ARRAY_BUFFER),(0,isWebGL2Context/* default */.Z)(this.gl)&&(this.unbindBuffer(webgl_enums/* BufferType.UNIFORM_BUFFER */.w0.UNIFORM_BUFFER),this._state.uniformBufferBindingPoints.length=0,this.unbindBuffer(webgl_enums/* BufferType.PIXEL_PACK_BUFFER */.w0.PIXEL_PACK_BUFFER),this.unbindBuffer(webgl_enums/* BufferType.PIXEL_UNPACK_BUFFER */.w0.PIXEL_UNPACK_BUFFER),this.unbindBuffer(webgl_enums/* BufferType.COPY_READ_BUFFER */.w0.COPY_READ_BUFFER),this.unbindBuffer(webgl_enums/* BufferType.COPY_WRITE_BUFFER */.w0.COPY_WRITE_BUFFER));for(let t=0;t<this.parameters.maxTextureImageUnits;++t)this.bindTexture(null,t);this.setBlendingEnabled(!1),this.setBlendFunction(webgl_enums/* BlendFactor.ONE */.zi.ONE,webgl_enums/* BlendFactor.ZERO */.zi.ZERO),this.setBlendEquation(webgl_enums/* BlendOperation.ADD */.db.ADD),this.setBlendColor(0,0,0,0),this.setFaceCullingEnabled(!1),this.setCullFace(webgl_enums/* Face.BACK */.LR.BACK),this.setFrontFace(webgl_enums/* CullMode.CCW */.Wf.CCW),this.setPolygonOffsetFillEnabled(!1),this.setPolygonOffset(0,0),this.setScissorTestEnabled(!1),this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height),this.setDepthTestEnabled(!1),this.setDepthFunction(webgl_enums/* CompareFunction.LESS */.wb.LESS),this.setDepthRange(0,1),this.setStencilTestEnabled(!1),this.setStencilFunction(webgl_enums/* CompareFunction.ALWAYS */.wb.ALWAYS,0,0),this.setStencilOp(webgl_enums/* StencilOperation.KEEP */.xS.KEEP,webgl_enums/* StencilOperation.KEEP */.xS.KEEP,webgl_enums/* StencilOperation.KEEP */.xS.KEEP),this.setClearColor(0,0,0,0),this.setClearDepth(1),this.setClearStencil(0),this.setColorMask(!0,!0,!0,!0),this.setStencilWriteMask(4294967295),this.setDepthWriteEnabled(!0),this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}enforceState(){var t,e;const i=this.gl,a=this.capabilities.vao;a&&a.bindVertexArray(null);for(let s=0;s<this.parameters.maxVertexAttributes;s++)i.disableVertexAttribArray(s);if(this._state.vertexBuffer?i.bindBuffer(this._state.vertexBuffer.bufferType,this._state.vertexBuffer.glName):i.bindBuffer(webgl_enums/* BufferType.ARRAY_BUFFER */.w0.ARRAY_BUFFER,null),this._state.indexBuffer?i.bindBuffer(this._state.indexBuffer.bufferType,this._state.indexBuffer.glName):i.bindBuffer(webgl_enums/* BufferType.ELEMENT_ARRAY_BUFFER */.w0.ELEMENT_ARRAY_BUFFER,null),(0,isWebGL2Context/* default */.Z)(i)){var r,l;this._state.uniformBuffer?i.bindBuffer(this._state.uniformBuffer.bufferType,this._state.uniformBuffer.glName):i.bindBuffer(webgl_enums/* BufferType.UNIFORM_BUFFER */.w0.UNIFORM_BUFFER,null);for(let t=0;t<this._parameters.maxUniformBufferBindings;t++){const e=this._state.uniformBufferBindingPoints[t];if((0,maybe/* isSome */.pC)(e)&&null!==e.buffer){const{buffer:s,offset:a,size:r}=e;0===a&&0===r?i.bindBufferBase(webgl_enums/* BufferType.UNIFORM_BUFFER */.w0.UNIFORM_BUFFER,t,s.glName):i.bindBufferRange(webgl_enums/* BufferType.UNIFORM_BUFFER */.w0.UNIFORM_BUFFER,t,s.glName,a,r)}else i.bindBufferBase(webgl_enums/* BufferType.UNIFORM_BUFFER */.w0.UNIFORM_BUFFER,t,null)}this._state.pixelPackBuffer?i.bindBuffer(this._state.pixelPackBuffer.bufferType,this._state.pixelPackBuffer.glName):i.bindBuffer(webgl_enums/* BufferType.PIXEL_PACK_BUFFER */.w0.PIXEL_PACK_BUFFER,null),this._state.pixelUnpackBuffer?i.bindBuffer(this._state.pixelUnpackBuffer.bufferType,this._state.pixelUnpackBuffer.glName):i.bindBuffer(webgl_enums/* BufferType.PIXEL_UNPACK_BUFFER */.w0.PIXEL_UNPACK_BUFFER,null),this._state.copyReadBuffer?i.bindBuffer(this._state.copyReadBuffer.bufferType,this._state.copyReadBuffer.glName):i.bindBuffer(webgl_enums/* BufferType.COPY_READ_BUFFER */.w0.COPY_READ_BUFFER,null),this._state.copyWriteBuffer?i.bindBuffer(this._state.copyWriteBuffer.bufferType,this._state.copyWriteBuffer.glName):i.bindBuffer(webgl_enums/* BufferType.COPY_WRITE_BUFFER */.w0.COPY_WRITE_BUFFER,null),i.bindFramebuffer(webgl_enums/* FramebufferTarget.READ_FRAMEBUFFER */.qi.READ_FRAMEBUFFER,null),i.readBuffer(i.BACK),this._state.readFramebuffer&&(i.bindFramebuffer(webgl_enums/* FramebufferTarget.READ_FRAMEBUFFER */.qi.READ_FRAMEBUFFER,this._state.readFramebuffer.glName),i.readBuffer(webgl_enums/* ColorAttachment.COLOR_ATTACHMENT0 */.VY.COLOR_ATTACHMENT0)),i.bindFramebuffer(webgl_enums/* FramebufferTarget.DRAW_FRAMEBUFFER */.qi.DRAW_FRAMEBUFFER,null!=(r=null==(l=this._state.drawFramebuffer)?void 0:l.glName)?r:null)}else{var f,u;this._state.readFramebuffer=this._state.drawFramebuffer,i.bindFramebuffer(webgl_enums/* FramebufferTarget.FRAMEBUFFER */.qi.FRAMEBUFFER,null!=(f=null==(u=this._state.drawFramebuffer)?void 0:u.glName)?f:null)}if(a&&this._state.vertexArrayObject){const t=this._state.vertexArrayObject;this._state.vertexArrayObject&&(this._state.vertexArrayObject.unbind(),this._state.vertexArrayObject=null),this.bindVAO(t)}i.useProgram(null!=(t=null==(e=this._state.program)?void 0:e.glName)?t:null),i.blendColor(this._state.blendColor.r,this._state.blendColor.g,this._state.blendColor.b,this._state.blendColor.a),i.bindRenderbuffer(i.RENDERBUFFER,this._state.renderbuffer?this._state.renderbuffer.glName:null),!0===this._state.blend?i.enable(this.gl.BLEND):i.disable(this.gl.BLEND),i.blendEquationSeparate(this._state.blendEquation.mode,this._state.blendEquation.modeAlpha),i.blendFuncSeparate(this._state.blendFunction.srcRGB,this._state.blendFunction.dstRGB,this._state.blendFunction.srcAlpha,this._state.blendFunction.dstAlpha),i.clearColor(this._state.clearColor.r,this._state.clearColor.g,this._state.clearColor.b,this._state.clearColor.a),i.clearDepth(this._state.clearDepth),i.clearStencil(this._state.clearStencil),i.colorMask(this._state.colorMask.r,this._state.colorMask.g,this._state.colorMask.b,this._state.colorMask.a),i.cullFace(this._state.cullFace),i.depthFunc(this._state.depthFunction),i.depthRange(this._state.depthRange.zNear,this._state.depthRange.zFar),!0===this._state.depthTest?i.enable(i.DEPTH_TEST):i.disable(i.DEPTH_TEST),i.depthMask(this._state.depthWrite),i.frontFace(this._state.frontFace),i.lineWidth(1),!0===this._state.faceCulling?i.enable(i.CULL_FACE):i.disable(i.CULL_FACE),i.polygonOffset(this._state.polygonOffset[0],this._state.polygonOffset[1]),!0===this._state.polygonOffsetFill?i.enable(i.POLYGON_OFFSET_FILL):i.disable(i.POLYGON_OFFSET_FILL),i.scissor(this._state.scissorRect.x,this._state.scissorRect.y,this._state.scissorRect.width,this._state.scissorRect.height),!0===this._state.scissorTest?i.enable(i.SCISSOR_TEST):i.disable(i.SCISSOR_TEST),i.stencilFunc(this._state.stencilFunction.func,this._state.stencilFunction.ref,this._state.stencilFunction.mask),i.stencilOpSeparate(this._state.stencilOperation.face,this._state.stencilOperation.fail,this._state.stencilOperation.zFail,this._state.stencilOperation.zPass),!0===this._state.stencilTest?i.enable(i.STENCIL_TEST):i.disable(i.STENCIL_TEST),i.stencilMask(this._state.stencilWriteMask);for(let n=0;n<this.parameters.maxTextureImageUnits;n++){i.activeTexture(webgl_enums/* BASE_TEXTURE_UNIT */.Ld+n),i.bindTexture(webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,null),i.bindTexture(webgl_enums/* TextureType.TEXTURE_CUBE_MAP */.No.TEXTURE_CUBE_MAP,null),(0,isWebGL2Context/* default */.Z)(i)&&(i.bindTexture(webgl_enums/* TextureType.TEXTURE_3D */.No.TEXTURE_3D,null),i.bindTexture(webgl_enums/* TextureType.TEXTURE_2D_ARRAY */.No.TEXTURE_2D_ARRAY,null));const t=this._state.textureUnitMap[n];(0,maybe/* isSome */.pC)(t)&&i.bindTexture(t.descriptor.target,t.glName)}i.activeTexture(webgl_enums/* BASE_TEXTURE_UNIT */.Ld+this._state.activeTexture),i.viewport(this._state.viewport.x,this._state.viewport.y,this._state.viewport.width,this._state.viewport.height),(0,checkWebGLError/* webglDebugEnabled */.hZ)()&&(this._numOfDrawCalls=0,this._numOfTriangles=0)}_loadExtensions(){this.type===context_util/* ContextType.WEBGL1 */.zO.WEBGL1&&this.gl.getExtension("OES_element_index_uint"),this.gl.getExtension("KHR_parallel_shader_compile")}_loadParameters(t){var e;const s=this.capabilities.textureFilterAnisotropic,i=null!=(e=t.maxAnisotropy)?e:1/0,a=(0,isWebGL2Context/* default */.Z)(this.gl),r=this.gl,n={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:s?Math.min(this.gl.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY),i):1,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),maxUniformBufferBindings:a?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0,maxVertexUniformBlocks:a?r.getParameter(r.MAX_VERTEX_UNIFORM_BLOCKS):0,maxFragmentUniformBlocks:a?r.getParameter(r.MAX_FRAGMENT_UNIFORM_BLOCKS):0,maxUniformBlockSize:a?r.getParameter(r.MAX_UNIFORM_BLOCK_SIZE):0,uniformBufferOffsetAlignment:a?r.getParameter(r.UNIFORM_BUFFER_OFFSET_ALIGNMENT):1,maxArrayTextureLayers:a?r.getParameter(r.MAX_ARRAY_TEXTURE_LAYERS):1,maxSamples:a?r.getParameter(r.MAX_SAMPLES):1};return Texture/* Texture.TEXTURE_UNIT_FOR_UPDATES */.x.TEXTURE_UNIT_FOR_UPDATES=n.maxTextureImageUnits-1,n}}function RenderingContext_y(t,e,s,i){return e?i!==e&&t.bindBuffer(s,e.glName):t.bindBuffer(s,null),e}function I(t,e){switch(t){case webgl_enums/* PrimitiveType.POINTS */.MX.POINTS:return 2*e;case webgl_enums/* PrimitiveType.TRIANGLES */.MX.TRIANGLES:return e/3;case webgl_enums/* PrimitiveType.TRIANGLE_STRIP */.MX.TRIANGLE_STRIP:case webgl_enums/* PrimitiveType.TRIANGLE_FAN */.MX.TRIANGLE_FAN:return e-2;default:return 0}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/Stage.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst q=2e3;class Stage_W extends Container/* Container */.W{constructor(n,a){super(),this._trash=new Set,this._clipData=new Float32Array(8),this._upperLeft=(0,vec2f64.a)(),this._upperRight=(0,vec2f64.a)(),this._lowerLeft=(0,vec2f64.a)(),this._lowerRight=(0,vec2f64.a)(),this._mat2=(0,mat2df64.c)(),this._clipRendererInitialized=!1,this._renderRemainingTime=0,this._lastFrameRenderTime=0,this.renderRequested=!1,this.stage=this,this._stationary=!0;const{canvas:o=document.createElement("canvas"),alpha:h=!0,stencil:d=!0,contextOptions:c={}}=a;this._canvas=o;const p=(0,context_util/* createContextOrErrorHTML */.sj)("2d",o,{alpha:h,antialias:!1,depth:!0,stencil:d});this.context=new RenderingContext_k((0,maybe/* isSome */.pC)(p)?p:null,c),this.resourceManager=new CIMResourceManager/* default */.Z,this.painter=new P(this.context,this,this.resourceManager),(0,has/* default */.Z)("esri-2d-profiler")&&(this._debugOutput=document.createElement("div"),this._debugOutput.setAttribute("style","margin: 24px 64px; position: absolute; color: red;"),n.appendChild(this._debugOutput)),this._renderParameters={drawPhase:0,state:this.state,pixelRatio:window.devicePixelRatio,stationary:!1,globalOpacity:1,blendMode:null,deltaTime:-1,time:0,inFadeTransition:!1,effects:null,context:this.context,painter:this.painter,timeline:a.timeline||new Timeline/* Timeline */.T,renderingOptions:a.renderingOptions,requireFBO:!1,profiler:new Profiler_o(this.context,this._debugOutput),dataUploadCounter:0},this._taskHandle=(0,scheduling/* addFrameTask */.A)({render:e=>this.renderFrame(e)}),this._taskHandle.pause(),this._lostWebGLContextHandle=(0,events.on)(o,"webglcontextlost",(()=>{this.emit("webgl-error",{error:new core_Error/* default */.Z("webgl-context-lost")})})),o.setAttribute("style","width: 100%; height:100%; display:block;"),n.appendChild(o)}destroy(){this.removeAllChildren(),this._emptyTrash(),this._taskHandle.remove(),this._taskHandle=null,this._boundFBO=null,this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null),this._clipVAO&&(this._clipVAO.dispose(),this._clipVAO=null,this._clipVBO=null),this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=null),this._lostWebGLContextHandle&&(this._lostWebGLContextHandle.remove(),this._lostWebGLContextHandle=null),this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas),this._debugOutput&&this._debugOutput.parentNode&&this._debugOutput.parentNode.removeChild(this._debugOutput),this.highlightOptions=null,this.resourceManager.destroy(),this.painter.dispose(),this.context.dispose(),this._canvas=null}get background(){return this._background}set background(e){this._background=e,this.requestRender()}get highlightOptions(){return this._highlightOptions}set highlightOptions(e){this._highlightOptionsHandle&&(this._highlightOptionsHandle.remove(),this._highlightOptionsHandle=null),this._highlightOptions=e,this._highlightOptions&&(this._highlightOptionsHandle=(0,watchUtils/* init */.S1)(this._highlightOptions,"version",(()=>{this.painter.setHighlightOptions(e),this.requestRender()})))}get renderingOptions(){return this._renderingOptions}set renderingOptions(e){this._renderingOptions=e,this.requestRender()}get state(){return this._state}set state(e){this._state=e,this.requestRender()}get stationary(){return this._stationary}set stationary(e){this._stationary!==e&&(this._stationary=e,this.requestRender())}trashDisplayObject(e){this._trash.add(e),this.requestRender()}untrashDisplayObject(e){return this._trash.delete(e)}requestRender(){this._renderRemainingTime=q,this.renderRequested||(this.renderRequested=!0,this.emit("will-render"),this._taskHandle.resume())}renderFrame(e){const t=this._lastFrameRenderTime?e.time-this._lastFrameRenderTime:0;this._renderRemainingTime-=t,this._renderRemainingTime<=0&&this._taskHandle.pause(),this._lastFrameRenderTime=e.time,this.renderRequested=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=this.stationary,this._renderParameters.pixelRatio=window.devicePixelRatio,this._renderParameters.globalOpacity=1,this._renderParameters.time=e.time,this._renderParameters.deltaTime=e.deltaTime,this._renderParameters.effects=null,this.processRender(this._renderParameters),this._emptyTrash(),this.emit("post-render")}_createTransforms(){return{dvs:(0,mat3f32.c)()}}renderChildren(e){for(const t of this.children)t.beforeRender(e);this._renderChildren(this.children,e);for(const t of this.children)t.afterRender(e)}_renderChildren(e,t){const r=this.context;t.profiler.recordStart("drawLayers"),t.dataUploadCounter=0,this._beforeRenderChildren(t),t.drawPhase=enums/* WGLDrawPhase.MAP */.jx.MAP,this.painter.beforeRenderLayers(r,this.background);for(const i of e)i.processRender(t);this.painter.renderLayers(r),t.drawPhase=enums/* WGLDrawPhase.HIGHLIGHT */.jx.HIGHLIGHT,this.painter.beforeRenderLayers(r);for(const i of e)i.processRender(t);this.painter.renderLayers(r);if(this._isLabelDrawPhaseRequired(e)){t.drawPhase=enums/* WGLDrawPhase.LABEL */.jx.LABEL,this.painter.beforeRenderLayers(r);for(const i of e)i.processRender(t);this.painter.renderLayers(r)}if((0,has/* default */.Z)("esri-tiles-debug")){t.drawPhase=enums/* WGLDrawPhase.DEBUG */.jx.DEBUG,this.painter.beforeRenderLayers(r);for(const i of e)i.processRender(t);this.painter.renderLayers(r)}t.profiler.recordEnd("drawLayers"),this._afterRenderChildren()}_beforeRenderChildren(e){const{context:t}=this,{state:i,pixelRatio:r}=e;t.setClearDepth(1),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT);const{size:s,rotation:n}=i,l=Math.round(s[0]*r),d=Math.round(s[1]*r);this._boundFBO=t.getBoundFramebufferObject();if(!i.spatialReference.isWrappable)return void(this._clipFrame=!1);const m=(0,common.t)(n),u=Math.abs(Math.cos(m)),_=Math.abs(Math.sin(m)),g=Math.round(l*u+d*_),f=Math.round(i.worldScreenWidth);if(g<=f)return void(this._clipFrame=!1);this._clipFBO&&this._clipFBO.width===l&&this._clipFBO.height===d||(this._clipFBO=new FramebufferObject/* FramebufferObject */.X(t,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER */.OU.DEPTH_STENCIL_RENDER_BUFFER,width:l,height:d}));const b=(this.state.padding.left-this.state.padding.right)/2,R=(this.state.padding.bottom-this.state.padding.top)/2,w=.5*l,O=.5*d,E=1/l,F=1/d,T=f*r*.5,y=.5*(l*_+d*u),B=this._upperLeft,P=this._upperRight,S=this._lowerLeft,j=this._lowerRight;(0,vec2.s)(B,-T,-y),(0,vec2.s)(P,T,-y),(0,vec2.s)(S,-T,y),(0,vec2.s)(j,T,y),(0,mat2d.a)(this._mat2,[w+b,O-R]),0!==n&&(0,mat2d.r)(this._mat2,this._mat2,m),(0,vec2.t)(B,B,this._mat2),(0,vec2.t)(P,P,this._mat2),(0,vec2.t)(S,S,this._mat2),(0,vec2.t)(j,j,this._mat2);const L=this._clipData;L.set([2*S[0]*E-1,2*(d-S[1])*F-1,2*j[0]*E-1,2*(d-j[1])*F-1,2*B[0]*E-1,2*(d-B[1])*F-1,2*P[0]*E-1,2*(d-P[1])*F-1]),this._clipRendererInitialized||this._initializeClipRenderer(t),this._clipVBO.setData(L),this._boundFBO=t.getBoundFramebufferObject(),t.bindFramebuffer(this._clipFBO),t.setDepthWriteEnabled(!0),t.setStencilWriteMask(255),t.setClearColor(0,0,0,0),t.setClearDepth(1),t.setClearStencil(0),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT|t.gl.STENCIL_BUFFER_BIT),t.setDepthWriteEnabled(!1),this._clipFrame=!0}_afterRenderChildren(){const e=this.context;if(e.logIno(),this._clipFrame&&this._clipRendererInitialized){if(e.bindFramebuffer(this._boundFBO),this._boundFBO=null,e.bindVAO(this._clipVAO),e.useProgram(this._clipStencilProgram),e.setDepthWriteEnabled(!1),e.setDepthTestEnabled(!1),e.setStencilTestEnabled(!0),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!1),e.setStencilOp(webgl_enums/* StencilOperation.KEEP */.xS.KEEP,webgl_enums/* StencilOperation.KEEP */.xS.KEEP,webgl_enums/* StencilOperation.REPLACE */.xS.REPLACE),e.setStencilWriteMask(255),e.setStencilFunction(webgl_enums/* CompareFunction.ALWAYS */.wb.ALWAYS,1,255),e.drawElements(webgl_enums/* PrimitiveType.TRIANGLES */.MX.TRIANGLES,6,webgl_enums/* DataType.UNSIGNED_SHORT */.g.UNSIGNED_SHORT,0),e.bindVAO(),e.setColorMask(!0,!0,!0,!0),null!=this.background){const{r:t,g:i,b:r,a:s}=this.background.color;e.setClearColor(s*t/255,s*i/255,s*r/255,s)}else e.setClearColor(0,0,0,0);e.clear(e.gl.COLOR_BUFFER_BIT),e.setBlendingEnabled(!0),e.setStencilFunction(webgl_enums/* CompareFunction.EQUAL */.wb.EQUAL,1,255),this.painter.blitTexture(e,this._clipFBO.colorTexture,webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,1),e.setStencilTestEnabled(!1)}}doRender(e){const t=this.context,{state:i,pixelRatio:r}=e;this._resizeCanvas(e),t.setViewport(0,0,r*i.size[0],r*i.size[1]),t.setDepthWriteEnabled(!0),t.setStencilWriteMask(255),super.doRender(e)}async takeScreenshot(e){const{framebufferWidth:t,framebufferHeight:i}={framebufferWidth:Math.round(this._renderParameters.state.size[0]*e.resolutionScale),framebufferHeight:Math.round(this._renderParameters.state.size[1]*e.resolutionScale)},r=1,s=this.context,n=this._state.clone();if(null!=e.rotation){const t=n.viewpoint;n.viewpoint.rotation=e.rotation,n.viewpoint=t}const a={...this._renderParameters,drawPhase:null,globalOpacity:1,stationary:!0,state:n,pixelRatio:r,time:performance.now(),deltaTime:0,blendMode:null,effects:null,inFadeTransition:!1},o=new FramebufferObject/* FramebufferObject */.X(s,{colorTarget:webgl_enums/* TargetType.TEXTURE */.Lm.TEXTURE,depthStencilTarget:webgl_enums/* DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER */.OU.DEPTH_STENCIL_RENDER_BUFFER,width:t,height:i}),h=s.getBoundFramebufferObject(),l=s.getViewport();s.bindFramebuffer(o),s.setViewport(0,0,t,i),this._renderChildren(e.children,a);const d=this._readbackScreenshot(o,{...e.cropArea,y:i-(e.cropArea.y+e.cropArea.height)});s.bindFramebuffer(h),s.setViewport(l.x,l.y,l.width,l.height),this.requestRender();const c=await d;let p;1===e.outputScale?p=c:(p=new ImageData(Math.round(c.width*e.outputScale),Math.round(c.height*e.outputScale)),(0,screenshotUtils/* resampleHermite */.TT)(c,p,!0));return (0,screenshotUtils/* encodeResult */.gH)(p,{format:e.format,quality:e.quality,rotation:0,disableDecorations:!1},document.createElement("canvas"),{flipY:!0,premultipliedAlpha:!0})}async _readbackScreenshot(e,t){const i=(0,screenshotUtils/* createEmptyImageData */.r7)(t.width,t.height,document.createElement("canvas"));return await e.readPixelsAsync(t.x,t.y,t.width,t.height,webgl_enums/* PixelFormat.RGBA */.VI.RGBA,webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,new Uint8Array(i.data.buffer)),i}_resizeCanvas(e){const t=this._canvas,i=t.style,{state:{size:r},pixelRatio:s}=e,n=r[0],a=r[1],o=Math.round(n*s),h=Math.round(a*s);t.width===o&&t.height===h||(t.width=o,t.height=h),i.width=n+"px",i.height=a+"px"}_initializeClipRenderer(e){if(this._clipRendererInitialized)return!0;const t=(0,ProgramTemplate/* createProgram */.H)(e,StencilPrograms_r);if(!t)return!1;const i=BufferObject/* BufferObject.createVertex */.f.createVertex(e,webgl_enums/* Usage.STREAM_DRAW */.l1.STREAM_DRAW,this._clipData),r=new Uint16Array([0,1,2,2,1,3]),s=BufferObject/* BufferObject.createIndex */.f.createIndex(e,webgl_enums/* Usage.STATIC_DRAW */.l1.STATIC_DRAW,r),n=StencilPrograms_r.attributes,a={geometry:[new VertexElementDescriptor/* VertexElementDescriptor */.G("a_pos",2,webgl_enums/* DataType.FLOAT */.g.FLOAT,0,8)]},o=new VertexArrayObject/* VertexArrayObject */.U(e,n,a,{geometry:i},s);return this._clipStencilProgram=t,this._clipVBO=i,this._clipVAO=o,this._clipRendererInitialized=!0,!0}_emptyTrash(){for(;this._trash.size>0;){const e=Array.from(this._trash);this._trash.clear();for(const t of e)t.processDetach()}}_isLabelDrawPhaseRequired(e){let t=!1;for(const i of e){if(!(i instanceof Container/* Container */.W)){t=t||!1;break}if(i.hasLabels)return!0;t=t||this._isLabelDrawPhaseRequired(i.children)}return t}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/tslib.es6.js\nvar tslib_es6 = __webpack_require__(36663);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Accessor.js + 3 modules\nvar Accessor = __webpack_require__(53443);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/HandleOwner.js\nvar HandleOwner = __webpack_require__(53280);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/throttle.js\nvar throttle = __webpack_require__(618);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\nvar property = __webpack_require__(81977);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\nvar ensureType = __webpack_require__(7283);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js\nvar subclass = __webpack_require__(40266);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/mathUtils.js\nvar mathUtils = __webpack_require__(19431);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/support/StaticBitSet.js\nvar StaticBitSet = __webpack_require__(63483);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/CollisionGrid.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst CollisionGrid_i=2,CollisionGrid_o=1,CollisionGrid_h=0,CollisionGrid_r=1,CollisionGrid_n=2;class CollisionGrid_c{constructor(t,s){this.width=t,this.height=s;const i=Math.ceil(t/CollisionGrid_o),h=Math.ceil(s/CollisionGrid_o);this._cols=i,this._rows=h,this._cells=StaticBitSet/* StaticBitSet.create */.p.create(i*h)}insertMetrics(t){const s=this._hasCollision(t);return s===CollisionGrid_h&&this._markMetrics(t),s}getCellId(t,s){return t+s*this._cols}has(t){return this._cells.has(t)}hasRange(t,s){return this._cells.hasRange(t,s)}set(t){this._cells.set(t)}setRange(t,s){this._cells.setRange(t,s)}_hasCollision(t){const s=t.id;let e=0,o=0;t.save();do{const s=t.boundsCount;e+=s;for(let e=0;e<s;e++){const s=t.boundsComputedAnchorX(e),h=t.boundsComputedAnchorY(e),c=t.boundsWidth(e)+CollisionGrid_i,l=t.boundsHeight(e)+CollisionGrid_i;switch(this._collide(s,h,c,l)){case CollisionGrid_n:return CollisionGrid_n;case CollisionGrid_r:o++}}}while(t.peekId()===s&&t.next());return t.restore(),e===o?CollisionGrid_r:CollisionGrid_h}_collide(s,e,i,c){const l=s-i/2,_=e-c/2,a=l+i,u=_+c;if(a<0||u<0||l>this.width||_>this.height)return CollisionGrid_r;const d=(0,mathUtils/* clamp */.uZ)(Math.floor(l/CollisionGrid_o),0,this._cols),g=(0,mathUtils/* clamp */.uZ)(Math.floor(_/CollisionGrid_o),0,this._rows),f=(0,mathUtils/* clamp */.uZ)(Math.ceil(a/CollisionGrid_o),0,this._cols),m=(0,mathUtils/* clamp */.uZ)(Math.ceil(u/CollisionGrid_o),0,this._rows);for(let t=g;t<=m;t++)for(let s=d;s<=f;s++){const e=this.getCellId(s,t);if(this.has(e))return CollisionGrid_n}return CollisionGrid_h}_mark(s,e,i,h){const r=s-i/2,n=e-h/2,c=r+i,l=n+h,_=(0,mathUtils/* clamp */.uZ)(Math.floor(r/CollisionGrid_o),0,this._cols),a=(0,mathUtils/* clamp */.uZ)(Math.floor(n/CollisionGrid_o),0,this._rows),u=(0,mathUtils/* clamp */.uZ)(Math.ceil(c/CollisionGrid_o),0,this._cols),d=(0,mathUtils/* clamp */.uZ)(Math.ceil(l/CollisionGrid_o),0,this._rows);for(let t=a;t<=d;t++)for(let s=_;s<=u;s++){const e=this.getCellId(s,t);this.set(e)}return!1}_markMetrics(t){const s=t.id;do{const s=t.boundsCount;for(let e=0;e<s;e++){const s=t.boundsComputedAnchorX(e),o=t.boundsComputedAnchorY(e),h=t.boundsWidth(e)+CollisionGrid_i,r=t.boundsHeight(e)+CollisionGrid_i;this._mark(s,o,h,r)}}while(t.peekId()===s&&t.next())}}class CollisionGrid_l{constructor(t,e=2){this._bucketSize=t,this._rowsLength=s/t,this._colsLength=s/t,this._elementsPerBucket=e,this._grid=this._initGrid()}checkOverlap(t,s){const e=Math.floor(t/this._bucketSize),i=Math.floor(s/this._bucketSize);return e<0||e>=this._rowsLength||i<0||i>=this._colsLength||this._grid[i*this._colsLength+e]>=this._elementsPerBucket}markUsed(t,s){const e=Math.floor(t/this._bucketSize),i=Math.floor(s/this._bucketSize);this._grid[i*this._colsLength+e]+=1}reset(){this._grid=this._initGrid()}_initGrid(){return new Uint8Array(this._rowsLength*this._colsLength)}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/renderers/support/lengthUtils.js\nvar lengthUtils = __webpack_require__(6923);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/renderers/visualVariables/support/sizeVariableUtils.js\nvar sizeVariableUtils = __webpack_require__(67272);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/visualVariableSimpleUtils.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst visualVariableSimpleUtils_r=Math.PI;function visualVariableSimpleUtils_a(e,t){switch(t.transformationType){case sizeVariableUtils/* TransformationType.Additive */.hL.Additive:return visualVariableSimpleUtils_s(e,t);case sizeVariableUtils/* TransformationType.Constant */.hL.Constant:return visualVariableSimpleUtils_u(t,e);case sizeVariableUtils/* TransformationType.ClampedLinear */.hL.ClampedLinear:return visualVariableSimpleUtils_o(e,t);case sizeVariableUtils/* TransformationType.Proportional */.hL.Proportional:return visualVariableSimpleUtils_l(e,t);case sizeVariableUtils/* TransformationType.Stops */.hL.Stops:return visualVariableSimpleUtils_c(e,t);case sizeVariableUtils/* TransformationType.RealWorldSize */.hL.RealWorldSize:return visualVariableSimpleUtils_m(e,t);case sizeVariableUtils/* TransformationType.Identity */.hL.Identity:return e;case sizeVariableUtils/* TransformationType.Unknown */.hL.Unknown:return null}}function visualVariableSimpleUtils_i(e,t){return"number"==typeof e?e:visualVariableSimpleUtils_a(t,e)}function visualVariableSimpleUtils_s(e,t){return e+(visualVariableSimpleUtils_i(t.minSize,e)||t.minDataValue)}function visualVariableSimpleUtils_u(e,t){const n=e.stops;let r=n&&n.length&&n[0].size;return null==r&&(r=e.minSize),visualVariableSimpleUtils_i(r,t)}function visualVariableSimpleUtils_o(e,t){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),r=visualVariableSimpleUtils_i(t.minSize,e),a=visualVariableSimpleUtils_i(t.maxSize,e);return e<=t.minDataValue?r:e>=t.maxDataValue?a:r+n*(a-r)}function visualVariableSimpleUtils_l(t,n){const r=t/n.minDataValue,a=visualVariableSimpleUtils_i(n.minSize,t),s=visualVariableSimpleUtils_i(n.maxSize,t);let u=null;return u=r*a,(0,mathUtils/* clamp */.uZ)(u,a,s)}function visualVariableSimpleUtils_c(e,t){const[n,r,a]=visualVariableSimpleUtils_p(e,t.cache.ipData);if(n===r)return visualVariableSimpleUtils_i(t.stops[n].size,e);{const s=visualVariableSimpleUtils_i(t.stops[n].size,e);return s+(visualVariableSimpleUtils_i(t.stops[r].size,e)-s)*a}}function visualVariableSimpleUtils_m(n,a){const s=lengthUtils/* meterIn */.a[a.valueUnit],u=visualVariableSimpleUtils_i(a.minSize,n),o=visualVariableSimpleUtils_i(a.maxSize,n),{valueRepresentation:l}=a;let c=null;return c="area"===l?2*Math.sqrt(n/visualVariableSimpleUtils_r)/s:"radius"===l||"distance"===l?2*n/s:n/s,(0,mathUtils/* clamp */.uZ)(c,u,o)}function visualVariableSimpleUtils_p(e,t){if(!t)return;let n=0,r=t.length-1;return t.some(((t,a)=>e<t?(r=a,!0):(n=a,!1))),[n,r,(e-t[n])/(t[r]-t[n])]}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/CollisionEngine.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst CollisionEngine_c=254,CollisionEngine_u=255,CollisionEngine_f=0;function CollisionEngine_b(t,i){const o=[];t.forEachTile((e=>o.push(e))),o.sort(((e,t)=>e.instanceId-t.instanceId)),o.forEach((t=>{(0,maybe/* isSome */.pC)(t.labelMetrics)&&t.isReady&&i(t,t.labelMetrics.getCursor())}))}function CollisionEngine_p(e){return"feature"===e.layer.type||"csv"===e.layer.type||"geojson"===e.layer.type||"ogc-feature"===e.layer.type||"stream"===e.layer.type||"subtype-group"===e.layer.type||"wfs"===e.layer.type}function CollisionEngine_y(e){return t=>(0,screenUtils/* pt2px */.F2)(visualVariableSimpleUtils_a(t,e))}function CollisionEngine_m(e){const t="visualVariables"in e&&e.visualVariables;if(!t)return null;for(const i of t)if("size"===i.type)return CollisionEngine_y(i);return null}function CollisionEngine_h(e){for(const i of e){var t;const e="featureReduction"in i&&"cluster"===(null==(t=i.featureReduction)?void 0:t.type)&&i.featureReduction,o=[...i.labelingInfo||[],...e.labelingInfo||[]];if(!i.labelsVisible||!o.length)continue;if(o.some((e=>"none"===e.deconflictionStrategy)))return!0}return!1}function M(e,i){if(!CollisionEngine_p(i))return;const o="subtype-group"===i.layer.type?i.layer.sublayers.items:[i.layer],r=i.layer.geometryType,n=!CollisionEngine_h(o),s={};if("subtype-group"!==i.layer.type){if("heatmap"===i.layer.renderer.type)return;const e=CollisionEngine_m(i.layer.renderer);s[0]=e}const a=i.tileRenderer;if((0,maybe/* isNone */.Wi)(a))return;const l=i.layer.visible&&!i.suspended;e.push({tileRenderer:a,vvEvaluators:s,deconflictionEnabled:n,geometryType:r,visible:l})}class CollisionEngine_g{run(e,t,i){const o=[];for(let r=e.length-1;r>=0;r--){M(o,e[r])}this._transformMetrics(o,t),this._runCollision(o,t,i)}_runCollision(e,t,i){const[o,r]=t.state.size,s=new CollisionGrid_c(o*t.pixelRatio,r*t.pixelRatio);for(const{tileRenderer:n,deconflictionEnabled:a,visible:l}of e){const e=n.featuresView.attributeView;a?l?(this._prepare(n),this._collideVisible(s,n,i),this._collideInvisible(s,n)):CollisionEngine_b(n,((t,i)=>{for(;i.nextId();)e.setLabelMinZoom(i.id,CollisionEngine_u)})):CollisionEngine_b(n,((t,i)=>{for(;i.nextId();)e.setLabelMinZoom(i.id,CollisionEngine_f)}))}}_isFiltered(t,i,n){const s=i.getFilterFlags(t),a=!n.hasFilter||!!(s&definitions/* FILTER_FLAG_0 */.Zd),l=!(0,maybe/* isSome */.pC)(n.featureEffect)||n.featureEffect.excludedLabelsVisible||!!(s&definitions/* EFFECT_FLAG_0 */.iV);return!(a&&l)}_prepare(e){const t=e.featuresView.attributeView,i=new Set;CollisionEngine_b(e,((o,r)=>{for(;r.nextId();){if(i.has(r.id))continue;if(i.add(r.id),this._isFiltered(r.id,t,e.layerView)){t.setLabelMinZoom(r.id,CollisionEngine_c);continue}t.getLabelMinZoom(r.id)!==CollisionEngine_f?t.setLabelMinZoom(r.id,CollisionEngine_u):t.setLabelMinZoom(r.id,CollisionEngine_f)}}))}_collideVisible(e,t,i){const o=t.featuresView.attributeView,r=new Set;CollisionEngine_b(t,((t,n)=>{for(;n.nextId();)if(!r.has(n.id))if(t.key.level===i){if(0===o.getLabelMinZoom(n.id)){switch(e.insertMetrics(n)){case CollisionGrid_r:break;case CollisionGrid_n:o.setLabelMinZoom(n.id,CollisionEngine_c),r.add(n.id);break;case CollisionGrid_h:o.setLabelMinZoom(n.id,CollisionEngine_f),r.add(n.id)}}}else o.setLabelMinZoom(n.id,CollisionEngine_c)}))}_collideInvisible(e,t){const i=t.featuresView.attributeView,o=new Set;CollisionEngine_b(t,((t,r)=>{for(;r.nextId();)if(!o.has(r.id)&&i.getLabelMinZoom(r.id)===CollisionEngine_u){switch(e.insertMetrics(r)){case CollisionGrid_r:break;case CollisionGrid_n:i.setLabelMinZoom(r.id,CollisionEngine_u),o.add(r.id);break;case CollisionGrid_h:i.setLabelMinZoom(r.id,CollisionEngine_f),o.add(r.id)}}}))}_transformMetrics(t,i){for(const{tileRenderer:o,geometryType:r,vvEvaluators:n}of t)CollisionEngine_b(o,((t,s)=>{const a=o.featuresView.attributeView,l=t.transforms.labelMat2d;l[4]=Math.round(l[4]),l[5]=Math.round(l[5]);const d=l[4],c=l[5],u="polyline"===r;for(;s.next();){const t=s.boundsCount,o=s.anchorX,r=s.anchorY;let f=s.size;const b=n[0];if((0,maybe/* isSome */.pC)(b)){const e=b(a.getVVSize(s.id));f=isNaN(e)||null==e||e===1/0?f:e}const p=s.directionX*(f/2),y=s.directionY*(f/2);for(let e=0;e<t;e++){let t=o,n=s.anchorY;if(u){let o=t+s.boundsX(e)+p,r=n+s.boundsY(e)+y;i.state.rotation?(o=l[0]*o+l[2]*r+l[4],r=l[1]*o+l[3]*r+l[5]):(o+=d,r+=c),s.setBoundsComputedAnchorX(e,Math.floor(o)),s.setBoundsComputedAnchorY(e,Math.floor(r))}else{i.state.rotation?(t=l[0]*o+l[2]*r+l[4],n=l[1]*o+l[3]*r+l[5]):(t+=d,n+=c);const a=t+s.boundsX(e)+p,u=n+s.boundsY(e)+y;s.setBoundsComputedAnchorX(e,a),s.setBoundsComputedAnchorY(e,u)}}}}))}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/LabelManager.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst LabelManager_n=32,LabelManager_d=Logger/* default.getLogger */.Z.getLogger("esri.views.2d.layers.labels.LabelManager");let LabelManager_u=class extends((0,HandleOwner/* HandleOwnerMixin */.p)(Accessor/* default */.Z)){constructor(e){super(e),this._applyVisibilityPassThrottled=(0,throttle/* throttle */.P)(this._applyVisibilityPass,LabelManager_n,this),this.lastUpdateId=-1,this.updateRequested=!1,this.view=null}initialize(){this.collisionEngine=new CollisionEngine_g}destroy(){this.collisionEngine=null,this._applyVisibilityPassThrottled.remove(),this._applyVisibilityPassThrottled=null}get updating(){return this.updateRequested}update(e){this._applyVisibilityPassThrottled(e)}viewChange(){this.requestUpdate()}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}processUpdate(e){this._set("updateParameters",e),this.updateRequested&&(this.updateRequested=!1,this.update(e))}_applyVisibilityPass(e){try{const t=this.view.featuresTilingScheme.getClosestInfoForScale(e.state.scale).level;this.collisionEngine.run(this.view.allLayerViews.items,e,t)}catch(t){LabelManager_d.error(new core_Error/* default */.Z("mapview-labeling","Encountered an error during label decluttering",t))}}};(0,tslib_es6._)([(0,property/* property */.Cb)()],LabelManager_u.prototype,"updateRequested",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({readOnly:!0})],LabelManager_u.prototype,"updateParameters",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],LabelManager_u.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.Cb)()],LabelManager_u.prototype,"view",void 0),LabelManager_u=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.2d.layers.labels.LabelManager")],LabelManager_u);const LabelManager_c=LabelManager_u;\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js + 21 modules\nvar GraphicsView2D = __webpack_require__(57971);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js\nvar GraphicContainer = __webpack_require__(68114);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/Viewpoint.js + 2 modules\nvar Viewpoint = __webpack_require__(10961);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/Point.js + 2 modules\nvar Point = __webpack_require__(53446);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/viewpointUtils.js\nvar viewpointUtils = __webpack_require__(69050);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/input/InputManager.js + 1 modules\nvar InputManager = __webpack_require__(30842);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/navigation/ZoomBox.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst ZoomBox_a={container:"esri-zoom-box__container",overlay:"esri-zoom-box__overlay",background:"esri-zoom-box__overlay-background",box:"esri-zoom-box__outline"},ZoomBox_n={zoom:"Shift",counter:"Ctrl"};let ZoomBox_h=class extends Accessor/* default */.Z{constructor(t){super(t),this._container=null,this._overlay=null,this._backgroundShape=null,this._boxShape=null,this._box={x:0,y:0,width:0,height:0},this._redraw=this._redraw.bind(this)}destroy(){this.view=null}set view(t){this._handles&&this._handles.forEach((t=>{t.remove()})),this._handles=null,this._destroyOverlay(),this._set("view",t),t&&(t.on("drag",[ZoomBox_n.zoom],(t=>this._handleDrag(t,1)),InputManager/* ViewEventPriorities.INTERNAL */.f.INTERNAL),t.on("drag",[ZoomBox_n.zoom,ZoomBox_n.counter],(t=>this._handleDrag(t,-1)),InputManager/* ViewEventPriorities.INTERNAL */.f.INTERNAL))}_start(){this._createContainer(),this._createOverlay(),this.navigation.begin()}_update(t,e,r,i){this._box.x=t,this._box.y=e,this._box.width=r,this._box.height=i,this._rafId||(this._rafId=requestAnimationFrame(this._redraw))}_end(t,e,i,o,s){const a=this.view,n=a.toMap((0,screenUtils/* createScreenPoint */.vW)(t+.5*i,e+.5*o));let h=Math.max(i/a.width,o/a.height);-1===s&&(h=1/h),this._destroyOverlay(),this.navigation.end(),a.goTo({center:n,scale:a.scale*h})}_updateBox(t,e,r,i){const o=this._boxShape;o.setAttributeNS(null,"x",""+t),o.setAttributeNS(null,"y",""+e),o.setAttributeNS(null,"width",""+r),o.setAttributeNS(null,"height",""+i),o.setAttributeNS(null,"class",ZoomBox_a.box)}_updateBackground(t,e,r,i){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(t,e,r,i,this.view.width,this.view.height))}_createContainer(){const t=document.createElement("div");t.className=ZoomBox_a.container,this.view.root.appendChild(t),this._container=t}_createOverlay(){const t=this.view.width,e=this.view.height,r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttributeNS(null,"d","M 0 0 L "+t+" 0 L "+t+" "+e+" L 0 "+e+" Z"),r.setAttributeNS(null,"class",ZoomBox_a.background);const i=document.createElementNS("http://www.w3.org/2000/svg","rect"),o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.setAttributeNS(null,"class",ZoomBox_a.overlay),o.appendChild(r),o.appendChild(i),this._container.appendChild(o),this._backgroundShape=r,this._boxShape=i,this._overlay=o}_destroyOverlay(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._container=this._backgroundShape=this._boxShape=this._overlay=null}_toSVGPath(t,e,r,i,o,s){const a=t+r,n=e+i;return"M 0 0 L "+o+" 0 L "+o+" "+s+" L 0 "+s+" ZM "+t+" "+e+" L "+t+" "+n+" L "+a+" "+n+" L "+a+" "+e+" Z"}_handleDrag(t,e){const r=t.x,i=t.y,o=t.origin.x,s=t.origin.y;let a,n,h,l;switch(r>o?(a=o,h=r-o):(a=r,h=o-r),i>s?(n=s,l=i-s):(n=i,l=s-i),t.action){case"start":this._start();break;case"update":this._update(a,n,h,l);break;case"end":this._end(a,n,h,l,e)}t.stopPropagation()}_redraw(){if(!this._rafId)return;if(this._rafId=null,!this._overlay)return;const{x:t,y:e,width:r,height:i}=this._box;this._updateBox(t,e,r,i),this._updateBackground(t,e,r,i),this._rafId=requestAnimationFrame(this._redraw)}};(0,tslib_es6._)([(0,property/* property */.Cb)()],ZoomBox_h.prototype,"navigation",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],ZoomBox_h.prototype,"view",null),ZoomBox_h=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.2d.navigation.ZoomBox")],ZoomBox_h);const ZoomBox_l=ZoomBox_h;\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry.js\nvar geometry = __webpack_require__(91957);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/reactiveUtils.js\nvar reactiveUtils = __webpack_require__(76868);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/vec3.js\nvar vec3 = __webpack_require__(6766);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/navigation/FilteredFiniteDifference.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass FilteredFiniteDifference_t{constructor(t){this.gain=t}update(t){if(this.hasLastValue){const e=this.computeDelta(t);this._updateDelta(e)}this.lastValue=t}reset(){this.lastValue=void 0,this.filteredDelta=void 0}get hasLastValue(){return void 0!==this.lastValue}get hasFilteredDelta(){return void 0!==this.filteredDelta}computeDelta(t){return t-this.lastValue}_updateDelta(t){this.hasFilteredDelta?this.filteredDelta=(1-this.gain)*this.filteredDelta+this.gain*t:this.filteredDelta=t}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/navigation/Momentum.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass Momentum_t{constructor(t,i,o){this._initialVelocity=t,this._stopVelocity=i,this._friction=o,this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}get duration(){return this._duration}isFinished(t){return t>this.duration}get friction(){return this._friction}value(t){return this.valueFromInitialVelocity(this._initialVelocity,t)}valueDelta(t,i){const o=this.value(t);return this.value(t+i)-o}valueFromInitialVelocity(t,i){i=Math.min(i,this.duration);const o=1-this.friction;return t*(o**i-1)/Math.log(o)}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/navigation/PanPlanarMomentumEstimator.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass PanPlanarMomentumEstimator_c extends Momentum_t{constructor(e,t,i,s,n){super(e,t,i),this.sceneVelocity=s,this.direction=n}value(e){return super.valueFromInitialVelocity(this.sceneVelocity,e)}}class PanPlanarMomentumEstimator_h{constructor(e=300,t=12,i=.84){this.minimumInitialVelocity=e,this.stopVelocity=t,this.friction=i,this.enabled=!0,this.time=new FilteredFiniteDifference_t(.6),this.screen=[new FilteredFiniteDifference_t(.4),new FilteredFiniteDifference_t(.4)],this.scene=[new FilteredFiniteDifference_t(.6),new FilteredFiniteDifference_t(.6),new FilteredFiniteDifference_t(.6)],this.tmpDirection=(0,vec3f64.c)()}add(e,t,i){if(this.enabled){if(this.time.hasLastValue){if(this.time.computeDelta(i)<.015)return}this.screen[0].update(e[0]),this.screen[1].update(e[1]),this.scene[0].update(t[0]),this.scene[1].update(t[1]),this.scene[2].update(t[2]),this.time.update(i)}}reset(){this.screen[0].reset(),this.screen[1].reset(),this.scene[0].reset(),this.scene[1].reset(),this.scene[2].reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.screen[0].hasFilteredDelta)return null;const e=this.screen[0].filteredDelta,t=this.screen[1].filteredDelta,i=Math.sqrt(e*e+t*t)/this.time.filteredDelta;return Math.abs(i)<this.minimumInitialVelocity?null:this.createMomentum(i,this.stopVelocity,this.friction)}createMomentum(s,n,r){(0,vec3.s)(this.tmpDirection,this.scene[0].filteredDelta,this.scene[1].filteredDelta,this.scene[2].filteredDelta);const h=(0,vec3.l)(this.tmpDirection);h>0&&(0,vec3.a)(this.tmpDirection,this.tmpDirection,1/h);const a=h/this.time.filteredDelta;return new PanPlanarMomentumEstimator_c(s,n,r,a,this.tmpDirection)}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/navigation/actions/Pan.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nlet Pan_d=class extends Accessor/* default */.Z{constructor(t){super(t),this.animationTime=0,this.momentumEstimator=new PanPlanarMomentumEstimator_h(500,6,.92),this.momentum=null,this.tmpMomentum=(0,vec3f64.c)(),this.momentumFinished=!1,this.viewpoint=new Viewpoint/* default */.Z({targetGeometry:new Point/* default */.Z,scale:0,rotation:0}),(0,reactiveUtils/* when */.gx)((()=>this.momentumFinished),(()=>this.navigation.stop()))}begin(t,i){this.navigation.begin(),this.momentumEstimator.reset(),this.addToEstimator(i),this.previousDrag=i}update(t,i){this.addToEstimator(i);let o=i.center.x,m=i.center.y;const s=this.previousDrag;o=s?s.center.x-o:-o,m=s?m-s.center.y:m,t.viewpoint=(0,viewpointUtils/* translateBy */.Rx)(this.viewpoint,t.viewpoint,[o||0,m||0]),this.previousDrag=i}end(t,i){this.addToEstimator(i);const o=t.navigation.momentumEnabled;this.momentum=o?this.momentumEstimator.evaluateMomentum():null,this.animationTime=0,this.momentum&&this.onAnimationUpdate(t),this.previousDrag=null,this.navigation.end()}addToEstimator(t){const i=t.center.x,o=t.center.y,m=(0,screenUtils/* createScreenPointArray */.s1)(-i,o),e=(0,vec3f64.f)(-i,o,0);this.momentumEstimator.add(m,e,.001*t.timestamp)}onAnimationUpdate(t){this.navigation.animationManager.animateContinous(t.viewpoint,((i,o)=>{this.momentumFinished=!this.momentum||this.momentum.isFinished(this.animationTime);const m=.001*o;if(!this.momentumFinished){const o=this.momentum.valueDelta(this.animationTime,m);(0,vec3.a)(this.tmpMomentum,this.momentum.direction,o),(0,viewpointUtils/* translateBy */.Rx)(i,i,this.tmpMomentum),t.constraints.constrainByGeometry(i)}this.animationTime+=m}))}stopMomentumNavigation(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())}};(0,tslib_es6._)([(0,property/* property */.Cb)()],Pan_d.prototype,"momentumFinished",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],Pan_d.prototype,"viewpoint",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],Pan_d.prototype,"navigation",void 0),Pan_d=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.2d.navigation.actions.Pan")],Pan_d);const Pan_v=Pan_d;\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/navigation/MomentumEstimator.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass MomentumEstimator_s{constructor(t=2.5,i=.01,s=.95,l=12){this.minimumInitialVelocity=t,this.stopVelocity=i,this.friction=s,this.maxVelocity=l,this.enabled=!0,this.value=new FilteredFiniteDifference_t(.8),this.time=new FilteredFiniteDifference_t(.3)}add(t,e){if(this.enabled){if(this.time.hasLastValue){if(this.time.computeDelta(e)<.01)return;if(this.value.hasFilteredDelta){const e=this.value.computeDelta(t);this.value.filteredDelta*e<0&&this.value.reset()}}this.time.update(e),this.value.update(t)}}reset(){this.value.reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.value.hasFilteredDelta)return null;let e=this.value.filteredDelta/this.time.filteredDelta;return e=(0,mathUtils/* clamp */.uZ)(e,-this.maxVelocity,this.maxVelocity),Math.abs(e)<this.minimumInitialVelocity?null:this.createMomentum(e,this.stopVelocity,this.friction)}createMomentum(t,e,s){return new Momentum_t(t,e,s)}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/navigation/RotationMomentumEstimator.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass RotationMomentumEstimator_a extends MomentumEstimator_s{constructor(t=3,a=.01,s=.95,e=12){super(t,a,s,e)}add(t,a){if(this.value.hasLastValue){const a=this.value.lastValue;let s=t-a;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;t=a+s}super.add(t,a)}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/navigation/ZoomMomentumEstimator.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass ZoomMomentumEstimator_r extends Momentum_t{constructor(e,t,r){super(e,t,r)}value(e){const t=super.value(e);return Math.exp(t)}valueDelta(e,t){const r=super.value(e),s=super.value(e+t)-r;return Math.exp(s)}}class ZoomMomentumEstimator_s extends MomentumEstimator_s{constructor(e=2.5,t=.01,r=.95,s=12){super(e,t,r,s)}add(e,t){super.add(Math.log(e),t)}createMomentum(e,t,s){return new ZoomMomentumEstimator_r(e,t,s)}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/navigation/actions/Pinch.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nlet Pinch_l=class extends Accessor/* default */.Z{constructor(t){super(t),this._animationTime=0,this._momentumFinished=!1,this._rotationMomentumEstimator=new RotationMomentumEstimator_a(.6,.15,.95),this._rotationDirection=1,this._zoomDirection=1,this._zoomMomentumEstimator=new ZoomMomentumEstimator_s,this._zoomOnly=null,this.zoomMomentum=null,this.rotateMomentum=null,this.viewpoint=new Viewpoint/* default */.Z({targetGeometry:new Point/* default */.Z,scale:0,rotation:0}),this.watch("_momentumFinished",(t=>{t&&this.navigation.stop()}))}begin(t,o){this.navigation.begin(),this._rotationMomentumEstimator.reset(),this._zoomMomentumEstimator.reset(),this._zoomOnly=null,this._previousAngle=this._startAngle=o.angle,this._previousRadius=this._startRadius=o.radius,this._previousCenter=o.center,this._updateTimestamp=null,t.constraints.rotationEnabled&&this.addToRotateEstimator(0,o.timestamp),this.addToZoomEstimator(o,1)}update(t,o){null===this._updateTimestamp&&(this._updateTimestamp=o.timestamp);const i=o.angle,s=o.radius,e=o.center,n=Math.abs(180*(i-this._startAngle)/Math.PI),m=Math.abs(s-this._startRadius),a=this._startRadius/s;if(this._previousRadius){const r=s/this._previousRadius;let h=180*(i-this._previousAngle)/Math.PI;this._rotationDirection=h>=0?1:-1,this._zoomDirection=r>=1?1:-1,t.constraints.rotationEnabled?(null===this._zoomOnly&&o.timestamp-this._updateTimestamp>200&&(this._zoomOnly=m-n>0),null===this._zoomOnly||this._zoomOnly?h=0:this.addToRotateEstimator(i-this._startAngle,o.timestamp)):h=0,this.addToZoomEstimator(o,a),this.navigation.setViewpoint([e.x,e.y],1/r,h,[this._previousCenter.x-e.x,e.y-this._previousCenter.y])}this._previousAngle=i,this._previousRadius=s,this._previousCenter=e}end(t){this.rotateMomentum=this._rotationMomentumEstimator.evaluateMomentum(),this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum(),this._animationTime=0,(this.rotateMomentum||this.zoomMomentum)&&this.onAnimationUpdate(t),this.navigation.end()}addToRotateEstimator(t,o){this._rotationMomentumEstimator.add(t,.001*o)}addToZoomEstimator(t,o){this._zoomMomentumEstimator.add(o,.001*t.timestamp)}canZoomIn(t){const o=t.scale,i=t.constraints.effectiveMaxScale;return 0===i||o>i}canZoomOut(t){const o=t.scale,i=t.constraints.effectiveMinScale;return 0===i||o<i}onAnimationUpdate(t){this.navigation.animationManager.animateContinous(t.viewpoint,((o,i)=>{const s=!this.canZoomIn(t)&&this._zoomDirection>1||!this.canZoomOut(t)&&this._zoomDirection<1,e=!this.rotateMomentum||this.rotateMomentum.isFinished(this._animationTime),u=s||!this.zoomMomentum||this.zoomMomentum.isFinished(this._animationTime),p=.001*i;if(this._momentumFinished=e&&u,!this._momentumFinished){const i=this.rotateMomentum?Math.abs(this.rotateMomentum.valueDelta(this._animationTime,p))*this._rotationDirection*180/Math.PI:0;let s=this.zoomMomentum?Math.abs(this.zoomMomentum.valueDelta(this._animationTime,p)):1;const e=(0,vec2f64.a)(),u=(0,vec2f64.a)();if(this._previousCenter){(0,vec2.s)(e,this._previousCenter.x,this._previousCenter.y),(0,viewpointUtils/* getPaddingScreenTranslation */.Dq)(u,t.size,t.padding),(0,vec2.m)(e,e,u);const{constraints:a,scale:p}=t,c=p*s;s<1&&!a.canZoomInTo(c)?(s=p/a.effectiveMaxScale,this.zoomMomentum=null,this.rotateMomentum=null):s>1&&!a.canZoomOutTo(c)&&(s=p/a.effectiveMinScale,this.zoomMomentum=null,this.rotateMomentum=null),(0,viewpointUtils/* scaleAndRotateBy */.UZ)(o,t.viewpoint,s,i,e,t.size),t.constraints.constrainByGeometry(o)}}this._animationTime+=p}))}stopMomentumNavigation(){(this.rotateMomentum||this.zoomMomentum)&&(this.rotateMomentum&&(this._rotationMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop())}};(0,tslib_es6._)([(0,property/* property */.Cb)()],Pinch_l.prototype,"_momentumFinished",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],Pinch_l.prototype,"viewpoint",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],Pinch_l.prototype,"navigation",void 0),Pinch_l=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.2d.navigation.actions.Pinch")],Pinch_l);const Pinch_=Pinch_l;\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/navigation/actions/Rotate.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst Rotate_u=(0,vec2f64.a)(),Rotate_d=(0,vec2f64.a)();let j=class extends Accessor/* default */.Z{constructor(t){super(t),this._previousCenter=(0,vec2f64.a)(),this.viewpoint=new Viewpoint/* default */.Z({targetGeometry:new Point/* default */.Z,scale:0,rotation:0})}begin(t,e){this.navigation.begin(),(0,vec2.s)(this._previousCenter,e.center.x,e.center.y)}update(t,e){const{state:{size:o,padding:r}}=t;(0,vec2.s)(Rotate_u,e.center.x,e.center.y),(0,viewpointUtils/* getAnchor */.ni)(Rotate_d,o,r),t.viewpoint=(0,viewpointUtils/* rotateBy */.$H)(this.viewpoint,t.state.paddedViewState.viewpoint,(0,viewpointUtils/* angleBetween */.dI)(Rotate_d,this._previousCenter,Rotate_u)),(0,vec2.c)(this._previousCenter,Rotate_u)}end(){this.navigation.end()}};(0,tslib_es6._)([(0,property/* property */.Cb)()],j.prototype,"viewpoint",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],j.prototype,"navigation",void 0),j=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.2d.actions.Rotate")],j);const Rotate_h=j;\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/navigation/MapViewNavigation.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst MapViewNavigation_l=10,MapViewNavigation_w=1,MapViewNavigation_v=new Viewpoint/* default */.Z({targetGeometry:new Point/* default */.Z}),MapViewNavigation_d=[0,0],MapViewNavigation_g=250;let MapViewNavigation_=class extends Accessor/* default */.Z{constructor(t){super(t),this._endTimer=null,this.animationManager=null}initialize(){this.pan=new Pan_v({navigation:this}),this.rotate=new Rotate_h({navigation:this}),this.pinch=new Pinch_({navigation:this}),this.zoomBox=new ZoomBox_l({view:this.view,navigation:this})}destroy(){this.pan.destroy(),this.rotate.destroy(),this.pinch.destroy(),this.zoomBox.destroy(),this.pan=this.rotate=this.pinch=this.zoomBox=this.animationManager=null}begin(){this._set("interacting",!0)}end(){this._lastEventTimestamp=performance.now(),this._startTimer(MapViewNavigation_g)}async zoom(t,i=this._getDefaultAnchor()){if(this.stop(),this.begin(),this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return t<1?this.zoomIn(i):this.zoomOut(i);this.setViewpoint(i,t,0,[0,0])}async zoomIn(t){const i=this.view,o=i.constraints.snapToNextScale(i.scale);return this._zoomToScale(o,t)}async zoomOut(t){const i=this.view,o=i.constraints.snapToPreviousScale(i.scale);return this._zoomToScale(o,t)}setViewpoint(t,i,o,n){this.begin(),this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,t,i,o,n),this.end()}setViewpointImmediate(t,i=0,o=[0,0],n=this._getDefaultAnchor()){this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,n,t,i,o)}continousRotateClockwise(){const t=this.get("view.viewpoint");this.animationManager.animateContinous(t,(t=>{(0,viewpointUtils/* rotateBy */.$H)(t,t,-MapViewNavigation_w)}))}continousRotateCounterclockwise(){const t=this.get("view.viewpoint");this.animationManager.animateContinous(t,(t=>{(0,viewpointUtils/* rotateBy */.$H)(t,t,MapViewNavigation_w)}))}resetRotation(){this.view.rotation=0}continousPanLeft(){this._continuousPan([-MapViewNavigation_l,0])}continousPanRight(){this._continuousPan([MapViewNavigation_l,0])}continousPanUp(){this._continuousPan([0,MapViewNavigation_l])}continousPanDown(){this._continuousPan([0,-MapViewNavigation_l])}stop(){this.pan.stopMomentumNavigation(),this.animationManager.stop(),this.end(),null!==this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=null,this._set("interacting",!1))}_continuousPan(t){const i=this.view.viewpoint;this.animationManager.animateContinous(i,(i=>{(0,viewpointUtils/* translateBy */.Rx)(i,i,t),this.view.constraints.constrainByGeometry(i)}))}_startTimer(t){return null!==this._endTimer||(this._endTimer=setTimeout((()=>{this._endTimer=null;const t=performance.now()-this._lastEventTimestamp;t<MapViewNavigation_g?this._endTimer=this._startTimer(t):this._set("interacting",!1)}),t)),this._endTimer}_getDefaultAnchor(){const{size:t,padding:{left:i,right:o,top:n,bottom:e}}=this.view;return MapViewNavigation_d[0]=.5*(t[0]-o+i),MapViewNavigation_d[1]=.5*(t[1]-e+n),MapViewNavigation_d}async _zoomToScale(t,i=this._getDefaultAnchor()){const{view:o}=this,{constraints:n,scale:e,viewpoint:s,size:a,padding:r}=o,h=n.canZoomInTo(t),m=n.canZoomOutTo(t);if(!(t<e&&!h||t>e&&!m))return (0,viewpointUtils/* padAndScaleAndRotateBy */.gG)(MapViewNavigation_v,s,t/e,0,i,a,r),n.constrainByGeometry(MapViewNavigation_v),o.goTo(MapViewNavigation_v,{animate:!0})}_scaleRotateTranslateViewpoint(t,i,o,n,e){const{view:s}=this,{size:a,padding:h,constraints:m,scale:p,viewpoint:u}=s,l=p*o,w=m.canZoomInTo(l),v=m.canZoomOutTo(l);return(o<1&&!w||o>1&&!v)&&(o=1),(0,viewpointUtils/* translateBy */.Rx)(u,u,e),(0,viewpointUtils/* padAndScaleAndRotateBy */.gG)(t,u,o,n,i,a,h),m.constrainByGeometry(t)}};(0,tslib_es6._)([(0,property/* property */.Cb)()],MapViewNavigation_.prototype,"animationManager",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({type:Boolean,readOnly:!0})],MapViewNavigation_.prototype,"interacting",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],MapViewNavigation_.prototype,"pan",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],MapViewNavigation_.prototype,"pinch",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],MapViewNavigation_.prototype,"rotate",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],MapViewNavigation_.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],MapViewNavigation_.prototype,"zoomBox",void 0),MapViewNavigation_=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.2d.navigation.MapViewNavigation")],MapViewNavigation_);const MapViewNavigation_T=MapViewNavigation_;\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Handles.js\nvar Handles = __webpack_require__(44584);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/urlUtils.js\nvar urlUtils = __webpack_require__(3466);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js\nvar DisplayObject = __webpack_require__(51118);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/MagnifierPrograms.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst MagnifierPrograms_a={shaders:{vertexShader:(0,resolver/* resolveIncludes */.w)("magnifier/magnifier.vert"),fragmentShader:(0,resolver/* resolveIncludes */.w)("magnifier/magnifier.frag")},attributes:new Map([["a_pos",0]])};function MagnifierPrograms_t(r){return (0,ProgramTemplate/* createProgram */.H)(r,MagnifierPrograms_a)}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/support/requestImageUtils.js\nvar requestImageUtils = __webpack_require__(44883);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/magnifier/resources.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nasync function resources_s(s){const r=__webpack_require__.e(/* import() */ 2030).then(__webpack_require__.bind(__webpack_require__, 12030)),i=__webpack_require__.e(/* import() */ 9110).then(__webpack_require__.bind(__webpack_require__, 49110)),o=(0,requestImageUtils/* requestImage */.t)((await r).default,{signal:s}),e=(0,requestImageUtils/* requestImage */.t)((await i).default,{signal:s}),m={mask:await o,overlay:await e};return (0,promiseUtils/* throwIfAborted */.k_)(s),m}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/magnifier/MagnifierView2D.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass MagnifierView2D_E extends DisplayObject/* DisplayObject */.s{constructor(){super(),this._handles=new Handles/* default */.Z,this._resourcePixelRatio=1,this.visible=!1}destroy(){this._handles.destroy(),this._handles=null,this._disposeRenderResources(),this._resourcesTask&&(this._resourcesTask.abort(),this._resourcesTask=null)}get background(){return this._background}set background(e){this._background=e,this.requestRender()}get magnifier(){return this._magnifier}set magnifier(e){this._magnifier=e,this._handles.removeAll(),this._handles.add([(0,watchUtils/* init */.S1)(e,"version",(()=>{this.visible=e.visible&&(0,maybe/* isSome */.pC)(e.position)&&e.size>0,this.requestRender()})),e.watch(["mask","overlay"],(()=>this._reloadResources())),e.watch("size",(()=>{this._disposeRenderResources(),this.requestRender()}))])}_createTransforms(){return{dvs:(0,mat3f32.c)()}}doRender(e){var r;const i=e.context;if(!this._resourcesTask)return void this._reloadResources();if(e.drawPhase!==enums/* WGLDrawPhase.MAP */.jx.MAP||!this._canRender())return;this._updateResources(e);const a=this._magnifier;if((0,maybe/* isNone */.Wi)(a.position))return;const o=e.pixelRatio,n=a.size*o,l=1/a.factor,h=Math.ceil(l*n);this._readbackTexture.resize(h,h);const{size:m}=e.state,u=o*m[0],d=o*m[1],_=.5*h,p=.5*h,f=(0,mathUtils/* clamp */.uZ)(o*a.position.x,_,u-_-1),T=(0,mathUtils/* clamp */.uZ)(d-o*a.position.y,p,d-p-1);i.setBlendingEnabled(!0);const b=f-_,x=T-p,R=this._readbackTexture;i.bindTexture(R,0),i.gl.copyTexImage2D(R.descriptor.target,0,R.descriptor.pixelFormat,b,x,h,h,0);const y=null==(r=this.background)?void 0:r.color,k=y?[y.a*y.r/255,y.a*y.g/255,y.a*y.b/255,y.a]:[1,1,1,1],v=(f+a.offset.x*o)/u*2-1,A=(T-a.offset.y*o)/d*2-1,E=n/u*2,w=n/d*2,j=this._program;i.bindVAO(this._vertexArrayObject),i.bindTexture(this._overlayTexture,6),i.bindTexture(this._maskTexture,7),i.useProgram(j),j.setUniform4fv("u_background",k),j.setUniform1i("u_readbackTexture",0),j.setUniform1i("u_overlayTexture",6),j.setUniform1i("u_maskTexture",7),j.setUniform4f("u_drawPos",v,A,E,w),j.setUniform1i("u_maskEnabled",a.maskEnabled?1:0),j.setUniform1i("u_overlayEnabled",a.overlayEnabled?1:0),i.setStencilTestEnabled(!1),i.setColorMask(!0,!0,!0,!0),i.drawArrays(webgl_enums/* PrimitiveType.TRIANGLE_STRIP */.MX.TRIANGLE_STRIP,0,4),i.bindVAO()}_canRender(){return this.mask&&this.overlay&&null!=this._magnifier}_reloadResources(){this._resourcesTask&&this._resourcesTask.abort();const r=(0,maybe/* isSome */.pC)(this._magnifier)?this._magnifier.maskUrl:null,t=(0,maybe/* isSome */.pC)(this._magnifier)?this._magnifier.overlayUrl:null;this._resourcesTask=(0,promiseUtils/* createTask */.vr)((async a=>{const o=(0,maybe/* isNone */.Wi)(r)||(0,maybe/* isNone */.Wi)(t)?resources_s(a):null,n=(0,maybe/* isSome */.pC)(r)?(0,request["default"])(r,{responseType:"image",signal:a}).then((e=>e.data)):o.then((e=>e.mask)),l=(0,maybe/* isSome */.pC)(t)?(0,request["default"])(t,{responseType:"image",signal:a}).then((e=>e.data)):o.then((e=>e.overlay)),[h,m]=await Promise.all([n,l]);this.mask=h,this.overlay=m,this._disposeRenderResources(),this.requestRender()}))}_disposeRenderResources(){this._readbackTexture=(0,maybe/* disposeMaybe */.O3)(this._readbackTexture),this._overlayTexture=(0,maybe/* disposeMaybe */.O3)(this._overlayTexture),this._maskTexture=(0,maybe/* disposeMaybe */.O3)(this._maskTexture),this._vertexArrayObject=(0,maybe/* disposeMaybe */.O3)(this._vertexArrayObject),this._program=(0,maybe/* disposeMaybe */.O3)(this._program)}_updateResources(e){if(e.pixelRatio!==this._resourcePixelRatio&&this._disposeRenderResources(),this._readbackTexture)return;const r=e.context;this._resourcePixelRatio=e.pixelRatio;const t=Math.ceil(this._magnifier.size*e.pixelRatio);this._program=MagnifierPrograms_t(r);const s=new Uint16Array([0,1,0,0,1,1,1,0]),i=MagnifierPrograms_a.attributes;this._vertexArrayObject=new VertexArrayObject/* VertexArrayObject */.U(r,i,DefaultVertexAttributeLayouts/* Pos2us */.cD,{geometry:BufferObject/* BufferObject.createVertex */.f.createVertex(r,webgl_enums/* Usage.STATIC_DRAW */.l1.STATIC_DRAW,s)}),this.overlay.width=t,this.overlay.height=t,this._overlayTexture=new Texture/* Texture */.x(r,{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,internalFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,flipped:!0,preMultiplyAlpha:!(0,urlUtils/* isSVG */.zd)(this.overlay.src)||!e.context.driverTest.svgAlwaysPremultipliesAlpha},this.overlay),this.mask.width=t,this.mask.height=t,this._maskTexture=new Texture/* Texture */.x(r,{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.ALPHA */.VI.ALPHA,internalFormat:webgl_enums/* PixelFormat.ALPHA */.VI.ALPHA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.NEAREST */.cw.NEAREST,flipped:!0},this.mask);const a=1/this._magnifier.factor;this._readbackTexture=new Texture/* Texture */.x(r,{target:webgl_enums/* TextureType.TEXTURE_2D */.No.TEXTURE_2D,pixelFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,internalFormat:webgl_enums/* PixelFormat.RGBA */.VI.RGBA,dataType:webgl_enums/* PixelType.UNSIGNED_BYTE */.Br.UNSIGNED_BYTE,wrapMode:webgl_enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,samplingMode:webgl_enums/* TextureSamplingMode.LINEAR */.cw.LINEAR,flipped:!1,width:Math.ceil(a*t),height:Math.ceil(a*t)})}}\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/mapViewDeps.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\n\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/2d/mapViewDeps.js_+_75_modules?')},12045:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Bh": () => (/* binding */ l),\n/* harmony export */   "IB": () => (/* binding */ A),\n/* harmony export */   "j7": () => (/* binding */ E),\n/* harmony export */   "je": () => (/* binding */ i),\n/* harmony export */   "ve": () => (/* binding */ _),\n/* harmony export */   "wu": () => (/* binding */ c)\n/* harmony export */ });\n/* unused harmony exports OITPolygonOffset, blendingColor, oitDepthWrite */\n/* harmony import */ var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(70984);\n/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(91907);\n/* harmony import */ var _webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17346);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst c=(0,_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__/* .separateBlendingParams */ .wK)(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor.SRC_ALPHA */ .zi.SRC_ALPHA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor.ONE */ .zi.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor.ONE_MINUS_SRC_ALPHA */ .zi.ONE_MINUS_SRC_ALPHA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor.ONE_MINUS_SRC_ALPHA */ .zi.ONE_MINUS_SRC_ALPHA),N=(0,_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__/* .simpleBlendingParams */ ["if"])(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor.ONE */ .zi.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor.ONE */ .zi.ONE),A=(0,_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__/* .simpleBlendingParams */ ["if"])(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor.ZERO */ .zi.ZERO,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor.ONE_MINUS_SRC_ALPHA */ .zi.ONE_MINUS_SRC_ALPHA);function E(r){return r===_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .TransparencyPassType.FrontFace */ .Am.FrontFace?null:r===_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .TransparencyPassType.Alpha */ .Am.Alpha?A:N}function S(r){return r===n.FrontFace?u:null}const _=5e5,f={factor:-1,units:-2};function i(n){return n?f:null}function l(r,e=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction.LESS */ .wb.LESS){return r===_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .TransparencyPassType.NONE */ .Am.NONE||r===_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .TransparencyPassType.FrontFace */ .Am.FrontFace?e:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction.LEQUAL */ .wb.LEQUAL}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js?')},70984:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Am": () => (/* binding */ O),\n/* harmony export */   "CE": () => (/* binding */ l),\n/* harmony export */   "Gv": () => (/* binding */ N),\n/* harmony export */   "JJ": () => (/* binding */ C),\n/* harmony export */   "MX": () => (/* binding */ c),\n/* harmony export */   "Rw": () => (/* binding */ i),\n/* harmony export */   "Vr": () => (/* binding */ n),\n/* harmony export */   "hU": () => (/* binding */ a)\n/* harmony export */ });\n/* unused harmony exports AntiAliasingMode, Decorations, Object3DState, RenderRequestType, UpdatePolicy, ValidationState */\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nvar n,N,e,O,t,i,a,o,u,c,l,A,C,D;!function(n){n[n.None=0]="None",n[n.Front=1]="Front",n[n.Back=2]="Back",n[n.COUNT=3]="COUNT"}(n||(n={})),function(n){n[n.Less=0]="Less",n[n.Lequal=1]="Lequal",n[n.COUNT=2]="COUNT"}(N||(N={})),function(n){n[n.NONE=0]="NONE",n[n.SMAA=1]="SMAA"}(e||(e={})),function(n){n[n.Color=0]="Color",n[n.Alpha=1]="Alpha",n[n.FrontFace=2]="FrontFace",n[n.NONE=3]="NONE",n[n.COUNT=4]="COUNT"}(O||(O={})),function(n){n[n.BACKGROUND=0]="BACKGROUND",n[n.UPDATE=1]="UPDATE"}(t||(t={})),function(n){n[n.NOT_LOADED=0]="NOT_LOADED",n[n.LOADING=1]="LOADING",n[n.LOADED=2]="LOADED"}(i||(i={})),function(n){n[n.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",n[n.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(a||(a={})),function(n){n[n.ASYNC=0]="ASYNC",n[n.SYNC=1]="SYNC"}(o||(o={})),function(n){n[n.Highlight=0]="Highlight",n[n.MaskOccludee=1]="MaskOccludee",n[n.COUNT=2]="COUNT"}(u||(u={})),function(n){n[n.Triangle=0]="Triangle",n[n.Point=1]="Point",n[n.Line=2]="Line"}(c||(c={})),function(n){n[n.STRETCH=1]="STRETCH",n[n.PAD=2]="PAD"}(l||(l={})),function(n){n[n.CHANGED=0]="CHANGED",n[n.UNCHANGED=1]="UNCHANGED"}(A||(A={})),function(n){n[n.Blend=0]="Blend",n[n.Opaque=1]="Opaque",n[n.Mask=2]="Mask",n[n.MaskBlend=3]="MaskBlend",n[n.COUNT=4]="COUNT"}(C||(C={})),function(n){n[n.OFF=0]="OFF",n[n.ON=1]="ON"}(D||(D={}));\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js?')},59720:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "G": () => (/* binding */ s)\n});\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/maybe.js\nvar maybe = __webpack_require__(61681);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/core/NestedMap.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass t{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(t,e){var r;return null==(r=this._outer.get(t))?void 0:r.get(e)}set(t,e,r){const s=this._outer.get(t);s?s.set(e,r):this._outer.set(t,new Map([[e,r]]))}delete(t,e){const r=this._outer.get(t);r&&(r.delete(e),0===r.size&&this._outer.delete(t))}forEach(t){this._outer.forEach(((e,r)=>t(e,r)))}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/Program.js\nvar Program = __webpack_require__(19134);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/webgl/ProgramCache.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass s{constructor(r){this._rctx=r,this._store=new t}dispose(){this._store.forEach((r=>r.forEach((r=>r.dispose())))),this._store.clear()}acquire(t,s,o,c){const i=this._store.get(t,s);if((0,maybe/* isSome */.pC)(i))return i.ref(),i;const h=new Program/* Program */.$(this._rctx,t,s,o,c);return h.ref(),this._store.set(t,s,h),h}get test(){let r=0;return this._store.forEach((t=>t.forEach((t=>r+=t.hasGLName?2:1)))),{cachedWebGLObjects:r}}}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/webgl/ProgramCache.js_+_1_modules?')},30560:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "LF": () => (/* binding */ o),\n/* harmony export */   "po": () => (/* binding */ r)\n/* harmony export */ });\n/* unused harmony exports decodeDoubleArray, encodeDouble */\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction n(n,o){e[0]=n,e[1]=n-e[0],o[0]=e[0],o[1]=e[1]}function o(n,o,t){for(let r=0;r<t;++r)o[2*r]=n[r],o[2*r+1]=n[r]-o[2*r]}function t(n,o,t){for(let r=0;r<t;++r)o[r]=n[2*r]+n[2*r+1]}function r(n,t,r,c){for(let l=0;l<c;++l)f[0]=n[l],o(f,e,1),t[l]=e[0],r[l]=e[1]}const f=new Float64Array(1),e=new Float32Array(2);\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/webgl/doublePrecisionUtils.js?')},73353:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "K": () => (/* binding */ e)\n/* harmony export */ });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction e(e){let n="";for(const o in e){const t=e[o];if("boolean"==typeof t)t&&(n+=`#define ${o}\\n`);else if("number"==typeof t)n+=`#define ${o} ${t.toFixed()}\\n`;else if("object"==typeof t){const e=t.options;let f=0;for(const o in e)n+=`#define ${e[o]} ${(f++).toFixed()}\\n`;n+=`#define ${o} ${e[t.value]}\\n`}}return n}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/webgl/programUtils.js?')},17346:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "BK": () => (/* binding */ c),\n/* harmony export */   "LZ": () => (/* binding */ a),\n/* harmony export */   "if": () => (/* binding */ s),\n/* harmony export */   "jp": () => (/* binding */ M),\n/* harmony export */   "sm": () => (/* binding */ W),\n/* harmony export */   "wK": () => (/* binding */ l),\n/* harmony export */   "zp": () => (/* binding */ h)\n/* harmony export */ });\n/* unused harmony exports backFaceCullingParams, frontFaceCullingParams, makeBlending, makeColorWrite, makeCulling, makeDepthTest, makeDepthWrite, makePolygonOffset, makeStencilTest, makeStencilWrite */\n/* harmony import */ var _3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(70984);\n/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(91907);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction s(t,e,i=_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendOperation.ADD */ .db.ADD,s=[0,0,0,0]){return{srcRgb:t,srcAlpha:t,dstRgb:e,dstAlpha:e,opRgb:i,opAlpha:i,color:{r:s[0],g:s[1],b:s[2],a:s[3]}}}function l(t,e,i,s,l=_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendOperation.ADD */ .db.ADD,r=_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendOperation.ADD */ .db.ADD,o=[0,0,0,0]){return{srcRgb:t,srcAlpha:e,dstRgb:i,dstAlpha:s,opRgb:l,opAlpha:r,color:{r:o[0],g:o[1],b:o[2],a:o[3]}}}const r={face:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .Face.BACK */ .LR.BACK,mode:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CullMode.CCW */ .Wf.CCW},o={face:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .Face.FRONT */ .LR.FRONT,mode:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CullMode.CCW */ .Wf.CCW},h=e=>e===_3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .CullFaceOptions.Back */ .Vr.Back?r:e===_3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .CullFaceOptions.Front */ .Vr.Front?o:null,a={zNear:0,zFar:1},c={r:!0,g:!0,b:!0,a:!0};function _(t){return T.intern(t)}function d(t){return D.intern(t)}function p(t){return C.intern(t)}function u(t){return A.intern(t)}function g(t){return w.intern(t)}function f(t){return B.intern(t)}function v(t){return z.intern(t)}function I(t){return j.intern(t)}function W(t){return N.intern(t)}class S{constructor(t,e){this.makeKey=t,this.makeRef=e,this.interns=new Map}intern(t){if(!t)return null;const e=this.makeKey(t),i=this.interns;return i.has(e)||i.set(e,this.makeRef(t)),i.get(e)}}function b(t){return"["+t.join(",")+"]"}const T=new S(y,(t=>({__tag:"Blending",...t})));function y(t){return t?b([t.srcRgb,t.srcAlpha,t.dstRgb,t.dstAlpha,t.opRgb,t.opAlpha,t.color.r,t.color.g,t.color.b,t.color.a]):null}const D=new S(O,(t=>({__tag:"Culling",...t})));function O(t){return t?b([t.face,t.mode]):null}const C=new S(m,(t=>({__tag:"PolygonOffset",...t})));function m(t){return t?b([t.factor,t.units]):null}const A=new S(R,(t=>({__tag:"DepthTest",...t})));function R(t){return t?b([t.func]):null}const w=new S(k,(t=>({__tag:"StencilTest",...t})));function k(t){return t?b([t.function.func,t.function.ref,t.function.mask,t.operation.fail,t.operation.zFail,t.operation.zPass]):null}const B=new S(P,(t=>({__tag:"DepthWrite",...t})));function P(t){return t?b([t.zNear,t.zFar]):null}const z=new S(F,(t=>({__tag:"ColorWrite",...t})));function F(t){return t?b([t.r,t.g,t.b,t.a]):null}const j=new S(K,(t=>({__tag:"StencilWrite",...t})));function K(t){return t?b([t.mask]):null}const N=new S(x,(t=>({blending:_(t.blending),culling:d(t.culling),polygonOffset:p(t.polygonOffset),depthTest:u(t.depthTest),stencilTest:g(t.stencilTest),depthWrite:f(t.depthWrite),colorWrite:v(t.colorWrite),stencilWrite:I(t.stencilWrite)})));function x(t){return t?b([y(t.blending),O(t.culling),m(t.polygonOffset),R(t.depthTest),k(t.stencilTest),P(t.depthWrite),F(t.colorWrite),K(t.stencilWrite)]):null}class M{constructor(t){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=t}setPipeline(t){(this._pipelineInvalid||t!==this._pipeline)&&(this._setBlending(t.blending),this._setCulling(t.culling),this._setPolygonOffset(t.polygonOffset),this._setDepthTest(t.depthTest),this._setStencilTest(t.stencilTest),this._setDepthWrite(t.depthWrite),this._setColorWrite(t.colorWrite),this._setStencilWrite(t.stencilWrite),this._pipeline=t),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}_setBlending(t){this._blending=this._setSubState(t,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(t){this._culling=this._setSubState(t,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(t){this._polygonOffset=this._setSubState(t,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(t){this._depthTest=this._setSubState(t,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(t){this._stencilTest=this._setSubState(t,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(t){this._depthWrite=this._setSubState(t,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(t){this._colorWrite=this._setSubState(t,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(t){this._stencilWrite=this._setSubState(t,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setSubState(t,e,i,n){return(i||t!==e)&&(n(t),this._pipelineInvalid=!0),t}}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/webgl/renderState.js?')}}]);