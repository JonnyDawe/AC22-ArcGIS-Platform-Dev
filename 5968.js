"use strict";(self.webpackChunkreveal_js_testing=self.webpackChunkreveal_js_testing||[]).push([[5968],{60573:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "p": () => (/* binding */ p)\n/* harmony export */ });\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(36663);\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(61681);\n/* harmony import */ var _core_Promise_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(64189);\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(81977);\n/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7753);\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(39994);\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(7283);\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(40266);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst p=p=>{let i=class extends((0,_core_Promise_js__WEBPACK_IMPORTED_MODULE_0__/* .EsriPromiseMixin */ .v)(p)){constructor(){super(...arguments),this.parent=null}get updating(){return!1}get visible(){const r=!(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__/* .isSome */ .pC)(this.parent)||this.parent.visible&&!this.parent.suspended;return this.analysis.visible&&r}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_7__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__/* .property */ .Cb)({readOnly:!0})],i.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_7__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__/* .property */ .Cb)({constructOnly:!0})],i.prototype,"analysis",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_7__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__/* .property */ .Cb)({constructOnly:!0})],i.prototype,"parent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_7__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__/* .property */ .Cb)({constructOnly:!0})],i.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_7__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__/* .property */ .Cb)({readOnly:!0})],i.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_7__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__/* .property */ .Cb)({readOnly:!0})],i.prototype,"visible",null),i=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_7__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__/* .subclass */ .j)("esri.views.3d.analysis.AnalysisView3D")],i),i};\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/3d/analysis/AnalysisView3D.js?')},15968:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "default": () => (/* binding */ g)\n});\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/tslib.es6.js\nvar tslib_es6 = __webpack_require__(36663);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Accessor.js + 3 modules\nvar Accessor = __webpack_require__(53443);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Collection.js + 1 modules\nvar Collection = __webpack_require__(66591);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Evented.js\nvar Evented = __webpack_require__(31355);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/HandleOwner.js\nvar HandleOwner = __webpack_require__(53280);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/maybe.js\nvar maybe = __webpack_require__(61681);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\nvar property = __webpack_require__(81977);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/arrayUtils.js\nvar arrayUtils = __webpack_require__(7753);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(39994);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\nvar ensureType = __webpack_require__(7283);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js\nvar subclass = __webpack_require__(40266);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/vec3f64.js\nvar vec3f64 = __webpack_require__(8909);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/analysis/AnalysisView3D.js\nvar AnalysisView3D = __webpack_require__(60573);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/Color.js\nvar Color = __webpack_require__(30936);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightConfiguration.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nlet s=class extends Accessor/* default */.Z{constructor(o){super(o),this.innerWidth=2,this.outerWidth=8,this.visibleInnerColor=new Color/* default */.Z([3,252,111,1]),this.visibleOuterColor=new Color/* default */.Z([3,252,111,.15]),this.occludedInnerColor=new Color/* default */.Z([252,3,69,1]),this.occludedOuterColor=new Color/* default */.Z([252,3,69,.1]),this.undefinedInnerColor=new Color/* default */.Z([255,255,255,1]),this.undefinedOuterColor=new Color/* default */.Z([127,127,127,.2])}};(0,tslib_es6._)([(0,property/* property */.Cb)({type:Number})],s.prototype,"innerWidth",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({type:Number})],s.prototype,"outerWidth",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({type:Color/* default */.Z})],s.prototype,"visibleInnerColor",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({type:Color/* default */.Z})],s.prototype,"visibleOuterColor",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({type:Color/* default */.Z})],s.prototype,"occludedInnerColor",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({type:Color/* default */.Z})],s.prototype,"occludedOuterColor",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({type:Color/* default */.Z})],s.prototype,"undefinedInnerColor",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({type:Color/* default */.Z})],s.prototype,"undefinedOuterColor",void 0),s=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.3d.analysis.LineOfSight.LineOfSightConfiguration")],s);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry.js\nvar geometry = __webpack_require__(91957);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Handles.js\nvar Handles = __webpack_require__(44584);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/handleUtils.js\nvar handleUtils = __webpack_require__(23148);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(13802);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/promiseUtils.js\nvar promiseUtils = __webpack_require__(78668);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/reactiveUtils.js\nvar reactiveUtils = __webpack_require__(76868);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/vec3.js\nvar vec3 = __webpack_require__(6766);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/projection.js\nvar projection = __webpack_require__(90472);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js\nvar aaBoundingRect = __webpack_require__(24568);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/ray.js\nvar ray = __webpack_require__(97537);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/analysis/LineOfSightAnalysisResult.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nlet LineOfSightAnalysisResult_s=class extends Accessor/* default */.Z{constructor(o){super(o),this.target=null,this.intersectedGraphic=null,this.intersectedLocation=null,this.elevationAlignedTargetLocation=null}};(0,tslib_es6._)([(0,property/* property */.Cb)()],LineOfSightAnalysisResult_s.prototype,"target",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],LineOfSightAnalysisResult_s.prototype,"intersectedGraphic",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],LineOfSightAnalysisResult_s.prototype,"intersectedLocation",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],LineOfSightAnalysisResult_s.prototype,"elevationAlignedTargetLocation",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],LineOfSightAnalysisResult_s.prototype,"visible",void 0),LineOfSightAnalysisResult_s=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.3d.analysis.LineOfSightAnalysisResult")],LineOfSightAnalysisResult_s);\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightComputation.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nlet i=class extends Accessor/* default */.Z{constructor(t){super(t),this.elevationAlignedTargetLocation=null,this.inputPoints={isValid:!1,observer:(0,vec3f64.c)(),observerSurfaceNormal:null,target:(0,vec3f64.c)(),targetSurfaceNormal:null,observerAdjusted:(0,vec3f64.c)(),targetAdjusted:(0,vec3f64.c)()},this.computationResult={start:(0,vec3f64.c)(),end:(0,vec3f64.c)(),intersection:(0,vec3f64.c)(),isValid:!1,isTargetVisible:!1},this.result=null}notifyResultChanged(){this.notifyChange("computationResult")}notifyInputPointsChanged(){this.notifyChange("inputPoints")}};(0,tslib_es6._)([(0,property/* property */.Cb)()],i.prototype,"target",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],i.prototype,"elevationAlignedTargetLocation",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],i.prototype,"inputPoints",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],i.prototype,"computationResult",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],i.prototype,"result",void 0),i=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.3d.analysis.LineOfSight.LineOfSightComputation")],i);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/screenUtils.js\nvar screenUtils = __webpack_require__(95550);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/vectorStacks.js + 1 modules\nvar vectorStacks = __webpack_require__(68817);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js\nvar dehydratedFeatures = __webpack_require__(48358);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/lang.js\nvar lang = __webpack_require__(67134);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightIntersectionResult.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nvar n;let a=n=class extends Accessor/* default */.Z{constructor(r){super(r)}clone(){return new n({type:this.type,id:(0,lang/* clone */.d9)(this.id),point:(0,lang/* clone */.d9)(this.point),normal:(0,lang/* clone */.d9)(this.normal),ray:(0,lang/* clone */.d9)(this.ray)})}equals(r){return this.type===r.type&&this.id===r.id&&(0,maybe/* equalsMaybe */._W)(this.point,r.point)&&(0,arrayUtils/* equals */.fS)(this.normal,r.normal)&&(0,ray/* equals */.fS)(this.ray,r.ray)}};(0,tslib_es6._)([(0,property/* property */.Cb)()],a.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({constructOnly:!0})],a.prototype,"id",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({constructOnly:!0})],a.prototype,"point",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({constructOnly:!0})],a.prototype,"normal",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({constructOnly:!0})],a.prototype,"ray",void 0),a=n=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.3d.analysis.LineOfSight.LineOfSightIntersectionResult")],a);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/layers/i3s/Intersector.js\nvar Intersector = __webpack_require__(94576);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/support/geometryUtils/ray.js\nvar geometryUtils_ray = __webpack_require__(40460);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/terrain/Intersector.js\nvar terrain_Intersector = __webpack_require__(87564);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/terrain/tileUtils.js\nvar tileUtils = __webpack_require__(30220);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js\nvar lib_Intersector = __webpack_require__(8927);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js\nvar IntersectorInterfaces = __webpack_require__(20757);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/intersectorUtilsConversions.js + 1 modules\nvar intersectorUtilsConversions = __webpack_require__(5865);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightRayIntersector.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nlet U=class extends Accessor/* default */.Z{constructor(e){super(e)}initialize(){this.intersector=(0,lib_Intersector/* newIntersector */.Z8)(this.view.state.viewingMode),this.intersector.options.hud=!1,this.intersector.options.store=IntersectorInterfaces/* StoreResults.MIN */.eC.MIN}getScreenPointIntersection(e){const t=(0,screenUtils/* screenPointObjectToArray */.md)(e,vectorStacks/* sv2d.get */.qW.get()),r=(0,geometryUtils_ray/* fromScreen */.u4)(this.view.state.camera,t,O);return this._getRayIntersection(r)}_getRayIntersection(e){if((0,maybe/* isNone */.Wi)(e))return null;this.view.sceneIntersectionHelper.intersectToolIntersectorRay(e,this.intersector);const t=this.intersector.results.min;if(!t.getIntersectionPoint(_))return null;const o=this.view.renderCoordsHelper.fromRenderCoords(_,this.view.spatialReference),i=(0,vec3f64.d)(t.normal),n=(0,vec3.d)(i,e.direction)>0?-1:1;if((0,vec3.a)(i,i,n),(0,Intersector/* isI3sIntersectorResult */.G)(t))return new a({type:IntersectorInterfaces/* IntersectorType.OBJECT */.q7.OBJECT,id:`${t.target.layerUid}/${t.target.nodeIndex}/${t.target.componentIndex}`,point:o,normal:i,ray:(0,ray/* copy */.JG)(e)});if((0,terrain_Intersector/* isTerrainIntersectorResult */.T)(t))return new a({type:IntersectorInterfaces/* IntersectorType.TERRAIN */.q7.TERRAIN,id:t.target.lij.slice(),point:o,normal:i,ray:(0,ray/* copy */.JG)(e)});const p=(0,intersectorUtilsConversions/* toGraphic */.t)(t,this.view);if((0,maybe/* isSome */.pC)(p)){const t=p.layer,r=p.sourceLayer;let s;if(r)if("scene"===r.type)s=(0,dehydratedFeatures/* getObjectId */.MS)(p,r.objectIdField);else s=p.uid;else s=p.uid;return new a({type:IntersectorInterfaces/* IntersectorType.OBJECT */.q7.OBJECT,id:`${t.uid}/${s}`,point:o,normal:i,ray:(0,ray/* copy */.JG)(e)})}return null}_canUpdateFromIntersectionResult(e,t){if((0,maybe/* isNone */.Wi)(e)||!t||e.type!==t.type)return!1;switch(e.type){case IntersectorInterfaces/* IntersectorType.TERRAIN */.q7.TERRAIN:{const r=e.id,s=t.id;return r[0]===s[0]&&r[1]===s[1]&&r[2]===s[2]||(0,tileUtils/* tilesAreRelated */.E9)(r,s)}case IntersectorInterfaces/* IntersectorType.OBJECT */.q7.OBJECT:case IntersectorInterfaces/* IntersectorType.I3S */.q7.I3S:return e.id===t.id}}updateFromIntersectionResult(e){let t;if(e.type===IntersectorInterfaces/* IntersectorType.TERRAIN */.q7.TERRAIN&&(0,maybe/* isSome */.pC)(e.point)){const r=_,s=A,o=E;this.view.renderCoordsHelper.toRenderCoords(e.point,s),this.view.renderCoordsHelper.worldUpAtPosition(s,o);const i=this.view.basemapTerrain.elevationBounds,n=this.view.renderCoordsHelper.getAltitude(s),c=i?Math.abs(i.max-i.min)/Math.abs(n):100,l=n>0?1:-1;(0,vec3.n)(o,o),(0,vec3.a)(o,o,l*c),(0,vec3.b)(r,s,o),(0,ray/* fromPoints */.zk)(r,s,O),t=this._getRayIntersection(O)}else t=this._getRayIntersection(e.ray);return this._canUpdateFromIntersectionResult(t,e)?t.point:null}};(0,tslib_es6._)([(0,property/* property */.Cb)()],U.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],U.prototype,"intersector",void 0),U=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.3d.analysis.LineOfSight.LineOfSightRayIntersector")],U);const _=(0,vec3f64.c)(),A=(0,vec3f64.c)(),E=(0,vec3f64.c)(),O=(0,ray/* create */.Ue)();\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/analysis/support/projectionUtils.js\nvar projectionUtils = __webpack_require__(28376);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/support/Scheduler.js\nvar Scheduler = __webpack_require__(22167);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/support/WatchUpdatingTracking.js\nvar WatchUpdatingTracking = __webpack_require__(73216);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/Point.js + 2 modules\nvar Point = __webpack_require__(53446);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightController.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst W=Logger/* default.getLogger */.Z.getLogger("esri.views.3d.analysis.LineOfSight.LineOfSightController");let K=class extends(Evented/* default.EventedMixin */.Z.EventedMixin(Accessor/* default */.Z)){constructor(t){super(t),this.updateOnCameraChange=!0,this._updatingHandles=new WatchUpdatingTracking/* WatchUpdatingTracking */.t,this._frameTask=Scheduler/* ImmediateTask */.sq,this._handles=new Handles/* default */.Z,this._computationHandles=new Handles/* default */.Z,this._externalObserverUpdate=!0}initialize(){var t;const e=null==(t=this.view.resourceController)?void 0:t.scheduler;this._frameTask=e?e.registerTask(Scheduler/* TaskPriority.LINE_OF_SIGHT_TOOL */.T8.LINE_OF_SIGHT_TOOL):Scheduler/* ImmediateTask */.sq,this._intersector=new U({view:this.view}),this._handles.add([this._connectObserver(),this._connectComputations(),this._connectTargets()])}destroy(){this._handles.destroy(),this._computationHandles.destroy(),this._computations.removeAll(),this._updatingHandles.destroy()}get updating(){return this._frameTask.updating||this._updatingHandles.updating}get priority(){return this._frameTask.priority}set priority(t){this._frameTask.priority=t}get _computations(){return this.analysisViewData.computations}get _observerEngineLocation(){return this.analysisViewData.observerEngineLocation}set _observerEngineLocation(t){this.analysisViewData.observerEngineLocation=t}get _screenPixelSize(){return this.view.state.camera.computeScreenPixelSizeAt(this._observerEngineLocation)}getLineOfSightComputationDependencies(t){const{inputPoints:e}=t;return{inputPoints:e}}_computeResult(t){const e=t.computation,{inputPoints:i,computationResult:o}=e,{observerAdjusted:n,targetAdjusted:s}=i,{start:r,end:a}=o;(0,vec3.g)(r,n),(0,vec3.g)(a,s);this._canCompute(e)?this._computeIntersection(t):this._interpolateIntersection(t),e.notifyResultChanged(),this.emit("result-changed",{target:t.computation.target,result:e.result})}_adjustStartEndPositions(t){const e=this._screenPixelSize,i=this.view,{inputPoints:o}=t,{observer:n,observerSurfaceNormal:s,target:r,targetSurfaceNormal:c,observerAdjusted:l,targetAdjusted:p}=o,u=Y;(0,maybe/* isSome */.pC)(s)?(0,vec3.g)(u,s):(0,vec3.f)(u,r,n);const h=e;(0,vec3.n)(u,u),(0,vec3.a)(u,u,Math.min(h,1)),(0,vec3.b)(l,n,u),(0,maybe/* isSome */.pC)(c)?(0,vec3.g)(u,c):(0,vec3.f)(u,n,r);const d=i.state.camera.computeScreenPixelSizeAt(r);(0,vec3.n)(u,u),(0,vec3.a)(u,u,Math.min(d,1)),(0,vec3.b)(p,r,u)}_computeIntersection({computation:t,interpolationInfo:e}){const{view:i}=this,{sceneIntersectionHelper:o,renderCoordsHelper:n}=i;if((0,maybe/* isNone */.Wi)(o))return;const s=this._intersector.intersector,{computationResult:r,inputPoints:l}=t,{observer:p,target:u}=l,{start:h,end:d}=r,m=(0,ray/* fromPoints */.zk)(h,d,Z);o.intersectToolIntersectorRay(m,s);const g=r.intersection,v=Y;let _=!0;if(s.results.min.getIntersectionPoint(g)){(0,vec3.g)(e.originalIntersection,g),(0,vec3.g)(e.originalObserver,h),(0,vec3.g)(e.originalTarget,d),n.fromRenderCoords(g,v,i.spatialReference);const t=1-(0,vec3.j)(d,u)/(0,vec3.j)(h,u);_=(0,vec3.j)(p,g)>=t*(0,vec3.j)(p,u)}const y=new Point/* default */.Z(v,i.spatialReference);{const{result:e,target:o}=t;(0,maybe/* isSome */.pC)(e)?(e.target=o,e.intersectedGraphic=_?null:(0,intersectorUtilsConversions/* toGraphic */.t)(s.results.min,i),e.intersectedLocation=_?null:y,e.visible=_):t.result=new LineOfSightAnalysisResult_s({target:o,elevationAlignedTargetLocation:t.elevationAlignedTargetLocation,intersectedGraphic:_?null:(0,intersectorUtilsConversions/* toGraphic */.t)(s.results.min,i),intersectedLocation:_?null:y,visible:_})}r.isValid=l.isValid=!0,r.isTargetVisible=_}_interpolateIntersection({computation:t,interpolationInfo:e}){const{computationResult:i,inputPoints:o}=t,{start:n,end:s,intersection:r}=i,{originalIntersection:a,originalObserver:c,originalTarget:l}=e;if((0,vec3.g)(r,a),o.isValid){const t=Y,e=(0,vec3.j)(c,a)/(0,vec3.j)(c,l);(0,vec3.v)(t,n,c),(0,vec3.a)(t,t,1-e),(0,vec3.b)(r,r,t),(0,vec3.v)(t,s,l),(0,vec3.a)(t,t,e),(0,vec3.b)(r,r,t),i.isValid=!0}else t.result=null,i.isValid=!1,i.isTargetVisible=!1}_canCompute(t){const e=this.analysisViewData.elevationAlignedObserver,i=this.view.frustum;if((0,maybe/* isNone */.Wi)(e)||(0,maybe/* isNone */.Wi)(t.elevationAlignedTargetLocation)||(0,maybe/* isNone */.Wi)(i))return!1;const{observerAdjusted:o,targetAdjusted:n}=t.inputPoints,s=i.intersectsPoint(o),r=i.intersectsPoint(n);return s&&r}_onObserverPositionChange(t,e,i){if(this._externalObserverUpdate=i,(0,maybe/* isNone */.Wi)(t))return void(this.analysisViewData.elevationAlignedObserver=null);const o=this._applyProjectionAndElevationAlignment(t,e);if((0,maybe/* isNone */.Wi)(o))return (0,projectionUtils/* logFailedGeometryProjectionError */.e)(this.analysis,t.spatialReference,W),void(this.analysisViewData.elevationAlignedObserver=null);const n=(0,vec3f64.c)();this.analysisViewData.elevationAlignedObserver=o,this.view.renderCoordsHelper.toRenderCoords(this.analysisViewData.elevationAlignedObserver,n),this._observerEngineLocation=n,this.priority=Scheduler/* TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE */.T8.LINE_OF_SIGHT_TOOL_INTERACTIVE}_applyProjectionAndElevationAlignment(t,e){const i=(0,maybe/* isSome */.pC)(e)&&e.type!==IntersectorInterfaces/* IntersectorType.OBJECT */.q7.OBJECT;return (0,projectionUtils/* applyProjectionAndElevationAlignment */.G)(t,this.view.spatialReference,this.view.elevationProvider,i)}_onObserverRenderSpacePositionChangeForComputation(t,e,i){const{inputPoints:o}=t;if((0,vec3.g)(o.observer,e),(0,maybe/* isSome */.pC)(i)){const t=this._intersector.updateFromIntersectionResult(i);(0,maybe/* isSome */.pC)(t)&&this.view.renderCoordsHelper.toRenderCoords(t,o.observer),o.observerSurfaceNormal=(0,vec3f64.a)(i.normal)}else o.observerSurfaceNormal=null;this._adjustStartEndPositions(t),t.notifyInputPointsChanged(),this.priority=Scheduler/* TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE */.T8.LINE_OF_SIGHT_TOOL_INTERACTIVE}_onTargetPositionChange(t,e,i,o=!0){const n=t.inputPoints;if(o&&(n.isValid=!1),t.elevationAlignedTargetLocation=this._applyProjectionAndElevationAlignment(e,i),(0,maybe/* isNone */.Wi)(t.elevationAlignedTargetLocation))(0,projectionUtils/* logFailedGeometryProjectionError */.e)(this.analysis,e.spatialReference,W);else{if(this.view.renderCoordsHelper.toRenderCoords(t.elevationAlignedTargetLocation,n.target),(0,maybe/* isSome */.pC)(i)){const t=this._intersector.updateFromIntersectionResult(i);(0,maybe/* isSome */.pC)(t)&&this.view.renderCoordsHelper.toRenderCoords(t,n.target),n.targetSurfaceNormal=(0,vec3f64.a)(i.normal)}else n.targetSurfaceNormal=null;this._adjustStartEndPositions(t)}t.notifyInputPointsChanged(),this.priority=Scheduler/* TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE */.T8.LINE_OF_SIGHT_TOOL_INTERACTIVE}_connectComputationToTarget(t){return (0,handleUtils/* handlesGroup */.AL)([(0,reactiveUtils/* watch */.YP)((()=>t.target.position),(e=>{Q(e,t.target.intersection)||(t.target.intersection=null)}),reactiveUtils/* initial */.nn),(0,reactiveUtils/* watch */.YP)((()=>({computation:t,targetPosition:t.target.position,targetIntersection:t.target.intersection})),(({computation:t,targetPosition:e,targetIntersection:i})=>{(0,maybe/* isSome */.pC)(e)&&this._onTargetPositionChange(t,e,i)}),reactiveUtils/* syncAndInitial */.tX)])}_connectComputationToObserver(t){return (0,reactiveUtils/* watch */.YP)((()=>({computation:t,observer:this.analysisViewData.elevationAlignedObserver})),(({computation:t})=>{this._externalObserverUpdate&&(t.inputPoints.isValid=!1,t.notifyInputPointsChanged())}),reactiveUtils/* syncAndInitial */.tX)}_connectComputationToRenderSpaceObserver(t){return (0,reactiveUtils/* watch */.YP)((()=>({computation:t,observer:this._observerEngineLocation,observerIntersection:(0,maybe/* isSome */.pC)(this.analysis.observer)?this.analysis.observer.intersection:null})),(({computation:t,observer:e,observerIntersection:i})=>{this._onObserverRenderSpacePositionChangeForComputation(t,e,i)}),reactiveUtils/* syncAndInitial */.tX)}_connectComputationToCamera(t){return (0,reactiveUtils/* watch */.YP)((()=>({camera:this.view.state.camera,isDirty:this._isCameraDirty})),(({isDirty:e})=>{!this.updateOnCameraChange||t.inputPoints.isValid&&!e||t.notifyInputPointsChanged()}),reactiveUtils/* sync */.Z_)}_connectComputationToSlicePlane(t){return (0,reactiveUtils/* watch */.YP)((()=>this.view.slicePlane),(()=>t.notifyInputPointsChanged()))}_connectComputationToElevation(t){return this.view.elevationProvider.on("elevation-change",(e=>{const i=this.analysis.observer,o=t.target;let n=null,s=null,r=null,l=null;const p=(0,maybe/* isSome */.pC)(i)&&(0,maybe/* isSome */.pC)(i.position)?i.position.spatialReference:(0,maybe/* isSome */.pC)(o.position)?o.position.spatialReference:e.spatialReference;(0,maybe/* isSome */.pC)(i)&&(0,maybe/* isSome */.pC)(i.position)&&(n=tt,s=i.intersection,(0,projection/* projectPoint */.nF)(i.position,n,p)),(0,maybe/* isSome */.pC)(o.position)&&(r=et,l=o.intersection,(0,projection/* projectPoint */.nF)(o.position,r,p)),(0,maybe/* isNone */.Wi)(n)&&(0,maybe/* isNone */.Wi)(r)||((0,projection/* projectBoundingRect */.dH)(e.extent,e.spatialReference,$,p),(0,maybe/* isSome */.pC)(n)&&(0,aaBoundingRect/* containsPointObject */.Qn)($,n)&&this._onObserverPositionChange(n,s,!1),(0,maybe/* isSome */.pC)(r)&&(0,aaBoundingRect/* containsPointObject */.Qn)($,r)&&this._onTargetPositionChange(t,r,l,!1),(0,maybe/* isSome */.pC)(n)&&(0,maybe/* isSome */.pC)(r)&&(0,aaBoundingRect/* intersectsSegment */.I7)($,n,r)&&t.notifyInputPointsChanged())}))}_connectComputationToTask(t){let e=maybe/* none */.YP;const i={computation:t,interpolationInfo:{originalIntersection:(0,vec3f64.c)(),originalObserver:(0,vec3f64.c)(),originalTarget:(0,vec3f64.c)()}};return (0,handleUtils/* handlesGroup */.AL)([(0,reactiveUtils/* watch */.YP)((()=>this.getLineOfSightComputationDependencies(t)),(()=>{e=(0,maybe/* abortMaybe */.IM)(e),e=(0,promiseUtils/* createTask */.vr)((async t=>{await (0,promiseUtils/* ignoreAbortErrors */.R8)(this._frameTask.schedule((()=>this._computeResult(i)),t))}))}),reactiveUtils/* syncAndInitial */.tX),(0,handleUtils/* makeHandle */.kB)((()=>e=(0,maybe/* abortMaybe */.IM)(e)))])}_connectComputation(t){const e=this._computationHandles;e.has(t)||e.add([this._connectComputationToTarget(t),this._connectComputationToObserver(t),this._connectComputationToRenderSpaceObserver(t),this._connectComputationToCamera(t),this._connectComputationToSlicePlane(t),this._connectComputationToElevation(t),this._connectComputationToTask(t)],t)}_disconnectAnalysis(t){this._computationHandles.remove(t)}_onComputationCollectionChange(t){t.added.forEach((t=>this._connectComputation(t))),t.removed.forEach((t=>this._disconnectAnalysis(t)))}_onTargetsChange(){return this._computations.removeAll(),this.analysis.targets.forEach((t=>this._addTarget(t))),this._updatingHandles.addOnCollectionChange((()=>this.analysis.targets),(t=>this._onTargetCollectionChange(t)))}_onTargetCollectionChange(t){t.added.forEach((t=>this._addTarget(t))),t.removed.forEach((t=>this._removeTarget(t)))}_onCursorTargetChange(t,e){(0,maybe/* isSome */.pC)(e)&&this._removeTarget(e),(0,maybe/* isSome */.pC)(t)&&this._addTarget(t)}_addTarget(t){this._computations.some((e=>e.target===t))||this._computations.add(new i({target:t}))}_removeTarget(t){const e=this._computations.find((e=>e.target===t));this._computations.remove(e)}_connectObserver(){return (0,handleUtils/* handlesGroup */.AL)([(0,reactiveUtils/* watch */.YP)((()=>({observer:this.analysis.observer,observerPosition:(0,maybe/* isSome */.pC)(this.analysis.observer)?this.analysis.observer.position:null,observerIntersection:(0,maybe/* isSome */.pC)(this.analysis.observer)?this.analysis.observer.intersection:null})),(({observer:t,observerPosition:e,observerIntersection:i})=>{(0,maybe/* isSome */.pC)(t)&&!Q(e,i)&&(t.intersection=null)}),reactiveUtils/* initial */.nn),(0,reactiveUtils/* watch */.YP)((()=>({observerPosition:(0,maybe/* isSome */.pC)(this.analysis.observer)?this.analysis.observer.position:null,observerIntersection:(0,maybe/* isSome */.pC)(this.analysis.observer)?this.analysis.observer.intersection:null})),(({observerPosition:t,observerIntersection:e})=>this._onObserverPositionChange(t,e,!0)),reactiveUtils/* syncAndInitial */.tX)])}_connectComputations(){let t=null;return (0,handleUtils/* handlesGroup */.AL)([(0,reactiveUtils/* watch */.YP)((()=>this._computations),(()=>{(0,maybe/* removeMaybe */.hw)(t),t=this._updatingHandles.addOnCollectionChange((()=>this._computations),(t=>this._onComputationCollectionChange(t))),this._computations.forEach((t=>this._connectComputation(t)))}),reactiveUtils/* syncAndInitial */.tX),(0,handleUtils/* makeHandle */.kB)((()=>t=(0,maybe/* removeMaybe */.hw)(t)))])}_connectTargets(){let t=null;return (0,handleUtils/* handlesGroup */.AL)([(0,reactiveUtils/* watch */.YP)((()=>this.analysis.targets),(()=>{t=(0,maybe/* removeMaybe */.hw)(t),t=this._onTargetsChange()}),reactiveUtils/* syncAndInitial */.tX),(0,reactiveUtils/* watch */.YP)((()=>this.analysisViewData.cursorTarget),((t,e)=>{this._onCursorTargetChange(t,e)})),(0,handleUtils/* makeHandle */.kB)((()=>{t=(0,maybe/* removeMaybe */.hw)(t)}))])}get _isCameraDirty(){const t=this.analysisViewData.elevationAlignedObserver,{view:e}=this,{renderCoordsHelper:i}=e;if((0,maybe/* isNone */.Wi)(t)||(0,maybe/* isNone */.Wi)(i))return!1;const o=Y;i.toRenderCoords(t,o);const n=e.state.camera.computeScreenPixelSizeAt(o);return Math.abs((n-this._screenPixelSize)/this._screenPixelSize)>X}};function Q(t,e){return (0,maybe/* isNone */.Wi)(e)||(0,maybe/* isSome */.pC)(t)&&t.equals(e.point)}(0,tslib_es6._)([(0,property/* property */.Cb)({constructOnly:!0})],K.prototype,"analysis",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({constructOnly:!0})],K.prototype,"analysisViewData",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({constructOnly:!0})],K.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],K.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.Cb)()],K.prototype,"priority",null),(0,tslib_es6._)([(0,property/* property */.Cb)()],K.prototype,"updateOnCameraChange",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],K.prototype,"_computations",null),(0,tslib_es6._)([(0,property/* property */.Cb)()],K.prototype,"_observerEngineLocation",null),(0,tslib_es6._)([(0,property/* property */.Cb)()],K.prototype,"_screenPixelSize",null),(0,tslib_es6._)([(0,property/* property */.Cb)({readOnly:!0})],K.prototype,"_updatingHandles",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],K.prototype,"_frameTask",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],K.prototype,"_isCameraDirty",null),K=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.3d.analysis.LineOfSight.LineOfSightController")],K);const X=.1,Y=(0,vec3f64.c)(),Z=(0,ray/* create */.Ue)(),$=(0,aaBoundingRect/* empty */.cS)(),tt=new Point/* default */.Z,et=new Point/* default */.Z;\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/mat4f64.js\nvar mat4f64 = __webpack_require__(39100);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js\nvar LineVisualElement = __webpack_require__(37926);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightVisualization.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nlet V=class extends Accessor/* default */.Z{constructor(i){super(i),this._lineOfSightVisualizations=[],this._handle=null,this._computationHandles=new Handles/* default */.Z}initialize(){this._handle=this._connectAnalysis()}destroy(){this._handle=(0,maybe/* removeMaybe */.hw)(this._handle),this._computationHandles=(0,maybe/* destroyMaybe */.SC)(this._computationHandles)}get visible(){return this.analysisViewData.visible}get testInfo(){return{visualizations:this._lineOfSightVisualizations}}get _configuration(){return this.analysisViewData.configuration}createLineOfSightVisualization(){const i=this._configuration,e={view:this.view,attached:!0,width:i.outerWidth,innerWidth:i.innerWidth},o=Color/* default.toUnitRGBA */.Z.toUnitRGBA(i.visibleOuterColor),n=Color/* default.toUnitRGBA */.Z.toUnitRGBA(i.visibleInnerColor),s=Color/* default.toUnitRGBA */.Z.toUnitRGBA(i.occludedOuterColor),r=Color/* default.toUnitRGBA */.Z.toUnitRGBA(i.occludedInnerColor),l=Color/* default.toUnitRGBA */.Z.toUnitRGBA(i.undefinedOuterColor),a=Color/* default.toUnitRGBA */.Z.toUnitRGBA(i.undefinedInnerColor),u={visibleLineVisualElement:new LineVisualElement/* LineVisualElement */.r({...e,color:o,innerColor:n}),occludedLineVisualElement:new LineVisualElement/* LineVisualElement */.r({...e,color:s,innerColor:r}),undefinedLineVisualElement:new LineVisualElement/* LineVisualElement */.r({...e,color:l,innerColor:a})};return this._lineOfSightVisualizations.push(u),u}destroyLineOfSightVisualization(i){i.visibleLineVisualElement=(0,maybe/* destroyMaybe */.SC)(i.visibleLineVisualElement),i.occludedLineVisualElement=(0,maybe/* destroyMaybe */.SC)(i.occludedLineVisualElement),i.undefinedLineVisualElement=(0,maybe/* destroyMaybe */.SC)(i.undefinedLineVisualElement),this._lineOfSightVisualizations.splice(this._lineOfSightVisualizations.indexOf(i),1)}updateLineOfSightVisualization(i,e){const o=this._configuration,{computationResult:n,inputPoints:s}=i,{start:r,end:l,intersection:u,isValid:c,isTargetVisible:d}=n,{observer:m}=s,h=LineOfSightVisualization_;h[12]=m[0],h[13]=m[1],h[14]=m[2];const g=(0,vec3.f)(y,r,m),v=(0,vec3.f)(LineOfSightVisualization_O,l,m),V=(0,vec3.f)(C,u,m),{visibleLineVisualElement:b,occludedLineVisualElement:L,undefinedLineVisualElement:S}=e,j=(0,maybe/* isNone */.Wi)(this.analysisViewData.elevationAlignedObserver)||(0,maybe/* isNone */.Wi)(i.elevationAlignedTargetLocation),z=this.visible&&!j;b.visible=z,L.visible=z,S.visible=z,z&&(b.geometry=null,L.geometry=null,S.geometry=null,c?d?(b.geometry=[[(0,vec3f64.d)(g),(0,vec3f64.d)(v)]],b.transform=h,b.color=Color/* default.toUnitRGBA */.Z.toUnitRGBA(o.visibleOuterColor)):(b.geometry=[[(0,vec3f64.d)(g),(0,vec3f64.d)(V)]],b.transform=h,b.color=Color/* default.toUnitRGBA */.Z.toUnitRGBA(o.occludedOuterColor),L.geometry=[[(0,vec3f64.d)(V),(0,vec3f64.d)(v)]],L.transform=h):(S.geometry=[[(0,vec3f64.d)(g),(0,vec3f64.d)(v)]],S.transform=h))}getLineOfSightVisualizationDependencies(i){const{computationResult:t}=i,{occludedOuterColor:e,visibleOuterColor:o}=this._configuration;return{computationResult:t,occludedOuterColor:e,visibleOuterColor:o,visible:this.visible}}_connectComputation(i){const t=this._computationHandles;if(t.has(i))return;const e=this.createLineOfSightVisualization();t.add([(0,reactiveUtils/* watch */.YP)((()=>this.getLineOfSightVisualizationDependencies(i)),(()=>this.updateLineOfSightVisualization(i,e)),reactiveUtils/* syncAndInitial */.tX),(0,handleUtils/* makeHandle */.kB)((()=>this.destroyLineOfSightVisualization(e)))],i)}_disconnectComputation(i){this._computationHandles.remove(i)}_connectAnalysis(){let i=null;return (0,handleUtils/* handlesGroup */.AL)([(0,reactiveUtils/* watch */.YP)((()=>this.analysisViewData.computations),(t=>{i=(0,maybe/* removeMaybe */.hw)(i),i=t.on("change",(i=>this._onComputationsCollectionChange(i))),this._onComputationsCollectionChange({target:t,added:t.items,removed:[],moved:[]})}),reactiveUtils/* syncAndInitial */.tX),(0,handleUtils/* makeHandle */.kB)((()=>i=(0,maybe/* removeMaybe */.hw)(i)))])}_onComputationsCollectionChange(i){i.added.forEach((i=>this._connectComputation(i))),i.removed.forEach((i=>this._disconnectComputation(i)))}};(0,tslib_es6._)([(0,property/* property */.Cb)({constructOnly:!0})],V.prototype,"analysis",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({constructOnly:!0})],V.prototype,"analysisViewData",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({constructOnly:!0})],V.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({readOnly:!0})],V.prototype,"visible",null),(0,tslib_es6._)([(0,property/* property */.Cb)()],V.prototype,"testInfo",null),(0,tslib_es6._)([(0,property/* property */.Cb)()],V.prototype,"_configuration",null),V=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.3d.analysis.LineOfSight.LineOfSightVisualization")],V);const y=(0,vec3f64.c)(),LineOfSightVisualization_O=(0,vec3f64.c)(),C=(0,vec3f64.c)(),LineOfSightVisualization_=(0,mat4f64.c)();\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/analysis/LineOfSightAnalysisView3D.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nlet d=class extends((0,AnalysisView3D/* AnalysisView3D */.p)((0,HandleOwner/* HandleOwnerMixin */.p)(Evented/* default.EventedMixin */.Z.EventedMixin(Accessor/* default */.Z)))){constructor(t){super(t),this.type="line-of-sight-view-3d",this.computations=new Collection/* default */.Z,this.elevationAlignedObserver=null,this.configuration=new s,this.observerEngineLocation=(0,vec3f64.c)(),this.cursorTarget=null}initialize(){const t=this.view,i=this.analysis;this._analysisController=new K({analysis:i,analysisViewData:this,view:t}),this._analysisVisualization=new V({analysis:i,analysisViewData:this,view:t}),this.handles.add([this._analysisController.on("result-changed",(t=>{t.target!==this.cursorTarget&&this.emit("result-changed",t)}))])}destroy(){this._analysisController=(0,maybe/* destroyMaybe */.SC)(this._analysisController),this._analysisVisualization=(0,maybe/* destroyMaybe */.SC)(this._analysisVisualization)}get results(){return this.computations.map((t=>t.result))}get priority(){return this._analysisController.priority}set priority(t){this._analysisController.priority=t}get updating(){return (0,maybe/* isSome */.pC)(this._analysisController)&&this._analysisController.updating}getResultForTarget(t){const i=this.computations.find((i=>i.target===t));return (0,maybe/* applySome */.yw)(i,(t=>t.result))}get testInfo(){return{visualization:this._analysisVisualization,controller:this._analysisController}}};(0,tslib_es6._)([(0,property/* property */.Cb)()],d.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],d.prototype,"analysis",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({readOnly:!0})],d.prototype,"results",null),(0,tslib_es6._)([(0,property/* property */.Cb)()],d.prototype,"priority",null),(0,tslib_es6._)([(0,property/* property */.Cb)()],d.prototype,"computations",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],d.prototype,"elevationAlignedObserver",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],d.prototype,"configuration",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],d.prototype,"observerEngineLocation",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],d.prototype,"cursorTarget",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],d.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.Cb)()],d.prototype,"_analysisController",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],d.prototype,"_analysisVisualization",void 0),d=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.3d.analysis.LineOfSightAnalysisView3D")],d);const g=d;\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/3d/analysis/LineOfSightAnalysisView3D.js_+_7_modules?')},28376:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"G\": () => (/* binding */ n),\n/* harmony export */   \"e\": () => (/* binding */ a)\n/* harmony export */ });\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(61681);\n/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(90472);\n/* harmony import */ var _support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(66143);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction n(n,a,p,s=!1){const c=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_0__/* .tryProjectWithZConversion */ .fM)(n,a);return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__/* .isNone */ .Wi)(c)?null:(c.hasZ&&!s||!(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__/* .isSome */ .pC)(p)||(c.z=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__/* .unwrapOr */ .Pt)((0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_2__/* .getElevationAtPoint */ .KO)(p,c),0)),c)}function a(o,e,r){r.warnOnce(`Failed to project analysis geometry (id: '${o.id}'), projection from spatial reference (wkid: '${e.wkid}') to view spatial reference is not supported. Projection may be possible after calling projection.load().`)}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/3d/analysis/support/projectionUtils.js?")},37926:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "r": () => (/* binding */ g)\n/* harmony export */ });\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(61681);\n/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24455);\n/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39100);\n/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6766);\n/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8909);\n/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(88589);\n/* harmony import */ var _chunks_vec4f32_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(18916);\n/* harmony import */ var _Object3DVisualElement_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(10449);\n/* harmony import */ var _layers_graphics_lineUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(69341);\n/* harmony import */ var _webgl_engine_lib_Material_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(7358);\n/* harmony import */ var _webgl_engine_materials_RibbonLineMaterial_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(65392);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass g extends _Object3DVisualElement_js__WEBPACK_IMPORTED_MODULE_6__/* .Object3DVisualElement */ ._{constructor(e){super(e),this._renderOccluded=_webgl_engine_lib_Material_js__WEBPACK_IMPORTED_MODULE_8__/* .RenderOccludedFlag.OccludeAndTransparent */ .yD.OccludeAndTransparent,this._width=1,this._color=(0,_chunks_vec4f32_js__WEBPACK_IMPORTED_MODULE_5__.f)(1,0,1,1),this._innerWidth=1,this._innerColor=null,this._stipplePattern=null,this._stippleOffColor=null,this._stipplePreferContinuous=!0,this._writeDepthEnabled=!0,this._falloff=0,this._polygonOffset=!1,this.applyProps(e)}setGeometryFromRenderSpacePoint(e){const t=1e3,r=[];r.push([[e[0]-t,e[1]+0,e[2]+0],[e[0]+t,e[1]+0,e[2]+0]]),r.push([[e[0]-0,e[1]-t,e[2]+0],[e[0]+0,e[1]+t,e[2]+0]]),r.push([[e[0]-0,e[1]+0,e[2]-t],[e[0]+0,e[1]+0,e[2]+t]]),this.geometry=r}setGeometryFromExtent(e){const t=this.view.spatialReference,r=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),s=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),o=100,l=[];(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,e[0],e[1],o),this.view.renderCoordsHelper.toRenderCoords(r,t,s),l.push([s[0],s[1],s[2]]),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,e[2],e[1],o),this.view.renderCoordsHelper.toRenderCoords(r,t,s),l.push([s[0],s[1],s[2]]),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,e[2],e[3],o),this.view.renderCoordsHelper.toRenderCoords(r,t,s),l.push([s[0],s[1],s[2]]),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,e[0],e[3],o),this.view.renderCoordsHelper.toRenderCoords(r,t,s),l.push([s[0],s[1],s[2]]),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,e[0],e[1],o),this.view.renderCoordsHelper.toRenderCoords(r,t,s),l.push([s[0],s[1],s[2]]),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,e[0],e[1],o),this.view.renderCoordsHelper.toRenderCoords(r,t,s),l.push([s[0],s[1],s[2]]),this.geometry=[l]}setGeometryFromFrustum(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]}setGeometryFromBoundedPlane(e){const t=[],r=e.origin,s=e.basis1,i=e.basis2,o=.5,l=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),h=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),a=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),p=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)();l[0]=r[0]-s[0]*o-i[0]*o,l[1]=r[1]-s[1]*o-i[1]*o,l[2]=r[2]-s[2]*o-i[2]*o,h[0]=r[0]-s[0]*o+i[0]*o,h[1]=r[1]-s[1]*o+i[1]*o,h[2]=r[2]-s[2]*o+i[2]*o,a[0]=r[0]+s[0]*o+i[0]*o,a[1]=r[1]+s[1]*o+i[1]*o,a[2]=r[2]+s[2]*o+i[2]*o,p[0]=r[0]+s[0]*o-i[0]*o,p[1]=r[1]+s[1]*o-i[1]*o,p[2]=r[2]+s[2]*o-i[2]*o,t.push([l[0],l[1],l[2]]),t.push([h[0],h[1],h[2]]),t.push([a[0],a[1],a[2]]),t.push([p[0],p[1],p[2]]),t.push([l[0],l[1],l[2]]),this.geometry=[t]}setGeometryFromSegment(e){const t=e.endRenderSpace;this.transform=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.f)(C,t);const{points:s}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[s]}setGeometryFromSegments(e,t=_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.Z){this.transform=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.f)(C,t),this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__.g)(e,this._color)||((0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__.c)(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(r){(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__/* .isSome */ .pC)(r)?!(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__/* .isNone */ .Wi)(this._innerColor)&&(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__.g)(r,this._innerColor)||(this._innerColor=(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__.c)((0,_chunks_vec4f32_js__WEBPACK_IMPORTED_MODULE_5__.c)(),r),this._updateMaterial()):(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__/* .isSome */ .pC)(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(t){const r=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__/* .isSome */ .pC)(t)!==(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__/* .isSome */ .pC)(this._stipplePattern);this._stipplePattern=t,r?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(r){((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__/* .isNone */ .Wi)(r)||(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__/* .isNone */ .Wi)(this._stippleOffColor)||!(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__.g)(r,this._stippleOffColor))&&(this._stippleOffColor=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__/* .isSome */ .pC)(r)?(0,_chunks_vec4f32_js__WEBPACK_IMPORTED_MODULE_5__.a)(r):null,this._updateMaterial())}get stipplePreferContinuous(){return this._stipplePreferContinuous}set stipplePreferContinuous(e){this._stipplePreferContinuous!==e&&(this._stipplePreferContinuous=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}createExternalResources(){this._material=new _webgl_engine_materials_RibbonLineMaterial_js__WEBPACK_IMPORTED_MODULE_9__/* .RibbonLineMaterial */ .U(this.materialParameters)}destroyExternalResources(){this._material=null}createGeometries(e){const t=this._createLineGeometries();if(0!==t.length)for(let r=0;r<t.length;++r){const s=(0,_layers_graphics_lineUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .createGeometry */ .YU)(t[r]);e.addGeometry(s,this._material)}}forEachExternalMaterial(e){e(this._material)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:this._stipplePreferContinuous,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateMaterial(){this.attached&&this._material.setParameters(this.materialParameters)}_createLineGeometries(){const e=this.geometry;if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__/* .isNone */ .Wi)(e)||0===e.length)return[];const r=[];return e.forEach((e=>{const t=e.length,s=new Float64Array(3*t);e.forEach(((e,t)=>{s[3*t+0]=e[0],s[3*t+1]=e[1],s[3*t+2]=e[2]}));const i={overlayInfo:null,attributeData:{position:s},removeDuplicateStartEnd:_layers_graphics_lineUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .RemoveDuplicateStartEnd.KEEP */ .NW.KEEP};r.push(i)})),r}}const C=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.c)();\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js?')},10449:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "_": () => (/* binding */ n)\n/* harmony export */ });\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(61681);\n/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24455);\n/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39100);\n/* harmony import */ var _VisualElement_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(76169);\n/* harmony import */ var _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(70984);\n/* harmony import */ var _webgl_engine_lib_Object3D_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(49394);\n/* harmony import */ var _webgl_engine_lib_WebGLLayer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(26982);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass n extends _VisualElement_js__WEBPACK_IMPORTED_MODULE_5__/* .VisualElement */ .l{constructor(e){super(e.view),this._resources=null,this._transform=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.c)()}get object(){return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__/* .isSome */ .pC)(this._resources)?this._resources.object:null}get transform(){return this._transform}set transform(s){(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.c)(this._transform,s),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__/* .isSome */ .pC)(this._resources)&&(this._resources.object.transformation=this._transform)}recreate(){this.attached&&this.createResources()}recreateGeometry(){if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__/* .isNone */ .Wi)(this._resources))return;const e=this._resources.object,r=this.view._stage;r.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),r.addMany(e.geometries)}createResources(){this.destroyResources();const e=this.view._stage;if(!e)return;const s=new _webgl_engine_lib_WebGLLayer_js__WEBPACK_IMPORTED_MODULE_4__/* .WebGLLayer */ .F({isPickable:!1,updatePolicy:_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .UpdatePolicy.SYNC */ .jq.SYNC});e.add(s);const r=new _webgl_engine_lib_Object3D_js__WEBPACK_IMPORTED_MODULE_3__/* .Object3D */ .T({castShadow:!1});r.transformation=this._transform,this.createExternalResources(),this.createGeometries(r),e.addMany(r.geometries),this.forEachExternalMaterial((s=>e.add(s))),e.add(r),s.add(r),this.visible||r.setVisible(!1),this._resources={layer:s,object:r}}destroyResources(){const e=this.view._stage;!(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__/* .isNone */ .Wi)(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((s=>{e.remove(s),s.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__/* .isNone */ .Wi)(this._resources)||this._resources.object.setVisible(e)}}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/3d/interactive/visualElements/Object3DVisualElement.js?')},76169:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "l": () => (/* binding */ t)\n/* harmony export */ });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass t{constructor(t){this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=t,this.view.watch("ready",(t=>{this._resourcesCreated&&(t?this._createResources():this._destroyResources())}))}applyProps(t){let e=!1;for(const s in t)s in this?"attached"===s?e=t[s]:this[s]=t[s]:console.error("Cannot set unknown property",s);this.attached=e}destroy(){this.attached=!1}get attached(){return this._attached}set attached(t){t!==this._attached&&this.view._stage&&(this._attached=t,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.attached&&this.updateVisibility(t))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.visible||this.updateVisibility(!1)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElement.js?')}}]);