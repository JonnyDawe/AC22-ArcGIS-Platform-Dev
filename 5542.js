"use strict";(self.webpackChunkreveal_js_testing=self.webpackChunkreveal_js_testing||[]).push([[5542],{65542:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ d)\n/* harmony export */ });\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(36663);\n/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66591);\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39994);\n/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(70375);\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(61681);\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(78668);\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(81977);\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(40266);\n/* harmony import */ var _LayerView3D_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(19654);\n/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(26216);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst m="analysis-view-handles";let w=class extends((0,_LayerView3D_js__WEBPACK_IMPORTED_MODULE_6__/* .LayerView3D */ .A)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)){constructor(s){super(s),this.type="analysis-3d",this.allAnalysisViews=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z,this._creatingViewCount=0,this._analysisViewCreationTasks=new Map,this._analysisModules={"area-measurement":{module:null},"direct-line-measurement":{module:null},"line-of-sight":{module:null},slice:{module:null}}}initialize(){for(const s of this.layer.analyses)this._createAnalysisView(s);this.handles.add([this.layer.analyses.on("after-add",(s=>{this._createAnalysisView(s.item)})),this.layer.analyses.on("after-remove",(s=>{const e=this.allAnalysisViews.removeAt(this.allAnalysisViews.findIndex((e=>e.analysis===s.item)));(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__/* .isSome */ .pC)(e)&&e.destroy();const i=this._analysisViewCreationTasks.get(s.item);(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__/* .isSome */ .pC)(i)&&(i.abort(),this._analysisViewCreationTasks.delete(s.item))}))],m)}destroy(){this.handles.remove(m),this.allAnalysisViews.drain((s=>s.destroy())),this._analysisViewCreationTasks.clear(),this._creatingViewCount=0}whenAnalysisView(s){const e=this._analysisViewCreationTasks.get(s);if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__/* .isSome */ .pC)(e))return e.promise;const t=new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("layerview:no-analysisview-for-analysis","The analysis has not been added to the AnalysisLayer of this layer view",{analysis:s});return Promise.reject(t)}isUpdating(){return 0!==this._creatingViewCount||this.allAnalysisViews.some((s=>s.updating))}_createAnalysisView(s){this._analysisViewCreationTasks.set(s,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .createTask */ .vr)((e=>this._createAnalysisViewPromise(s,e))))}async _createAnalysisViewPromise(s,e){this._creatingViewCount+=1;const a=s.type,r=this._analysisModules[a];if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__/* .isNone */ .Wi)(r.module)){const s=await this._loadAnalysisModule(a);r.module=s}const o=new r.module.default({analysis:s,view:this.view,parent:this});if(await o.when(),this._creatingViewCount-=1,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .isAborted */ .Hc)(e))throw o.destroy(),new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("layerview:no-analysisview-for-analysis","The analysis has not been added to the AnalysisLayer of this layer view",{analysis:s});return this.allAnalysisViews.add(o),o}_loadAnalysisModule(s){switch(s){case"area-measurement":return Promise.all(/* import() */[__webpack_require__.e(9067), __webpack_require__.e(2177), __webpack_require__.e(4882), __webpack_require__.e(1347)]).then(__webpack_require__.bind(__webpack_require__, 41347));case"direct-line-measurement":return Promise.all(/* import() */[__webpack_require__.e(9067), __webpack_require__.e(4882), __webpack_require__.e(2121)]).then(__webpack_require__.bind(__webpack_require__, 92121));case"line-of-sight":return __webpack_require__.e(/* import() */ 5968).then(__webpack_require__.bind(__webpack_require__, 15968));case"slice":return Promise.all(/* import() */[__webpack_require__.e(4703), __webpack_require__.e(4535)]).then(__webpack_require__.bind(__webpack_require__, 34535));default:return null}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .Cb)()],w.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .Cb)()],w.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .Cb)()],w.prototype,"allAnalysisViews",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .Cb)()],w.prototype,"_creatingViewCount",void 0),w=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_9__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__/* .subclass */ .j)("esri.views.3d.layers.AnalysisLayerView3D")],w);const d=w;\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/3d/layers/AnalysisLayerView3D.js?')}}]);