"use strict";(self.webpackChunkreveal_js_testing=self.webpackChunkreveal_js_testing||[]).push([[8306],{6415:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "I": () => (/* binding */ p),\n/* harmony export */   "b": () => (/* binding */ g)\n/* harmony export */ });\n/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(25714);\n/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5885);\n/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4731);\n/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6665);\n/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(73393);\n/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_AlphaDiscard_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(41272);\n/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(32394);\n/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(23410);\n/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(3961);\n/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(21414);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction g(g){const p=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_8__/* .ShaderBuilder */ .kG;return p.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Transform */ .w,{linearDepth:!1}),p.vertex.uniforms.add("proj","mat4").add("view","mat4"),p.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_9__/* .VertexAttribute.POSITION */ .T.POSITION,"vec3"),p.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_9__/* .VertexAttribute.UV0 */ .T.UV0,"vec2"),p.varyings.add("vpos","vec3"),g.multipassTerrainEnabled&&p.varyings.add("depth","float"),p.vertex.uniforms.add("textureCoordinateScaleFactor","vec2"),p.vertex.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H`\n    void main(void) {\n      vpos = position;\n      ${g.multipassTerrainEnabled?"depth = (view * vec4(vpos, 1.0)).z;":""}\n      vTexCoord = uv0 * textureCoordinateScaleFactor;\n      gl_Position = transformPosition(proj, view, vpos);\n    }\n  `),p.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .Slice */ .p2,g),g.multipassTerrainEnabled&&(p.fragment.include(_views_3d_webgl_engine_core_shaderLibrary_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .ReadLinearDepth */ .S),p.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .multipassTerrainTest */ .l,g)),p.fragment.uniforms.add("tex","sampler2D"),p.fragment.uniforms.add("opacity","float"),p.varyings.add("vTexCoord","vec2"),g.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput.Alpha */ .H.Alpha?p.fragment.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H`\n    void main() {\n      discardBySlice(vpos);\n      ${g.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":""}\n\n      float alpha = texture2D(tex, vTexCoord).a * opacity;\n      if (alpha  < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl.float */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaDiscard_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .defaultMaskAlphaCutoff */ .F)}) {\n        discard;\n      }\n\n      gl_FragColor = vec4(alpha);\n    }\n    `):(p.fragment.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .ColorConversion */ .Y),p.fragment.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H`\n    void main() {\n      discardBySlice(vpos);\n      ${g.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":""}\n      gl_FragColor = texture2D(tex, vTexCoord) * opacity;\n\n      if (gl_FragColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl.float */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaDiscard_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .defaultMaskAlphaCutoff */ .F)}) {\n        discard;\n      }\n\n      gl_FragColor = highlightSlice(gl_FragColor, vpos);\n      ${g.oitEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}\n    }\n    `)),p}const p=Object.freeze({__proto__:null,build:g});\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/chunks/ImageMaterial.glsl.js?')},78306:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "Z": () => (/* binding */ q)\n});\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/tslib.es6.js\nvar tslib_es6 = __webpack_require__(36663);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/asyncUtils.js\nvar asyncUtils = __webpack_require__(67979);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(13802);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/maybe.js\nvar maybe = __webpack_require__(61681);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/promiseUtils.js\nvar promiseUtils = __webpack_require__(78668);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/watchUtils.js\nvar watchUtils = __webpack_require__(15071);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\nvar property = __webpack_require__(81977);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/arrayUtils.js\nvar arrayUtils = __webpack_require__(7753);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(39994);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\nvar ensureType = __webpack_require__(7283);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js\nvar subclass = __webpack_require__(40266);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/Extent.js\nvar Extent = __webpack_require__(91772);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js\nvar aaBoundingRect = __webpack_require__(24568);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/layers/interfaces.js\nvar interfaces = __webpack_require__(43977);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/layers/LayerView3D.js\nvar LayerView3D = __webpack_require__(19654);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js\nvar Geometry = __webpack_require__(47562);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GeometryUtil.js + 1 modules\nvar GeometryUtil = __webpack_require__(6087);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js\nvar VertexAttribute = __webpack_require__(21414);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/layers/support/overlayImageUtils.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction overlayImageUtils_a(n,r,i){const o=(0,aaBoundingRect/* width */.bf)(n)/(0,aaBoundingRect/* height */.Cb)(n),a={width:i,height:i};return o>1.0001?a.height=i/o:o<.9999&&(a.width=i*o),a.width=Math.round(a.width/((0,aaBoundingRect/* width */.bf)(n)/(0,aaBoundingRect/* width */.bf)(r))),a.height=Math.round(a.height/((0,aaBoundingRect/* height */.Cb)(n)/(0,aaBoundingRect/* height */.Cb)(r))),a}function overlayImageUtils_h(t){return GeometryUtil/* default.createSquareGeometry */.Z.createSquareGeometry([[t[0],t[1],-1],[t[2],t[1],-1],[t[2],t[3],-1],[t[0],t[3],-1]])}function overlayImageUtils_l(t,e){if(!(0,aaBoundingRect/* intersects */.kK)(t,e))return overlayImageUtils_h(e);const i=[t[1]-e[1],Math.min(t[3],e[3])-Math.max(t[1],e[1]),e[3]-t[3],123456],a=[t[0]-e[0],Math.min(t[2],e[2])-Math.max(t[0],e[0]),e[2]-t[2],123456],l=e[2]-e[0],u=e[3]-e[1],m=a[0]>0&&a[2]>0?3:2,c=i[0]>0&&i[2]>0?3:2,g=(c+1)*(m+1),w=new Float64Array(3*g),f=new Float32Array(2*g),d=new Uint32Array(6*(c*m-1));let y=0,M=0,b=0,p=0,x=0;for(let n=0;n<4;n++){const t=i[n];if(t<=0)continue;let r=0;for(let i=0;i<4;i++){const t=a[i];t<=0||(w[M++]=e[0]+r,w[M++]=e[1]+y,w[M++]=-1,f[b++]=r/l,f[b++]=y/u,i<3&&n<3&&(1!==i||1!==n)&&(d[x++]=p,d[x++]=p+1,d[x++]=p+m+1,d[x++]=p+1,d[x++]=p+m+2,d[x++]=p+m+1),p++,r+=t)}y+=t}const A=new Uint32Array(d.length);return new Geometry/* Geometry */.Z([[VertexAttribute/* VertexAttribute.POSITION */.T.POSITION,{size:3,data:w,exclusive:!0}],[VertexAttribute/* VertexAttribute.NORMAL */.T.NORMAL,{size:3,data:s,exclusive:!0}],[VertexAttribute/* VertexAttribute.UV0 */.T.UV0,{size:2,data:f,exclusive:!0}]],[[VertexAttribute/* VertexAttribute.POSITION */.T.POSITION,d],[VertexAttribute/* VertexAttribute.NORMAL */.T.NORMAL,A],[VertexAttribute/* VertexAttribute.UV0 */.T.UV0,d]])}const s=[0,0,1];\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/layers/support/projectExtentUtils.js\nvar projectExtentUtils = __webpack_require__(53986);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/support/debugFlags.js\nvar debugFlags = __webpack_require__(3289);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/terrain/interfaces.js\nvar terrain_interfaces = __webpack_require__(9812);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js\nvar basicInterfaces = __webpack_require__(70984);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ModelDirtyTypes.js\nvar ModelDirtyTypes = __webpack_require__(79341);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderGeometry.js + 1 modules\nvar RenderGeometry = __webpack_require__(96047);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js + 1 modules\nvar Texture = __webpack_require__(44101);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js + 1 modules\nvar ImageMaterial = __webpack_require__(79591);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/layers/LayerView.js\nvar LayerView = __webpack_require__(26216);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js\nvar RefreshableLayerView = __webpack_require__(55068);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/support/layerViewUtils.js\nvar layerViewUtils = __webpack_require__(42780);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/enums.js\nvar enums = __webpack_require__(91907);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/layers/DynamicLayerView3D.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst z=Logger/* default.getLogger */.Z.getLogger("esri.views.3d.layers.DynamicLayerView3D");let F=class extends((0,RefreshableLayerView/* RefreshableLayerView */.y)((0,LayerView3D/* LayerView3D */.A)(LayerView/* default */.Z))){constructor(){super(...arguments),this.drapeSourceType=interfaces/* DrapeSourceType.RasterImage */.Lw.RasterImage,this.updatePolicy=basicInterfaces/* UpdatePolicy.SYNC */.jq.SYNC,this.fullExtentInLocalViewSpatialReference=null,this.maximumDataResolution=null,this._images=new Array,this._extents=new Array,this._overlays=new Array,this.updateWhenStationary=!0,this.refreshDebounced=(0,promiseUtils/* debounce */.Ds)((async e=>{this.destroyed||await this._doRefresh(e).catch((e=>{(0,promiseUtils/* isAbortError */.D_)(e)||Logger/* default.getLogger */.Z.getLogger(this.declaredClass).error(e)}))}),2e3)}initialize(){this.addResolvingPromise((0,projectExtentUtils/* toViewIfLocal */.E)(this).then((e=>this._set("fullExtentInLocalViewSpatialReference",e)))),this.updatingHandles.add((()=>this.suspended),(()=>this._suspendedChangeHandler())),this.handles.add(this.view.resourceController.scheduler.registerIdleStateCallbacks((()=>{this._isScaleRangeActive()&&this.notifyChange("suspended")}),(()=>{}))),this._isScaleRangeLayer()&&this.updatingHandles.add((()=>this.layer.effectiveScaleRange),(()=>this.notifyChange("suspended")))}destroy(){this.clear()}setDrapingExtent(e,t){this._spatialReference=t,e.forEach((e=>{this._overlays[e.index]=e,this._updateImageExtent(e)}))}_updateImageExtent(e){const t=this._clippedExtent(e.extent,W);if((0,maybe/* isNone */.Wi)(t))return;const i=overlayImageUtils_a(e.extent,t,e.resolution);let r=e.pixelRatio*this.view.pixelRatio;if("imageMaxWidth"in this.layer||"imageMaxHeight"in this.layer){const e=this.layer.imageMaxWidth,t=this.layer.imageMaxHeight;if(i.width>e){const t=e/i.width;i.height=Math.floor(i.height*t),i.width=e,r*=t}if(i.height>t){const e=t/i.height;i.width=Math.floor(i.width*e),i.height=t,r*=e}}const a=this._extents[e.index];a&&(0,aaBoundingRect/* equals */.fS)(a.extent,t)&&this._imageSizeEquals(t,a.imageSize,i)||(this._extents[e.index]={extent:(0,aaBoundingRect/* create */.Ue)(t),imageSize:i,pixelRatio:r},this.suspended||this._fetch(e.index).catch((e=>{(0,promiseUtils/* isAbortError */.D_)(e)||z.error(e)})))}clear(){for(let e=0;e<this._images.length;e++)this._clearImage(e)}async doRefresh(){return this._doRefresh()}async _doRefresh(e){if(this.suspended)return;const t=[];for(let i=0;i<this._extents.length;i++)this._extents[i]&&t.push(this._fetch(i,e));await (0,promiseUtils/* eachAlways */.as)(t)}canResume(){if(!super.canResume())return!1;const e=this.layer;if(this._isScaleRangeActive()){const{minScale:t,maxScale:i}=e.effectiveScaleRange,r=this.view.scale;if(r<i||t>0&&r>t)return!1}return!0}isUpdating(){return this._images.some((e=>!!e.loadingPromise))}async processResult(e,t,i){(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement)&&(e.image=t)}findExtentInfoAt(e){for(const t of this._extents){const i=t.extent;if(new Extent/* default */.Z(i[0],i[1],i[2],i[3],this._spatialReference).contains(e))return t}return null}getFetchOptions(){}async redraw(e,i){await (0,asyncUtils/* forEach */.Ed)(this._images,(async(t,r)=>{t&&(await e(t,i),await this._createStageObjects(r,t.image,i))}))}_imageSizeEquals(e,t,i){if(!this.maximumDataResolution)return!1;const r=(0,aaBoundingRect/* width */.bf)(e)/this.maximumDataResolution.x,s=(0,aaBoundingRect/* height */.Cb)(e)/this.maximumDataResolution.y,a=r/t.width,n=s/t.height,o=r/i.width,l=s/i.height,h=Math.abs(a-o),m=Math.abs(n-l),c=debugFlags/* default.TESTS_DISABLE_OPTIMIZATIONS */.Z.TESTS_DISABLE_OPTIMIZATIONS?0:1.5;return h<=c&&m<=c}async _fetch(e,t){if(this.suspended)return;const i=this._extents[e],r=i.extent;this._images[e]||(this._images[e]={texture:null,material:null,renderGeometry:null,loadingPromise:null,loadingAbortController:null,image:null,pixelData:null,renderExtent:(0,aaBoundingRect/* create */.Ue)(r)});const s=this._images[e];s.loadingAbortController&&(s.loadingAbortController.abort(),s.loadingAbortController=null);const a=new Extent/* default */.Z(r[0],r[1],r[2],r[3],this._spatialReference);if(0===a.width||0===a.height)return void this._clearImage(e);const n=new AbortController;s.loadingAbortController=n,(0,promiseUtils/* onAbort */.fu)(t,(()=>n.abort()));const l=n.signal,g=this._waitFetchReady(l).then((()=>{const t={requestAsImageElement:!0,pixelRatio:this._overlays[e].pixelRatio,...this.getFetchOptions(),signal:l},{height:r,width:s}=i.imageSize;return this.layer.fetchImage(a,s,r,t)})).then((e=>{if((0,promiseUtils/* isAborted */.Hc)(l))throw z.warnOnce("A call to fetchImage resolved even though the request was aborted. fetchImage should not resolve if options.signal.aborted is true."),(0,promiseUtils/* createAbortError */.zE)();return this.processResult(s,e)})).then((()=>(0,aaBoundingRect/* copy */.JG)(s.renderExtent,r)));s.loadingPromise=g,(0,promiseUtils/* always */.Bx)(g,(()=>{g===s.loadingPromise&&(s.loadingPromise=null,s.loadingAbortController=null)})),this.notifyChange("updating"),await g.then((async()=>{if(l.aborted)throw (0,promiseUtils/* createAbortError */.zE)();await this._createStageObjects(e,s.image,l),this.notifyChange("updating")})).catch((e=>{throw e&&!(0,promiseUtils/* isAbortError */.D_)(e)&&z.error(e),this.notifyChange("updating"),e}))}_clearImage(e){const t=this._images[e];if(t){(0,maybe/* isSome */.pC)(t.renderGeometry)&&(this.view.basemapTerrain.overlayManager.renderer.removeGeometries([t.renderGeometry],this,ModelDirtyTypes/* ModelDirty.Geometry.UPDATE */.$.Geometry.UPDATE),t.renderGeometry=null);const e=this.view._stage;e.remove(t.texture),t.texture=null,e.remove(t.material),t.material=null,t.loadingAbortController&&(t.loadingAbortController.abort(),t.loadingAbortController=null),t.loadingPromise=null,t.image=null,t.pixelData=null}}async _createStageObjects(e,t,r){const n=this.view._stage,o=this._images[e],l=this.view.basemapTerrain.overlayManager.renderer,h=()=>{n.remove(o.texture),o.texture=null,(0,maybe/* isSome */.pC)(o.renderGeometry)&&(l.removeGeometries([o.renderGeometry],this,ModelDirtyTypes/* ModelDirty.Geometry.UPDATE */.$.Geometry.UPDATE),o.renderGeometry=null)};if(t){const a=new Texture/* Texture */.x(t,{width:t.width,height:t.height,preMultiplyAlpha:!0,wrap:{s:enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE,t:enums/* TextureWrapMode.CLAMP_TO_EDGE */.e8.CLAMP_TO_EDGE}});let m;if(await (0,asyncUtils/* result */.q6)(this._images[e===terrain_interfaces/* OverlayIndex.INNER */.fu.INNER?terrain_interfaces/* OverlayIndex.OUTER */.fu.OUTER:terrain_interfaces/* OverlayIndex.INNER */.fu.INNER].loadingPromise),(0,promiseUtils/* throwIfAborted */.k_)(r),e===terrain_interfaces/* OverlayIndex.INNER */.fu.INNER)m=overlayImageUtils_h(o.renderExtent);else{const e=this._images[0].renderExtent;if(!e)return void h();m=overlayImageUtils_l(e,o.renderExtent)}h(),n.add(a),await n.loadImmediate(a),o.texture=a,(0,maybe/* isNone */.Wi)(o.material)?(o.material=new ImageMaterial/* ImageMaterial */.j({transparent:!0,textureId:a.id}),n.add(o.material)):o.material.setParameters({textureId:a.id}),o.renderGeometry=new RenderGeometry/* RenderGeometry */.z(m,o.material),o.renderGeometry.origin=this._overlays[e].renderLocalOrigin,l.addGeometries([o.renderGeometry],this,ModelDirtyTypes/* ModelDirty.Geometry.UPDATE */.$.Geometry.UPDATE)}else h(),n.remove(o.material),o.material=null}_isScaleRangeLayer(){return"effectiveScaleRange"in this.layer}_isScaleRangeActive(){const e=this.layer;if(!this._isScaleRangeLayer())return!1;const{minScale:t,maxScale:i}=e.effectiveScaleRange;return (0,layerViewUtils/* isScaleRangeActive */.Av)(t,i)}_clippedExtent(e,t){if("local"!==this.view.viewingMode)return (0,aaBoundingRect/* copy */.JG)(t,e);const i=this.view.basemapTerrain;return i.ready?(0,aaBoundingRect/* intersection */.jV)(e,i.extent,t):(0,aaBoundingRect/* copy */.JG)(t,e)}_suspendedChangeHandler(){this.suspended?this.clear():this.refreshDebounced()}async _waitFetchReady(e){await (0,watchUtils/* whenOnce */.N1)(this.view,"stationary",e),(0,promiseUtils/* throwIfAborted */.k_)(e)}};(0,tslib_es6._)([(0,property/* property */.Cb)()],F.prototype,"layer",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],F.prototype,"suspended",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)({readOnly:!0})],F.prototype,"fullExtentInLocalViewSpatialReference",void 0),(0,tslib_es6._)([(0,property/* property */.Cb)()],F.prototype,"updating",void 0),F=(0,tslib_es6._)([(0,subclass/* subclass */.j)("esri.views.3d.layers.DynamicLayerView3D")],F);const q=F,W=(0,aaBoundingRect/* create */.Ue)();\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/3d/layers/DynamicLayerView3D.js_+_1_modules?')},53986:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "E": () => (/* binding */ l)\n/* harmony export */ });\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(61681);\n/* harmony import */ var _geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39536);\n/* harmony import */ var _portal_support_geometryServiceUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8060);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction l(l){const s=l.view.spatialReference,i=l.layer.fullExtent,n=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__/* .isSome */ .pC)(i)&&i.spatialReference;if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__/* .isNone */ .Wi)(i)||!n)return Promise.resolve(null);if(n.equals(s))return Promise.resolve(i.clone());const a=(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .project */ .iV)(i,s);return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__/* .isSome */ .pC)(a)?Promise.resolve(a):l.view.state.isLocal?(0,_portal_support_geometryServiceUtils_js__WEBPACK_IMPORTED_MODULE_1__.projectGeometry)(i,s,l.layer.portalItem).then((e=>!l.destroyed&&e?e:void 0)).catch((()=>null)):Promise.resolve(null)}\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/3d/layers/support/projectExtentUtils.js?')},79591:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "j": () => (/* binding */ m)\n});\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions.js\nvar ShaderOutputOptions = __webpack_require__(25714);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js\nvar basicInterfaces = __webpack_require__(70984);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterials.js\nvar GLMaterials = __webpack_require__(71399);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialTexture.js\nvar GLMaterialTexture = __webpack_require__(11327);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js\nvar Material = __webpack_require__(7358);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js\nvar OrderIndependentTransparency = __webpack_require__(12045);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js\nvar RenderSlot = __webpack_require__(46378);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/DefaultBufferWriter.js\nvar DefaultBufferWriter = __webpack_require__(89339);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js\nvar MaterialUtil = __webpack_require__(25584);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/tslib.es6.js\nvar tslib_es6 = __webpack_require__(36663);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\nvar Slice_glsl = __webpack_require__(5885);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\nvar MultipassTerrainTest_glsl = __webpack_require__(73393);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\nvar View_glsl = __webpack_require__(84614);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js\nvar ReloadableShaderModule = __webpack_require__(9969);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js\nvar ShaderTechnique = __webpack_require__(52756);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js\nvar ShaderTechniqueConfiguration = __webpack_require__(67197);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js\nvar DefaultVertexAttributeLocations = __webpack_require__(5474);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js\nvar Program = __webpack_require__(95194);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js\nvar StencilUtils = __webpack_require__(79040);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/ImageMaterial.glsl.js\nvar ImageMaterial_glsl = __webpack_require__(6415);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/enums.js\nvar enums = __webpack_require__(91907);\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/renderState.js\nvar renderState = __webpack_require__(17346);\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass _ extends ShaderTechnique/* ShaderTechnique */.A{initializeProgram(e){const t=_.shader.get(),r=this.configuration,i=t.build({output:r.output,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,oitEnabled:r.transparencyPassType===basicInterfaces/* TransparencyPassType.Color */.Am.Color,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new Program/* Program */.$(e.rctx,i,DefaultVertexAttributeLocations/* Default3D */.i)}bindPass(e,t){(0,View_glsl/* bindProjectionMatrix */.II)(this.program,t.camera.projectionMatrix),this.program.setUniform1f("opacity",e.opacity),t.multipassTerrainEnabled&&(this.program.setUniform2fv("nearFar",t.camera.nearFar),this.program.setUniform2fv("inverseViewport",t.inverseViewport),(0,MultipassTerrainTest_glsl/* bindMultipassTerrainTexture */.p)(this.program,t))}bindDraw(e){(0,View_glsl/* bindView */.id)(this.program,e),(0,Slice_glsl/* bindSliceUniformsWithOrigin */.DA)(this.program,this.configuration,e),this.program.rebindTextures()}_setPipelineState(e,r){const i=this.configuration,s=e===basicInterfaces/* TransparencyPassType.NONE */.Am.NONE,o=e===basicInterfaces/* TransparencyPassType.FrontFace */.Am.FrontFace;return (0,renderState/* makePipelineState */.sm)({blending:i.output!==ShaderOutputOptions/* ShaderOutput.Color */.H.Color&&i.output!==ShaderOutputOptions/* ShaderOutput.Alpha */.H.Alpha||!i.transparent?null:s?x:(0,OrderIndependentTransparency/* oitBlending */.j7)(e),culling:(0,renderState/* cullingParams */.zp)(i.cullFace),depthTest:{func:(0,OrderIndependentTransparency/* oitDepthTest */.Bh)(e)},depthWrite:s?i.writeDepth&&renderState/* defaultDepthWriteParams */.LZ:(0,OrderIndependentTransparency/* oitDepthWrite */.K5)(e),colorWrite:renderState/* defaultColorWriteParams */.BK,stencilWrite:i.sceneHasOcludees?StencilUtils/* stencilWriteMaskOn */.s3:null,stencilTest:i.sceneHasOcludees?r?StencilUtils/* stencilToolMaskBaseParams */.eD:StencilUtils/* stencilBaseAllZerosParams */.RY:null,polygonOffset:s||o?null:(0,OrderIndependentTransparency/* getOITPolygonOffset */.je)(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(e,t){return t?this._occludeePipelineState:super.getPipelineState(e,t)}}_.shader=new ReloadableShaderModule/* ReloadableShaderModule */.J(ImageMaterial_glsl.I,(()=>__webpack_require__.e(/* import() */ 7204).then(__webpack_require__.bind(__webpack_require__, 47204))));const x=(0,renderState/* simpleBlendingParams */["if"])(enums/* BlendFactor.ONE */.zi.ONE,enums/* BlendFactor.ONE_MINUS_SRC_ALPHA */.zi.ONE_MINUS_SRC_ALPHA);class A extends ShaderTechniqueConfiguration/* ShaderTechniqueConfiguration */.m{constructor(){super(...arguments),this.output=ShaderOutputOptions/* ShaderOutput.Color */.H.Color,this.cullFace=basicInterfaces/* CullFaceOptions.None */.Vr.None,this.slicePlaneEnabled=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.sceneHasOcludees=!1,this.transparencyPassType=basicInterfaces/* TransparencyPassType.NONE */.Am.NONE,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.o)({count:ShaderOutputOptions/* ShaderOutput.COUNT */.H.COUNT})],A.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.o)({count:basicInterfaces/* CullFaceOptions.COUNT */.Vr.COUNT})],A.prototype,"cullFace",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.o)()],A.prototype,"slicePlaneEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.o)()],A.prototype,"transparent",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.o)()],A.prototype,"enableOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.o)()],A.prototype,"writeDepth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.o)()],A.prototype,"sceneHasOcludees",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.o)({count:basicInterfaces/* TransparencyPassType.COUNT */.Am.COUNT})],A.prototype,"transparencyPassType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.o)()],A.prototype,"multipassTerrainEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.o)()],A.prototype,"cullAboveGround",void 0);\n\n;// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass m extends Material/* Material */.F5{constructor(e){super(e,f),this.supportsEdges=!0,this.techniqueConfig=new A}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.parameters.cullFace,this.techniqueConfig.slicePlaneEnabled=this.parameters.slicePlaneEnabled,this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.sceneHasOcludees=this.parameters.sceneHasOcludees,this.techniqueConfig.transparencyPassType=t.transparencyPassType,this.techniqueConfig.enableOffset=t.camera.relativeElevation<OrderIndependentTransparency/* OITPolygonOffsetLimit */.ve,this.techniqueConfig.multipassTerrainEnabled=t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=t.cullAboveGround,this.techniqueConfig}intersect(e,t,r,i,a,s,n){(0,MaterialUtil/* intersectTriangleGeometry */.Bw)(e,t,i,a,s,void 0,n)}requiresSlot(t,i){if(t===RenderSlot/* RenderSlot.DRAPED_MATERIAL */.r.DRAPED_MATERIAL)return!0;if((0,GLMaterials/* outputFromPass */.S)(i)===ShaderOutputOptions/* ShaderOutput.Highlight */.H.Highlight)return t===RenderSlot/* RenderSlot.OPAQUE_MATERIAL */.r.OPAQUE_MATERIAL;return t===(this.parameters.transparent?this.parameters.writeDepth?RenderSlot/* RenderSlot.TRANSPARENT_MATERIAL */.r.TRANSPARENT_MATERIAL:RenderSlot/* RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL */.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:RenderSlot/* RenderSlot.OPAQUE_MATERIAL */.r.OPAQUE_MATERIAL)}createGLMaterial(t){return t.output===ShaderOutputOptions/* ShaderOutput.Color */.H.Color||t.output===ShaderOutputOptions/* ShaderOutput.Alpha */.H.Alpha||t.output===ShaderOutputOptions/* ShaderOutput.Highlight */.H.Highlight?new d(t):void 0}createBufferWriter(){return new DefaultBufferWriter/* DefaultBufferWriter */.G_(DefaultBufferWriter/* PositionUVLayout */.W1)}}class d extends GLMaterialTexture/* default */.Z{constructor(e){super({...e,...e.material.parameters})}updateParameters(e){const t=this._material.parameters;return this.updateTexture(t.textureId),this.ensureTechnique(_,e)}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.sceneHasOcludees&&(this._material.setParameters({sceneHasOcludees:e.hasOccludees}),this.updateParameters(e))}beginSlot(t){return this._output!==ShaderOutputOptions/* ShaderOutput.Color */.H.Color&&this._output!==ShaderOutputOptions/* ShaderOutput.Alpha */.H.Alpha||this._updateOccludeeState(t),this.updateParameters(t)}bind(e,t){this.bindTextures(t.program),this.bindTextureScale(t.program),t.bindPass(this._material.parameters,e)}}const f={transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,cullFace:basicInterfaces/* CullFaceOptions.None */.Vr.None,sceneHasOcludees:!1,opacity:1,textureId:null,initTextureTransparent:!0,...Material/* DefaultMaterialParameters */.mo};\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js_+_1_modules?')},55068:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "y": () => (/* binding */ i)\n/* harmony export */ });\n/* unused harmony export default */\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(36663);\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(13802);\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(78668);\n/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(76868);\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(81977);\n/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(7753);\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39994);\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(7283);\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(40266);\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst i=i=>{let c=class extends i{initialize(){this.handles.add((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.on)((()=>this.layer),"refresh",(r=>{this.doRefresh(r.dataChanged).catch((r=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .isAbortError */ .D_)(r)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getLogger */ .Z.getLogger(this.declaredClass).error(r)}))})),"RefreshableLayerView")}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_8__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .Cb)()],c.prototype,"layer",void 0),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_8__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__/* .subclass */ .j)("esri.layers.mixins.RefreshableLayerView")],c),c};\n\n\n//# sourceURL=webpack://reveal-js-testing/./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js?')}}]);